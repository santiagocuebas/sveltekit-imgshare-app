import{S as ue,i as ce,s as me,H as Ee,k as b,a as T,q as P,l as k,m as I,c as O,h as g,r as S,n as c,C as _e,b as U,D as m,g as N,v as Ie,d as M,f as je,u as ne,I as we,J as $e,K as De,F as K,a2 as nt,e as fe,a3 as at,$ as be,N as pe,M as Oe,G as ae,w as Z,L as lt,Q as Le,a0 as ot,W as rt,X as oe,y as x,z as ee,A as te,Y as re,B as se,_ as ft,O as ut,a1 as ct}from"../chunks/index.8bb6be9b.js";import{f as ke}from"../chunks/index.c08ef366.js";import{D as X}from"../chunks/config.3577f69e.js";import{U as Ve}from"../chunks/enums.4774c07c.js";import{h as Se,a as He}from"../chunks/services.bd8255ea.js";import{B as mt}from"../chunks/BoxGallery.71982b39.js";import{a as Pe}from"../chunks/axios.707ed124.js";import{c as it}from"../chunks/click-outside.61d417da.js";const _t=i=>({}),Fe=i=>({});function Ge(i){let e,t,s,l,a,r;const f=i[6].default,n=Ee(f,i,i[5],null);return{c(){e=b("div"),t=b("i"),s=T(),n&&n.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var u=I(e);t=k(u,"I",{class:!0}),I(t).forEach(g),s=O(u),n&&n.l(u),u.forEach(g),this.h()},h(){c(t,"class","fa-solid fa-ellipsis svelte-5jjxa6"),c(e,"class","image-edit svelte-5jjxa6")},m(o,u){U(o,e,u),m(e,t),m(e,s),n&&n.m(e,null),l=!0,a||(r=K(t,"mousedown",i[7]),a=!0)},p(o,u){n&&n.p&&(!l||u&32)&&we(n,f,o,o[5],l?De(f,o[5],u,null):$e(o[5]),null)},i(o){l||(N(n,o),l=!0)},o(o){M(n,o),l=!1},d(o){o&&g(e),n&&n.d(o),a=!1,r()}}}function ht(i){let e,t=i[0].description+"",s;return{c(){e=new nt(!1),s=fe(),this.h()},l(l){e=at(l,!1),s=fe(),this.h()},h(){e.a=s},m(l,a){e.m(t,l,a),U(l,s,a)},p(l,a){a&1&&t!==(t=l[0].description+"")&&e.p(t)},d(l){l&&g(s),l&&e.d()}}}function dt(i){let e,t,s,l,a,r,f,n,o,u,h;return{c(){e=b("form"),t=b("textarea"),s=T(),l=b("button"),a=P("Cancel"),r=T(),f=b("button"),n=P("Send"),this.h()},l(_){e=k(_,"FORM",{action:!0,method:!0,class:!0});var d=I(e);t=k(d,"TEXTAREA",{id:!0,name:!0,rows:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),I(t).forEach(g),s=O(d),l=k(d,"BUTTON",{class:!0});var E=I(l);a=S(E,"Cancel"),E.forEach(g),r=O(d),f=k(d,"BUTTON",{class:!0});var p=I(f);n=S(p,"Send"),p.forEach(g),d.forEach(g),this.h()},h(){c(t,"id","edit"),c(t,"name","description"),c(t,"rows","1"),c(t,"spellcheck","false"),c(t,"autocomplete","off"),c(t,"maxlength","4200"),c(t,"class","svelte-5jjxa6"),c(l,"class","svelte-5jjxa6"),c(f,"class","blue svelte-5jjxa6"),c(e,"action",o=X+"/api/image/"+i[0].id+"/description"),c(e,"method","POST"),c(e,"class","svelte-5jjxa6")},m(_,d){U(_,e,d),m(e,t),be(t,i[0].description),m(e,s),m(e,l),m(l,a),m(e,r),m(e,f),m(f,n),u||(h=[K(t,"input",i[8]),K(l,"click",pe(i[9])),K(e,"submit",pe(i[4]))],u=!0)},p(_,d){d&1&&be(t,_[0].description),d&1&&o!==(o=X+"/api/image/"+_[0].id+"/description")&&c(e,"action",o)},d(_){_&&g(e),u=!1,Oe(h)}}}function gt(i){var Ue,Be;let e,t,s,l,a,r=i[0].title+"",f,n,o,u,h,_,d,E,p,w,v=i[0].author+"",$,j,y,q,C=i[0].views+"",D,B,Y=ke(i[0].createdAt)+"",Q,J,W,F,H,V,R,ve,G,z=i[3]&&(((Ue=i[3])==null?void 0:Ue.username)===i[0].author||((Be=i[3])==null?void 0:Be.role)!==Ve.EDITOR)&&Ge(i);function Ce(A,L){return A[2]?dt:ht}let de=Ce(i),le=de(i);const Ae=i[6].assessment,ie=Ee(Ae,i,i[5],Fe);return{c(){e=b("div"),z&&z.c(),t=T(),s=b("h2"),l=b("i"),a=T(),f=P(r),n=T(),o=b("div"),u=b("a"),h=b("img"),p=T(),w=b("a"),$=P(v),y=T(),q=b("p"),D=P(C),B=P(" views ● "),Q=P(Y),J=T(),W=b("img"),V=T(),R=b("div"),le.c(),ve=T(),ie&&ie.c(),this.h()},l(A){e=k(A,"DIV",{class:!0});var L=I(e);z&&z.l(L),t=O(L),s=k(L,"H2",{class:!0});var ge=I(s);l=k(ge,"I",{class:!0}),I(l).forEach(g),a=O(ge),f=S(ge,r),ge.forEach(g),n=O(L),o=k(L,"DIV",{class:!0});var he=I(o);u=k(he,"A",{class:!0,href:!0});var Re=I(u);h=k(Re,"IMG",{src:!0,alt:!0,class:!0}),Re.forEach(g),p=O(he),w=k(he,"A",{class:!0,href:!0});var Me=I(w);$=S(Me,v),Me.forEach(g),y=O(he),q=k(he,"P",{});var ye=I(q);D=S(ye,C),B=S(ye," views ● "),Q=S(ye,Y),ye.forEach(g),he.forEach(g),J=O(L),W=k(L,"IMG",{class:!0,src:!0,alt:!0}),V=O(L),R=k(L,"DIV",{class:!0});var qe=I(R);le.l(qe),qe.forEach(g),ve=O(L),ie&&ie.l(L),L.forEach(g),this.h()},h(){c(l,"class","fa-solid fa-image title-icon"),c(s,"class","title"),_e(h.src,_=X+"/uploads/avatars/"+i[0].avatar)||c(h,"src",_),c(h,"alt",d=i[0].author),c(h,"class","svelte-5jjxa6"),c(u,"class","image-author-link svelte-5jjxa6"),c(u,"href",E="/user/"+i[0].author),c(w,"class","image-author-username svelte-5jjxa6"),c(w,"href",j="/user/"+i[0].author),c(o,"class","image-author svelte-5jjxa6"),c(W,"class","image-content svelte-5jjxa6"),_e(W.src,F=X+"/uploads/"+i[0].filename)||c(W,"src",F),c(W,"alt",H=i[0].title),c(R,"class","image-description svelte-5jjxa6"),c(e,"class","image-box svelte-5jjxa6")},m(A,L){U(A,e,L),z&&z.m(e,null),m(e,t),m(e,s),m(s,l),m(s,a),m(s,f),m(e,n),m(e,o),m(o,u),m(u,h),m(o,p),m(o,w),m(w,$),m(o,y),m(o,q),m(q,D),m(q,B),m(q,Q),m(e,J),m(e,W),m(e,V),m(e,R),le.m(R,null),m(e,ve),ie&&ie.m(e,null),G=!0},p(A,[L]){var ge,he;A[3]&&(((ge=A[3])==null?void 0:ge.username)===A[0].author||((he=A[3])==null?void 0:he.role)!==Ve.EDITOR)?z?(z.p(A,L),L&9&&N(z,1)):(z=Ge(A),z.c(),N(z,1),z.m(e,t)):z&&(Ie(),M(z,1,1,()=>{z=null}),je()),(!G||L&1)&&r!==(r=A[0].title+"")&&ne(f,r),(!G||L&1&&!_e(h.src,_=X+"/uploads/avatars/"+A[0].avatar))&&c(h,"src",_),(!G||L&1&&d!==(d=A[0].author))&&c(h,"alt",d),(!G||L&1&&E!==(E="/user/"+A[0].author))&&c(u,"href",E),(!G||L&1)&&v!==(v=A[0].author+"")&&ne($,v),(!G||L&1&&j!==(j="/user/"+A[0].author))&&c(w,"href",j),(!G||L&1)&&C!==(C=A[0].views+"")&&ne(D,C),(!G||L&1)&&Y!==(Y=ke(A[0].createdAt)+"")&&ne(Q,Y),(!G||L&1&&!_e(W.src,F=X+"/uploads/"+A[0].filename))&&c(W,"src",F),(!G||L&1&&H!==(H=A[0].title))&&c(W,"alt",H),de===(de=Ce(A))&&le?le.p(A,L):(le.d(1),le=de(A),le&&(le.c(),le.m(R,null))),ie&&ie.p&&(!G||L&32)&&we(ie,Ae,A,A[5],G?De(Ae,A[5],L,_t):$e(A[5]),Fe)},i(A){G||(N(z),N(ie,A),G=!0)},o(A){M(z),M(ie,A),G=!1},d(A){A&&g(e),z&&z.d(),le.d(),ie&&ie.d(A)}}}function pt(i,e,t){let{$$slots:s={},$$scope:l}=e,{image:a}=e,{user:r}=e,{visible:f}=e,{description:n}=e;async function o(){t(2,n=!1),Se(this)}const u=()=>t(1,f=!f);function h(){a.description=this.value,t(0,a)}const _=()=>t(2,n=!1);return i.$$set=d=>{"image"in d&&t(0,a=d.image),"user"in d&&t(3,r=d.user),"visible"in d&&t(1,f=d.visible),"description"in d&&t(2,n=d.description),"$$scope"in d&&t(5,l=d.$$scope)},[a,f,n,r,o,l,s,u,h,_]}class vt extends ue{constructor(e){super(),ce(this,e,pt,gt,me,{image:0,user:3,visible:1,description:2})}}function bt(i){let e,t,s,l,a,r,f;const n=i[1].default,o=Ee(n,i,i[0],null);return{c(){e=b("div"),t=b("div"),s=b("h2"),l=b("i"),a=P(`\r
			Recent Uploads`),r=T(),o&&o.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var h=I(e);t=k(h,"DIV",{class:!0});var _=I(t);s=k(_,"H2",{class:!0});var d=I(s);l=k(d,"I",{class:!0}),I(l).forEach(g),a=S(d,`\r
			Recent Uploads`),d.forEach(g),r=O(_),o&&o.l(_),_.forEach(g),h.forEach(g),this.h()},h(){c(l,"class","fa-solid fa-images title-icon"),c(s,"class","title"),c(t,"class","sidebar-container svelte-pei3k5"),c(e,"class","sidebar svelte-pei3k5")},m(u,h){U(u,e,h),m(e,t),m(t,s),m(s,l),m(s,a),m(t,r),o&&o.m(t,null),f=!0},p(u,[h]){o&&o.p&&(!f||h&1)&&we(o,n,u,u[0],f?De(n,u[0],h,null):$e(u[0]),null)},i(u){f||(N(o,u),f=!0)},o(u){M(o,u),f=!1},d(u){u&&g(e),o&&o.d(u)}}}function kt(i,e,t){let{$$slots:s={},$$scope:l}=e;return i.$$set=a=>{"$$scope"in a&&t(0,l=a.$$scope)},[l,s]}class Et extends ue{constructor(e){super(),ce(this,e,kt,bt,me,{})}}function It(i){let e,t;const s=i[1].default,l=Ee(s,i,i[0],null);return{c(){e=b("div"),l&&l.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var r=I(e);l&&l.l(r),r.forEach(g),this.h()},h(){c(e,"class","comments svelte-1n6d5p9")},m(a,r){U(a,e,r),l&&l.m(e,null),t=!0},p(a,[r]){l&&l.p&&(!t||r&1)&&we(l,s,a,a[0],t?De(s,a[0],r,null):$e(a[0]),null)},i(a){t||(N(l,a),t=!0)},o(a){M(l,a),t=!1},d(a){a&&g(e),l&&l.d(a)}}}function jt(i,e,t){let{$$slots:s={},$$scope:l}=e;return i.$$set=a=>{"$$scope"in a&&t(0,l=a.$$scope)},[l,s]}class wt extends ue{constructor(e){super(),ce(this,e,jt,It,me,{})}}function $t(i){let e,t,s,l,a,r,f,n,o,u;return{c(){e=b("div"),t=P(`Must be register to comment\r
  `),s=b("div"),l=b("a"),a=b("button"),r=P("Signin"),f=T(),n=b("a"),o=b("button"),u=P("Signup"),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=I(e);t=S(_,`Must be register to comment\r
  `),s=k(_,"DIV",{class:!0});var d=I(s);l=k(d,"A",{href:!0});var E=I(l);a=k(E,"BUTTON",{class:!0});var p=I(a);r=S(p,"Signin"),p.forEach(g),E.forEach(g),f=O(d),n=k(d,"A",{href:!0});var w=I(n);o=k(w,"BUTTON",{class:!0});var v=I(o);u=S(v,"Signup"),v.forEach(g),w.forEach(g),d.forEach(g),_.forEach(g),this.h()},h(){c(a,"class","black svelte-5jkpge"),c(l,"href","/signin"),c(o,"class","green svelte-5jkpge"),c(n,"href","/signup"),c(s,"class","svelte-5jkpge"),c(e,"class","register svelte-5jkpge")},m(h,_){U(h,e,_),m(e,t),m(e,s),m(s,l),m(l,a),m(a,r),m(s,f),m(s,n),m(n,o),m(o,u)},p:ae,i:ae,o:ae,d(h){h&&g(e)}}}class Dt extends ue{constructor(e){super(),ce(this,e,null,$t,me,{})}}function ze(i){let e,t,s,l,a,r,f,n,o,u;return{c(){e=b("span"),t=b("button"),s=P("Cancel"),l=T(),a=b("button"),r=P("Comment"),this.h()},l(h){e=k(h,"SPAN",{class:!0});var _=I(e);t=k(_,"BUTTON",{class:!0});var d=I(t);s=S(d,"Cancel"),d.forEach(g),l=O(_),a=k(_,"BUTTON",{class:!0});var E=I(a);r=S(E,"Comment"),E.forEach(g),_.forEach(g),this.h()},h(){c(t,"class","svelte-1slore9"),c(a,"class",f="blue "+(i[2].length>0?"":"disabled")+" svelte-1slore9"),a.disabled=n=!(i[2].length>0),c(e,"class","svelte-1slore9")},m(h,_){U(h,e,_),m(e,t),m(t,s),m(e,l),m(e,a),m(a,r),o||(u=K(t,"click",i[11]),o=!0)},p(h,_){_&4&&f!==(f="blue "+(h[2].length>0?"":"disabled")+" svelte-1slore9")&&c(a,"class",f),_&4&&n!==(n=!(h[2].length>0))&&(a.disabled=n)},d(h){h&&g(e),o=!1,u()}}}function Ct(i){let e,t,s,l,a,r,f,n,o,u,h,_,d,E,p=i[3]&&ze(i);return{c(){e=b("div"),t=b("h2"),s=b("i"),l=P(`\r
		Post`),a=T(),r=b("form"),f=b("img"),o=T(),u=b("input"),h=T(),p&&p.c(),this.h()},l(w){e=k(w,"DIV",{class:!0});var v=I(e);t=k(v,"H2",{class:!0});var $=I(t);s=k($,"I",{class:!0}),I(s).forEach(g),l=S($,`\r
		Post`),$.forEach(g),a=O(v),r=k(v,"FORM",{action:!0,method:!0,class:!0});var j=I(r);f=k(j,"IMG",{src:!0,alt:!0,class:!0}),o=O(j),u=k(j,"INPUT",{type:!0,name:!0,placeholder:!0,autocomplete:!0,spellcheck:!0,class:!0}),h=O(j),p&&p.l(j),j.forEach(g),v.forEach(g),this.h()},h(){c(s,"class","fa-regular fa-copy title-icon"),c(t,"class","title"),_e(f.src,n=X+"/uploads/avatars/"+i[1])||c(f,"src",n),c(f,"alt",i[0]),c(f,"class","svelte-1slore9"),c(u,"type","text"),c(u,"name","comment"),c(u,"placeholder","Send a comment..."),c(u,"autocomplete","off"),c(u,"spellcheck","false"),c(u,"class","svelte-1slore9"),c(r,"action",_=X+"/api/image/"+i[0]+"/comment"),c(r,"method","POST"),c(r,"class","svelte-1slore9"),c(e,"class","svelte-1slore9")},m(w,v){U(w,e,v),m(e,t),m(t,s),m(t,l),m(e,a),m(e,r),m(r,f),m(r,o),m(r,u),be(u,i[2]),i[9](u),m(r,h),p&&p.m(r,null),d||(E=[K(u,"input",i[8]),K(u,"focus",i[10]),K(r,"submit",pe(i[6]))],d=!0)},p(w,[v]){v&2&&!_e(f.src,n=X+"/uploads/avatars/"+w[1])&&c(f,"src",n),v&1&&c(f,"alt",w[0]),v&4&&u.value!==w[2]&&be(u,w[2]),w[3]?p?p.p(w,v):(p=ze(w),p.c(),p.m(r,null)):p&&(p.d(1),p=null),v&1&&_!==(_=X+"/api/image/"+w[0]+"/comment")&&c(r,"action",_)},i:ae,o:ae,d(w){w&&g(e),i[9](null),p&&p.d(),d=!1,Oe(E)}}}function Tt(i,e,t){let{imageId:s}=e,{avatar:l}=e,{comments:a}=e,r="",f=!1,n;const o=p=>{t(2,r=""),n.blur(),t(3,f=p)};async function u(){const p=await Se(this);p.comment&&t(7,a=[p.comment,...a]),o(!1)}function h(){r=this.value,t(2,r)}function _(p){Z[p?"unshift":"push"](()=>{n=p,t(4,n)})}const d=()=>t(3,f=!0),E=()=>o(!1);return i.$$set=p=>{"imageId"in p&&t(0,s=p.imageId),"avatar"in p&&t(1,l=p.avatar),"comments"in p&&t(7,a=p.comments)},[s,l,r,f,n,o,u,a,h,_,d,E]}class Ot extends ue{constructor(e){super(),ce(this,e,Tt,Ct,me,{imageId:0,avatar:1,comments:7})}}function Xe(i){let e,t;const s=i[2].default,l=Ee(s,i,i[1],null);return{c(){e=b("div"),l&&l.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var r=I(e);l&&l.l(r),r.forEach(g),this.h()},h(){c(e,"class","comments-list svelte-1y2cz3c")},m(a,r){U(a,e,r),l&&l.m(e,null),t=!0},p(a,r){l&&l.p&&(!t||r&2)&&we(l,s,a,a[1],t?De(s,a[1],r,null):$e(a[1]),null)},i(a){t||(N(l,a),t=!0)},o(a){M(l,a),t=!1},d(a){a&&g(e),l&&l.d(a)}}}function yt(i){let e,t,s,l,a,r,f,n,o=i[0]>0&&Xe(i);return{c(){e=b("div"),t=b("h2"),s=b("i"),l=T(),a=P(i[0]),r=P(" Comments"),f=T(),o&&o.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var h=I(e);t=k(h,"H2",{class:!0});var _=I(t);s=k(_,"I",{class:!0}),I(s).forEach(g),l=O(_),a=S(_,i[0]),r=S(_," Comments"),_.forEach(g),f=O(h),o&&o.l(h),h.forEach(g),this.h()},h(){c(s,"class","fa-solid fa-message title-icon"),c(t,"class","title"),c(e,"class","comments-container svelte-1y2cz3c")},m(u,h){U(u,e,h),m(e,t),m(t,s),m(t,l),m(t,a),m(t,r),m(e,f),o&&o.m(e,null),n=!0},p(u,[h]){(!n||h&1)&&ne(a,u[0]),u[0]>0?o?(o.p(u,h),h&1&&N(o,1)):(o=Xe(u),o.c(),N(o,1),o.m(e,null)):o&&(Ie(),M(o,1,1,()=>{o=null}),je())},i(u){n||(N(o),n=!0)},o(u){M(o),n=!1},d(u){u&&g(e),o&&o.d()}}}function Vt(i,e,t){let{$$slots:s={},$$scope:l}=e,{totalComments:a}=e;return i.$$set=r=>{"totalComments"in r&&t(0,a=r.totalComments),"$$scope"in r&&t(1,l=r.$$scope)},[a,l,s]}class At extends ue{constructor(e){super(),ce(this,e,Vt,yt,me,{totalComments:0})}}function Je(i){let e,t;return{c(){e=b("p"),t=P("(edit)"),this.h()},l(s){e=k(s,"P",{class:!0});var l=I(e);t=S(l,"(edit)"),l.forEach(g),this.h()},h(){c(e,"class","grey svelte-3y2i6b")},m(s,l){U(s,e,l),m(e,t)},d(s){s&&g(e)}}}function Nt(i){let e,t=i[0].comment+"",s;return{c(){e=b("div"),s=P(t),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=I(e);s=S(a,t),a.forEach(g),this.h()},h(){c(e,"class","comment-content svelte-3y2i6b")},m(l,a){U(l,e,a),m(e,s)},p(l,a){a&1&&t!==(t=l[0].comment+"")&&ne(s,t)},d(l){l&&g(e)}}}function Pt(i){let e,t,s,l,a,r,f,n,o,u,h,_,d,E,p;return{c(){e=b("form"),t=b("input"),s=T(),l=b("button"),a=b("i"),r=P(`\r
				Cancel`),f=T(),n=b("button"),o=b("i"),u=P(`\r
				Done`),this.h()},l(w){e=k(w,"FORM",{class:!0,action:!0,method:!0});var v=I(e);t=k(v,"INPUT",{type:!0,name:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),s=O(v),l=k(v,"BUTTON",{class:!0});var $=I(l);a=k($,"I",{class:!0}),I(a).forEach(g),r=S($,`\r
				Cancel`),$.forEach(g),f=O(v),n=k(v,"BUTTON",{class:!0});var j=I(n);o=k(j,"I",{class:!0}),I(o).forEach(g),u=S(j,`\r
				Done`),j.forEach(g),v.forEach(g),this.h()},h(){c(t,"type","text"),c(t,"name","comment"),c(t,"spellcheck","false"),c(t,"autocomplete","off"),c(t,"maxlength","4200"),c(t,"class","svelte-3y2i6b"),c(a,"class","fa-solid fa-cancel svelte-3y2i6b"),c(l,"class","red svelte-3y2i6b"),c(o,"class","fa-solid fa-check svelte-3y2i6b"),c(n,"class",h=Le(i[5].length>0?"":"disabled")+" svelte-3y2i6b"),n.disabled=_=!(i[5].length>0),c(e,"class","comment-form svelte-3y2i6b"),c(e,"action",d=X+"/api/comment/"+i[0].id+"/edit"),c(e,"method","POST")},m(w,v){U(w,e,v),m(e,t),be(t,i[5]),i[14](t),m(e,s),m(e,l),m(l,a),m(l,r),m(e,f),m(e,n),m(n,o),m(n,u),E||(p=[K(t,"input",i[13]),K(l,"click",pe(i[7])),K(e,"submit",pe(i[8]))],E=!0)},p(w,v){v&32&&t.value!==w[5]&&be(t,w[5]),v&32&&h!==(h=Le(w[5].length>0?"":"disabled")+" svelte-3y2i6b")&&c(n,"class",h),v&32&&_!==(_=!(w[5].length>0))&&(n.disabled=_),v&1&&d!==(d=X+"/api/comment/"+w[0].id+"/edit")&&c(e,"action",d)},d(w){w&&g(e),i[14](null),E=!1,Oe(p)}}}function Ke(i){let e,t,s,l,a,r,f=i[3]&&Qe(i);return{c(){e=b("button"),t=b("i"),s=T(),f&&f.c(),l=fe(),this.h()},l(n){e=k(n,"BUTTON",{class:!0});var o=I(e);t=k(o,"I",{class:!0}),I(t).forEach(g),o.forEach(g),s=O(n),f&&f.l(n),l=fe(),this.h()},h(){c(t,"class","fa-solid fa-ellipsis-vertical fa-lg svelte-3y2i6b"),c(e,"class","comment-button svelte-3y2i6b")},m(n,o){U(n,e,o),m(e,t),U(n,s,o),f&&f.m(n,o),U(n,l,o),a||(r=K(e,"click",i[15]),a=!0)},p(n,o){n[3]?f?f.p(n,o):(f=Qe(n),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null)},d(n){n&&g(e),n&&g(s),f&&f.d(n),n&&g(l),a=!1,r()}}}function Qe(i){let e,t,s,l,a,r,f,n=i[1].username===i[0].author&&We(i);return{c(){e=b("ul"),n&&n.c(),t=T(),s=b("li"),l=b("i"),a=P(`\r
					Delete`),this.h()},l(o){e=k(o,"UL",{class:!0});var u=I(e);n&&n.l(u),t=O(u),s=k(u,"LI",{class:!0});var h=I(s);l=k(h,"I",{class:!0}),I(l).forEach(g),a=S(h,`\r
					Delete`),h.forEach(g),u.forEach(g),this.h()},h(){c(l,"class","fa-solid fa-square-minus svelte-3y2i6b"),c(s,"class","svelte-3y2i6b"),c(e,"class","svelte-3y2i6b")},m(o,u){U(o,e,u),n&&n.m(e,null),m(e,t),m(e,s),m(s,l),m(s,a),r||(f=[K(s,"mousedown",i[9]),lt(it.call(null,e)),K(e,"outclick",i[16])],r=!0)},p(o,u){o[1].username===o[0].author?n?n.p(o,u):(n=We(o),n.c(),n.m(e,t)):n&&(n.d(1),n=null)},d(o){o&&g(e),n&&n.d(),r=!1,Oe(f)}}}function We(i){let e,t,s,l,a;return{c(){e=b("li"),t=b("i"),s=P(`\r
						Edit`),this.h()},l(r){e=k(r,"LI",{class:!0});var f=I(e);t=k(f,"I",{class:!0}),I(t).forEach(g),s=S(f,`\r
						Edit`),f.forEach(g),this.h()},h(){c(t,"class","fa-solid fa-pen svelte-3y2i6b"),c(e,"class","svelte-3y2i6b")},m(r,f){U(r,e,f),m(e,t),m(e,s),l||(a=K(e,"mousedown",i[6]),l=!0)},p:ae,d(r){r&&g(e),l=!1,a()}}}function St(i){let e,t,s,l,a,r,f,n,o,u=i[0].author+"",h,_,d,E,p=ke(i[0].createdAt)+"",w,v,$,j,y,q,C,D,B=i[0].edit&&Je();function Y(V,R){return V[4]?Pt:Nt}let Q=Y(i),J=Q(i);const W=i[12].default,F=Ee(W,i,i[11],null);let H=i[1]&&(i[1].username===i[0].author||i[1].username===i[0].receiver||i[1].role!==Ve.EDITOR)&&Ke(i);return{c(){e=b("div"),t=b("a"),s=b("img"),f=T(),n=b("div"),o=b("a"),h=P(u),d=P(`\r
		●\r
		`),E=b("p"),w=P(p),v=T(),B&&B.c(),$=T(),J.c(),j=T(),y=b("div"),F&&F.c(),q=T(),C=b("div"),H&&H.c(),this.h()},l(V){e=k(V,"DIV",{class:!0});var R=I(e);t=k(R,"A",{class:!0,href:!0});var ve=I(t);s=k(ve,"IMG",{src:!0,alt:!0,class:!0}),ve.forEach(g),f=O(R),n=k(R,"DIV",{class:!0});var G=I(n);o=k(G,"A",{href:!0,class:!0});var z=I(o);h=S(z,u),z.forEach(g),d=S(G,`\r
		●\r
		`),E=k(G,"P",{});var Ce=I(E);w=S(Ce,p),Ce.forEach(g),v=O(G),B&&B.l(G),G.forEach(g),$=O(R),J.l(R),j=O(R),y=k(R,"DIV",{class:!0});var de=I(y);F&&F.l(de),de.forEach(g),q=O(R),C=k(R,"DIV",{class:!0});var le=I(C);H&&H.l(le),le.forEach(g),R.forEach(g),this.h()},h(){_e(s.src,l=X+"/uploads/avatars/"+i[0].avatar)||c(s,"src",l),c(s,"alt",a=i[0].author),c(s,"class","svelte-3y2i6b"),c(t,"class","comment-avatar svelte-3y2i6b"),c(t,"href",r="/user/"+i[0].author),c(o,"href",_="/user/"+i[0].author),c(o,"class","svelte-3y2i6b"),c(n,"class","comment-author svelte-3y2i6b"),c(y,"class","svelte-3y2i6b"),c(C,"class","comment-options svelte-3y2i6b"),c(e,"class","comment svelte-3y2i6b")},m(V,R){U(V,e,R),m(e,t),m(t,s),m(e,f),m(e,n),m(n,o),m(o,h),m(n,d),m(n,E),m(E,w),m(n,v),B&&B.m(n,null),m(e,$),J.m(e,null),m(e,j),m(e,y),F&&F.m(y,null),m(e,q),m(e,C),H&&H.m(C,null),D=!0},p(V,[R]){(!D||R&1&&!_e(s.src,l=X+"/uploads/avatars/"+V[0].avatar))&&c(s,"src",l),(!D||R&1&&a!==(a=V[0].author))&&c(s,"alt",a),(!D||R&1&&r!==(r="/user/"+V[0].author))&&c(t,"href",r),(!D||R&1)&&u!==(u=V[0].author+"")&&ne(h,u),(!D||R&1&&_!==(_="/user/"+V[0].author))&&c(o,"href",_),(!D||R&1)&&p!==(p=ke(V[0].createdAt)+"")&&ne(w,p),V[0].edit?B||(B=Je(),B.c(),B.m(n,null)):B&&(B.d(1),B=null),Q===(Q=Y(V))&&J?J.p(V,R):(J.d(1),J=Q(V),J&&(J.c(),J.m(e,j))),F&&F.p&&(!D||R&2048)&&we(F,W,V,V[11],D?De(W,V[11],R,null):$e(V[11]),null),V[1]&&(V[1].username===V[0].author||V[1].username===V[0].receiver||V[1].role!==Ve.EDITOR)?H?H.p(V,R):(H=Ke(V),H.c(),H.m(C,null)):H&&(H.d(1),H=null)},i(V){D||(N(F,V),D=!0)},o(V){M(F,V),D=!1},d(V){V&&g(e),B&&B.d(),J.d(),F&&F.d(V),H&&H.d()}}}function Ut(i,e,t){let{$$slots:s={},$$scope:l}=e,{comment:a}=e,{comments:r}=e,{user:f}=e,n,o=!1,u=!1,h=a.comment;async function _(){t(4,u=!0),t(3,o=!1),n.focus()}async function d(){t(4,u=!1),t(5,h=a.comment),n.blur()}async function E(){t(4,u=!1),t(0,a.edit=!0,a),t(0,a.comment=h,a),Se(this)}async function p(){t(3,o=!1),t(10,r=r.filter(({id:y})=>y!==a.id)),await Pe({method:"DELETE",url:`${X}/api/comment/${a.id}`,withCredentials:!0})}function w(){h=this.value,t(5,h)}function v(y){Z[y?"unshift":"push"](()=>{n=y,t(2,n)})}const $=()=>t(3,o=!o),j=()=>t(3,o=!1);return i.$$set=y=>{"comment"in y&&t(0,a=y.comment),"comments"in y&&t(10,r=y.comments),"user"in y&&t(1,f=y.user),"$$scope"in y&&t(11,l=y.$$scope)},[a,f,n,o,u,h,_,d,E,p,r,l,s,w,v,$,j]}class Bt extends ue{constructor(e){super(),ce(this,e,Ut,St,me,{comment:0,comments:10,user:1})}}function Rt(i){let e,t,s,l,a,r,f=i[0].title+"",n,o,u,h=i[0].author+"",_,d,E,p=i[0].views+"",w,v,$=ke(i[0].createdAt)+"",j,y,q;return{c(){e=b("a"),t=b("img"),a=T(),r=b("h2"),n=P(f),o=T(),u=b("p"),_=P(h),d=T(),E=b("div"),w=P(p),v=P(" views ● "),j=P($),this.h()},l(C){e=k(C,"A",{href:!0,title:!0,class:!0});var D=I(e);t=k(D,"IMG",{src:!0,alt:!0,class:!0}),a=O(D),r=k(D,"H2",{class:!0});var B=I(r);n=S(B,f),B.forEach(g),o=O(D),u=k(D,"P",{class:!0});var Y=I(u);_=S(Y,h),Y.forEach(g),d=O(D),E=k(D,"DIV",{class:!0});var Q=I(E);w=S(Q,p),v=S(Q," views ● "),j=S(Q,$),Q.forEach(g),D.forEach(g),this.h()},h(){_e(t.src,s=X+"/uploads/"+i[0].filename)||c(t,"src",s),c(t,"alt",l=i[0].title),c(t,"class","svelte-18hblro"),c(r,"class","svelte-18hblro"),c(u,"class","svelte-18hblro"),c(E,"class","svelte-18hblro"),c(e,"href",y="/gallery/"+i[0].id),c(e,"title",q=i[0].title),c(e,"class","svelte-18hblro")},m(C,D){U(C,e,D),m(e,t),m(e,a),m(e,r),m(r,n),m(e,o),m(e,u),m(u,_),m(e,d),m(e,E),m(E,w),m(E,v),m(E,j)},p(C,[D]){D&1&&!_e(t.src,s=X+"/uploads/"+C[0].filename)&&c(t,"src",s),D&1&&l!==(l=C[0].title)&&c(t,"alt",l),D&1&&f!==(f=C[0].title+"")&&ne(n,f),D&1&&h!==(h=C[0].author+"")&&ne(_,h),D&1&&p!==(p=C[0].views+"")&&ne(w,p),D&1&&$!==($=ke(C[0].createdAt)+"")&&ne(j,$),D&1&&y!==(y="/gallery/"+C[0].id)&&c(e,"href",y),D&1&&q!==(q=C[0].title)&&c(e,"title",q)},i:ae,o:ae,d(C){C&&g(e)}}}function Mt(i,e,t){let{image:s}=e;return i.$$set=l=>{"image"in l&&t(0,s=l.image)},[s]}class qt extends ue{constructor(e){super(),ce(this,e,Mt,Rt,me,{image:0})}}function Lt(i){let e;return{c(){e=b("i"),this.h()},l(t){e=k(t,"I",{class:!0}),I(e).forEach(g),this.h()},h(){c(e,"class","fa-solid fa-eye-slash")},m(t,s){U(t,e,s)},d(t){t&&g(e)}}}function Ht(i){let e;return{c(){e=b("i"),this.h()},l(t){e=k(t,"I",{class:!0}),I(e).forEach(g),this.h()},h(){c(e,"class","fa-solid fa-eye")},m(t,s){U(t,e,s)},d(t){t&&g(e)}}}function Ft(i){let e,t,s,l,a,r,f,n,o,u,h,_,d,E,p,w,v,$,j;function y(D,B){return D[0].isPublic?Ht:Lt}let q=y(i),C=q(i);return{c(){e=b("ul"),t=b("a"),s=b("li"),l=P("Edit"),a=T(),r=b("i"),f=T(),n=b("a"),o=b("li"),u=P("Public"),h=T(),C.c(),_=T(),d=b("a"),E=b("li"),p=P("Delete"),w=T(),v=b("i"),this.h()},l(D){e=k(D,"UL",{class:!0});var B=I(e);t=k(B,"A",{href:!0,class:!0});var Y=I(t);s=k(Y,"LI",{});var Q=I(s);l=S(Q,"Edit"),Q.forEach(g),a=O(Y),r=k(Y,"I",{class:!0}),I(r).forEach(g),Y.forEach(g),f=O(B),n=k(B,"A",{href:!0,class:!0});var J=I(n);o=k(J,"LI",{});var W=I(o);u=S(W,"Public"),W.forEach(g),h=O(J),C.l(J),J.forEach(g),_=O(B),d=k(B,"A",{href:!0,class:!0});var F=I(d);E=k(F,"LI",{});var H=I(E);p=S(H,"Delete"),H.forEach(g),w=O(F),v=k(F,"I",{class:!0}),I(v).forEach(g),F.forEach(g),B.forEach(g),this.h()},h(){c(r,"class","fa-solid fa-pen"),c(t,"href","#edit"),c(t,"class","svelte-1jhluf3"),c(n,"href","#placeholder"),c(n,"class","svelte-1jhluf3"),c(v,"class","fa-solid fa-delete-left"),c(d,"href","#placeholder"),c(d,"class","svelte-1jhluf3"),c(e,"class","svelte-1jhluf3")},m(D,B){U(D,e,B),m(e,t),m(t,s),m(s,l),m(t,a),m(t,r),m(e,f),m(e,n),m(n,o),m(o,u),m(n,h),C.m(n,null),m(e,_),m(e,d),m(d,E),m(E,p),m(d,w),m(d,v),$||(j=[K(t,"click",i[2]),K(n,"click",pe(i[3])),K(d,"click",pe(i[4])),lt(it.call(null,e)),K(e,"outclick",i[6])],$=!0)},p(D,[B]){q!==(q=y(D))&&(C.d(1),C=q(D),C&&(C.c(),C.m(n,null)))},i:ae,o:ae,d(D){D&&g(e),C.d(),$=!1,Oe(j)}}}function Gt(i,e,t){let{image:s}=e,{visible:l}=e,{description:a}=e;const r=()=>{t(1,l=!1),t(5,a=!0)},f=async()=>{t(1,l=!1),await Pe({method:"POST",url:`${X}/api/image/${s.id}/public`,withCredentials:!0}),t(0,s.isPublic=!s.isPublic,s)},n=async()=>{t(1,l=!1),await Pe({method:"DELETE",url:`${X}/api/image/${s.id}`,withCredentials:!0}),window.location.href="/"},o=()=>t(1,l=!1);return i.$$set=u=>{"image"in u&&t(0,s=u.image),"visible"in u&&t(1,l=u.visible),"description"in u&&t(5,a=u.description)},[s,l,r,f,n,a,o]}class zt extends ue{constructor(e){super(),ce(this,e,Gt,Ft,me,{image:0,visible:1,description:5})}}function Ne(i){return i.favorites!==void 0}function Ye(i){return i.comment!==void 0}function Xt(i){let e,t,s,l,a,r,f;return{c(){e=b("div"),t=b("i"),l=T(),a=P(i[3]),this.h()},l(n){e=k(n,"DIV",{class:!0});var o=I(e);t=k(o,"I",{class:!0}),I(t).forEach(g),l=O(o),a=S(o,i[3]),o.forEach(g),this.h()},h(){c(t,"class",s="fa-solid "+i[4]()+" "+(i[1]?i[2]:"")+" svelte-xdj7pf"),c(e,"class","svelte-xdj7pf")},m(n,o){U(n,e,o),m(e,t),m(e,l),m(e,a),r||(f=K(t,"mousedown",function(){ot(i[0]==="fav"?i[6]:i[5])&&(i[0]==="fav"?i[6]:i[5]).apply(this,arguments)}),r=!0)},p(n,[o]){i=n,o&6&&s!==(s="fa-solid "+i[4]()+" "+(i[1]?i[2]:"")+" svelte-xdj7pf")&&c(t,"class",s),o&8&&ne(a,i[3])},i:ae,o:ae,d(n){n&&g(e),r=!1,f()}}}function Jt(i,e,t){let{user:s}=e,{object:l}=e,{id:a="like"}=e,r=u(),f=h(),n=_();function o(){return a==="like"?"fa-thumbs-up":a==="dislike"?"fa-thumbs-down":"fa-star"}function u(){return Ne(l)&&a==="fav"?l.favorites.includes(s==null?void 0:s.username):a==="like"?l.likes.includes(s==null?void 0:s.username):l.dislikes.includes(s==null?void 0:s.username)}function h(){return Ye(l)?"grey":"selected"}function _(){return Ne(l)&&a==="fav"?l.favorites.length:a==="like"?l.likes.length:l.dislikes.length}async function d(){if(s){let p="image";Ye(l)&&(p="comment");const w=`${X}/api/${p}/${l.id}/like`,{likes:v,dislikes:$}=await He(w,a);t(7,l.likes=v,l),t(7,l.dislikes=$,l)}}async function E(){if(s&&Ne(l)){const p=`${X}/api/image/${l.id}/favorite`,{favorites:w}=await He(p,a);w&&t(7,l.favorites=w,l)}}return rt(()=>{t(1,r=u()),t(2,f=h()),t(3,n=_())}),i.$$set=p=>{"user"in p&&t(8,s=p.user),"object"in p&&t(7,l=p.object),"id"in p&&t(0,a=p.id)},[a,r,f,n,o,d,E,l,s]}class Te extends ue{constructor(e){super(),ce(this,e,Jt,Xt,me,{user:8,object:7,id:0})}}function Ze(i,e,t){const s=i.slice();return s[16]=e[t],s[17]=e,s[18]=t,s}function xe(i,e,t){const s=i.slice();return s[19]=e[t],s}function et(i){let e,t,s,l,a;function r(u){i[6](u)}function f(u){i[7](u)}function n(u){i[8](u)}let o={};return i[0].image!==void 0&&(o.image=i[0].image),i[1]!==void 0&&(o.visible=i[1]),i[2]!==void 0&&(o.description=i[2]),e=new zt({props:o}),Z.push(()=>oe(e,"image",r)),Z.push(()=>oe(e,"visible",f)),Z.push(()=>oe(e,"description",n)),{c(){x(e.$$.fragment)},l(u){ee(e.$$.fragment,u)},m(u,h){te(e,u,h),a=!0},p(u,h){const _={};!t&&h&1&&(t=!0,_.image=u[0].image,re(()=>t=!1)),!s&&h&2&&(s=!0,_.visible=u[1],re(()=>s=!1)),!l&&h&4&&(l=!0,_.description=u[2],re(()=>l=!1)),e.$set(_)},i(u){a||(N(e.$$.fragment,u),a=!0)},o(u){M(e.$$.fragment,u),a=!1},d(u){se(e,u)}}}function Kt(i){let e,t,s=i[1]&&et(i);return{c(){s&&s.c(),e=fe()},l(l){s&&s.l(l),e=fe()},m(l,a){s&&s.m(l,a),U(l,e,a),t=!0},p(l,a){l[1]?s?(s.p(l,a),a&2&&N(s,1)):(s=et(l),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(Ie(),M(s,1,1,()=>{s=null}),je())},i(l){t||(N(s),t=!0)},o(l){M(s),t=!1},d(l){s&&s.d(l),l&&g(e)}}}function Qt(i){let e,t,s,l,a,r,f,n,o,u;function h(v){i[3](v)}let _={user:i[0].user};i[0].image!==void 0&&(_.object=i[0].image),t=new Te({props:_}),Z.push(()=>oe(t,"object",h));function d(v){i[4](v)}let E={user:i[0].user,id:"dislike"};i[0].image!==void 0&&(E.object=i[0].image),a=new Te({props:E}),Z.push(()=>oe(a,"object",d));function p(v){i[5](v)}let w={user:i[0].user,id:"fav"};return i[0].image!==void 0&&(w.object=i[0].image),n=new Te({props:w}),Z.push(()=>oe(n,"object",p)),{c(){e=b("div"),x(t.$$.fragment),l=T(),x(a.$$.fragment),f=T(),x(n.$$.fragment),this.h()},l(v){e=k(v,"DIV",{class:!0,slot:!0});var $=I(e);ee(t.$$.fragment,$),l=O($),ee(a.$$.fragment,$),f=O($),ee(n.$$.fragment,$),$.forEach(g),this.h()},h(){c(e,"class","image-stats svelte-2mhczw"),c(e,"slot","assessment")},m(v,$){U(v,e,$),te(t,e,null),m(e,l),te(a,e,null),m(e,f),te(n,e,null),u=!0},p(v,$){const j={};$&1&&(j.user=v[0].user),!s&&$&1&&(s=!0,j.object=v[0].image,re(()=>s=!1)),t.$set(j);const y={};$&1&&(y.user=v[0].user),!r&&$&1&&(r=!0,y.object=v[0].image,re(()=>r=!1)),a.$set(y);const q={};$&1&&(q.user=v[0].user),!o&&$&1&&(o=!0,q.object=v[0].image,re(()=>o=!1)),n.$set(q)},i(v){u||(N(t.$$.fragment,v),N(a.$$.fragment,v),N(n.$$.fragment,v),u=!0)},o(v){M(t.$$.fragment,v),M(a.$$.fragment,v),M(n.$$.fragment,v),u=!1},d(v){v&&g(e),se(t),se(a),se(n)}}}function tt(i){let e,t;return e=new qt({props:{image:i[19]}}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,l){te(e,s,l),t=!0},p(s,l){const a={};l&1&&(a.image=s[19]),e.$set(a)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Wt(i){let e,t,s=i[0].sidebar,l=[];for(let r=0;r<s.length;r+=1)l[r]=tt(xe(i,s,r));const a=r=>M(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=fe()},l(r){for(let f=0;f<l.length;f+=1)l[f].l(r);e=fe()},m(r,f){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(r,f);U(r,e,f),t=!0},p(r,f){if(f&1){s=r[0].sidebar;let n;for(n=0;n<s.length;n+=1){const o=xe(r,s,n);l[n]?(l[n].p(o,f),N(l[n],1)):(l[n]=tt(o),l[n].c(),N(l[n],1),l[n].m(e.parentNode,e))}for(Ie(),n=s.length;n<l.length;n+=1)a(n);je()}},i(r){if(!t){for(let f=0;f<s.length;f+=1)N(l[f]);t=!0}},o(r){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)M(l[f]);t=!1},d(r){ft(l,r),r&&g(e)}}}function Yt(i){let e,t;return e=new mt({props:{className:"image-sidebar",$$slots:{default:[Wt]},$$scope:{ctx:i}}}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,l){te(e,s,l),t=!0},p(s,l){const a={};l&4194305&&(a.$$scope={dirty:l,ctx:s}),e.$set(a)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Zt(i){let e,t;return e=new Dt({}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,l){te(e,s,l),t=!0},p:ae,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function xt(i){let e,t,s;function l(r){i[11](r)}let a={imageId:i[0].image.id,avatar:i[0].user.avatar};return i[0].comments!==void 0&&(a.comments=i[0].comments),e=new Ot({props:a}),Z.push(()=>oe(e,"comments",l)),{c(){x(e.$$.fragment)},l(r){ee(e.$$.fragment,r)},m(r,f){te(e,r,f),s=!0},p(r,f){const n={};f&1&&(n.imageId=r[0].image.id),f&1&&(n.avatar=r[0].user.avatar),!t&&f&1&&(t=!0,n.comments=r[0].comments,re(()=>t=!1)),e.$set(n)},i(r){s||(N(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){se(e,r)}}}function es(i){let e,t,s,l,a,r,f;function n(_){i[12](_,i[16],i[17],i[18])}let o={user:i[0].user};i[16]!==void 0&&(o.object=i[16]),e=new Te({props:o}),Z.push(()=>oe(e,"object",n));function u(_){i[13](_,i[16],i[17],i[18])}let h={user:i[0].user,id:"dislike"};return i[16]!==void 0&&(h.object=i[16]),l=new Te({props:h}),Z.push(()=>oe(l,"object",u)),{c(){x(e.$$.fragment),s=T(),x(l.$$.fragment),r=T()},l(_){ee(e.$$.fragment,_),s=O(_),ee(l.$$.fragment,_),r=O(_)},m(_,d){te(e,_,d),U(_,s,d),te(l,_,d),U(_,r,d),f=!0},p(_,d){i=_;const E={};d&1&&(E.user=i[0].user),!t&&d&1&&(t=!0,E.object=i[16],re(()=>t=!1)),e.$set(E);const p={};d&1&&(p.user=i[0].user),!a&&d&1&&(a=!0,p.object=i[16],re(()=>a=!1)),l.$set(p)},i(_){f||(N(e.$$.fragment,_),N(l.$$.fragment,_),f=!0)},o(_){M(e.$$.fragment,_),M(l.$$.fragment,_),f=!1},d(_){se(e,_),_&&g(s),se(l,_),_&&g(r)}}}function st(i,e){let t,s,l,a,r;function f(u){e[14](u)}function n(u){e[15](u,e[16],e[17],e[18])}let o={user:e[0].user,$$slots:{default:[es]},$$scope:{ctx:e}};return e[0].comments!==void 0&&(o.comments=e[0].comments),e[16]!==void 0&&(o.comment=e[16]),s=new Bt({props:o}),Z.push(()=>oe(s,"comments",f)),Z.push(()=>oe(s,"comment",n)),{key:i,first:null,c(){t=fe(),x(s.$$.fragment),this.h()},l(u){t=fe(),ee(s.$$.fragment,u),this.h()},h(){this.first=t},m(u,h){U(u,t,h),te(s,u,h),r=!0},p(u,h){e=u;const _={};h&1&&(_.user=e[0].user),h&4194305&&(_.$$scope={dirty:h,ctx:e}),!l&&h&1&&(l=!0,_.comments=e[0].comments,re(()=>l=!1)),!a&&h&1&&(a=!0,_.comment=e[16],re(()=>a=!1)),s.$set(_)},i(u){r||(N(s.$$.fragment,u),r=!0)},o(u){M(s.$$.fragment,u),r=!1},d(u){u&&g(t),se(s,u)}}}function ts(i){let e=[],t=new Map,s,l,a=i[0].comments;const r=f=>f[16].id;for(let f=0;f<a.length;f+=1){let n=Ze(i,a,f),o=r(n);t.set(o,e[f]=st(o,n))}return{c(){for(let f=0;f<e.length;f+=1)e[f].c();s=fe()},l(f){for(let n=0;n<e.length;n+=1)e[n].l(f);s=fe()},m(f,n){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(f,n);U(f,s,n),l=!0},p(f,n){n&1&&(a=f[0].comments,Ie(),e=ut(e,n,r,1,f,a,t,s.parentNode,ct,st,s,Ze),je())},i(f){if(!l){for(let n=0;n<a.length;n+=1)N(e[n]);l=!0}},o(f){for(let n=0;n<e.length;n+=1)M(e[n]);l=!1},d(f){for(let n=0;n<e.length;n+=1)e[n].d(f);f&&g(s)}}}function ss(i){let e,t,s,l,a;const r=[xt,Zt],f=[];function n(o,u){return o[0].user?0:1}return e=n(i),t=f[e]=r[e](i),l=new At({props:{totalComments:i[0].comments.length,$$slots:{default:[ts]},$$scope:{ctx:i}}}),{c(){t.c(),s=T(),x(l.$$.fragment)},l(o){t.l(o),s=O(o),ee(l.$$.fragment,o)},m(o,u){f[e].m(o,u),U(o,s,u),te(l,o,u),a=!0},p(o,u){let h=e;e=n(o),e===h?f[e].p(o,u):(Ie(),M(f[h],1,1,()=>{f[h]=null}),je(),t=f[e],t?t.p(o,u):(t=f[e]=r[e](o),t.c()),N(t,1),t.m(s.parentNode,s));const _={};u&1&&(_.totalComments=o[0].comments.length),u&4194305&&(_.$$scope={dirty:u,ctx:o}),l.$set(_)},i(o){a||(N(t),N(l.$$.fragment,o),a=!0)},o(o){M(t),M(l.$$.fragment,o),a=!1},d(o){f[e].d(o),o&&g(s),se(l,o)}}}function ls(i){let e,t,s,l,a,r,f,n,o;function u(d){i[9](d)}function h(d){i[10](d)}let _={image:i[0].image,user:i[0].user,$$slots:{assessment:[Qt],default:[Kt]},$$scope:{ctx:i}};return i[1]!==void 0&&(_.visible=i[1]),i[2]!==void 0&&(_.description=i[2]),t=new vt({props:_}),Z.push(()=>oe(t,"visible",u)),Z.push(()=>oe(t,"description",h)),r=new Et({props:{$$slots:{default:[Yt]},$$scope:{ctx:i}}}),n=new wt({props:{$$slots:{default:[ss]},$$scope:{ctx:i}}}),{c(){e=b("div"),x(t.$$.fragment),a=T(),x(r.$$.fragment),f=T(),x(n.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0});var E=I(e);ee(t.$$.fragment,E),a=O(E),ee(r.$$.fragment,E),f=O(E),ee(n.$$.fragment,E),E.forEach(g),this.h()},h(){c(e,"class","image-container svelte-2mhczw")},m(d,E){U(d,e,E),te(t,e,null),m(e,a),te(r,e,null),m(e,f),te(n,e,null),o=!0},p(d,[E]){const p={};E&1&&(p.image=d[0].image),E&1&&(p.user=d[0].user),E&4194311&&(p.$$scope={dirty:E,ctx:d}),!s&&E&2&&(s=!0,p.visible=d[1],re(()=>s=!1)),!l&&E&4&&(l=!0,p.description=d[2],re(()=>l=!1)),t.$set(p);const w={};E&4194305&&(w.$$scope={dirty:E,ctx:d}),r.$set(w);const v={};E&4194305&&(v.$$scope={dirty:E,ctx:d}),n.$set(v)},i(d){o||(N(t.$$.fragment,d),N(r.$$.fragment,d),N(n.$$.fragment,d),o=!0)},o(d){M(t.$$.fragment,d),M(r.$$.fragment,d),M(n.$$.fragment,d),o=!1},d(d){d&&g(e),se(t),se(r),se(n)}}}function is(i,e,t){let{data:s}=e,l=!1,a=!1;function r(j){i.$$.not_equal(s.image,j)&&(s.image=j,t(0,s))}function f(j){i.$$.not_equal(s.image,j)&&(s.image=j,t(0,s))}function n(j){i.$$.not_equal(s.image,j)&&(s.image=j,t(0,s))}function o(j){i.$$.not_equal(s.image,j)&&(s.image=j,t(0,s))}function u(j){l=j,t(1,l)}function h(j){a=j,t(2,a)}function _(j){l=j,t(1,l)}function d(j){a=j,t(2,a)}function E(j){i.$$.not_equal(s.comments,j)&&(s.comments=j,t(0,s))}function p(j,y,q,C){q[C]=j,t(0,s)}function w(j,y,q,C){q[C]=j,t(0,s)}function v(j){i.$$.not_equal(s.comments,j)&&(s.comments=j,t(0,s))}function $(j,y,q,C){q[C]=j,t(0,s)}return i.$$set=j=>{"data"in j&&t(0,s=j.data)},[s,l,a,r,f,n,o,u,h,_,d,E,p,w,v,$]}class _s extends ue{constructor(e){super(),ce(this,e,is,ls,me,{data:0})}}export{_s as default};
