import{S as q,i as A,s as T,y as $,z as p,A as h,g as u,d as m,B as d,w as z,Y as C,a as E,c as F,b,Z as O,h as k,e as v,v as S,f as U,$ as P}from"../chunks/index.d4184e2c.js";import{B as R}from"../chunks/BoxGallery.d2547153.js";import{G as V}from"../chunks/Gallery.53b577ed.js";import{I as Y}from"../chunks/Image.45cedcfe.js";import{N as Z}from"../chunks/NavUser.40852bcd.js";function B(f,a,r){const e=f.slice();return e[2]=a[r],e}function G(f){let a,r,e=f[0].favorites,t=[];for(let n=0;n<e.length;n+=1)t[n]=I(B(f,e,n));const s=n=>m(t[n],1,1,()=>{t[n]=null});return{c(){for(let n=0;n<t.length;n+=1)t[n].c();a=v()},l(n){for(let i=0;i<t.length;i+=1)t[i].l(n);a=v()},m(n,i){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,i);b(n,a,i),r=!0},p(n,i){if(i&1){e=n[0].favorites;let o;for(o=0;o<e.length;o+=1){const g=B(n,e,o);t[o]?(t[o].p(g,i),u(t[o],1)):(t[o]=I(g),t[o].c(),u(t[o],1),t[o].m(a.parentNode,a))}for(S(),o=e.length;o<t.length;o+=1)s(o);U()}},i(n){if(!r){for(let i=0;i<e.length;i+=1)u(t[i]);r=!0}},o(n){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)m(t[i]);r=!1},d(n){P(t,n),n&&k(a)}}}function I(f){let a,r;return a=new Y({props:{image:f[2]}}),{c(){$(a.$$.fragment)},l(e){p(a.$$.fragment,e)},m(e,t){h(a,e,t),r=!0},p(e,t){const s={};t&1&&(s.image=e[2]),a.$set(s)},i(e){r||(u(a.$$.fragment,e),r=!0)},o(e){m(a.$$.fragment,e),r=!1},d(e){d(a,e)}}}function j(f){let a,r,e=f[0].favorites.length>0&&G(f);return{c(){e&&e.c(),a=v()},l(t){e&&e.l(t),a=v()},m(t,s){e&&e.m(t,s),b(t,a,s),r=!0},p(t,s){t[0].favorites.length>0?e?(e.p(t,s),s&1&&u(e,1)):(e=G(t),e.c(),u(e,1),e.m(a.parentNode,a)):e&&(S(),m(e,1,1,()=>{e=null}),U())},i(t){r||(u(e),r=!0)},o(t){m(e),r=!1},d(t){e&&e.d(t),t&&k(a)}}}function D(f){var o,g;let a,r,e,t,s;function n(l){f[1](l)}let i={username:(o=f[0].foreignUser)==null?void 0:o.username,author:(g=f[0].user)==null?void 0:g.username,innerText:"FAVORITES"};return f[0].favorites!==void 0&&(i.images=f[0].favorites),a=new Z({props:i}),z.push(()=>C(a,"images",n)),t=new R({props:{className:"image-cell",$$slots:{default:[j]},$$scope:{ctx:f}}}),{c(){$(a.$$.fragment),e=E(),$(t.$$.fragment)},l(l){p(a.$$.fragment,l),e=F(l),p(t.$$.fragment,l)},m(l,c){h(a,l,c),b(l,e,c),h(t,l,c),s=!0},p(l,c){var w,y;const _={};c&1&&(_.username=(w=l[0].foreignUser)==null?void 0:w.username),c&1&&(_.author=(y=l[0].user)==null?void 0:y.username),!r&&c&1&&(r=!0,_.images=l[0].favorites,O(()=>r=!1)),a.$set(_);const N={};c&33&&(N.$$scope={dirty:c,ctx:l}),t.$set(N)},i(l){s||(u(a.$$.fragment,l),u(t.$$.fragment,l),s=!0)},o(l){m(a.$$.fragment,l),m(t.$$.fragment,l),s=!1},d(l){d(a,l),l&&k(e),d(t,l)}}}function H(f){let a,r;return a=new V({props:{className:"gallery-user",$$slots:{default:[D]},$$scope:{ctx:f}}}),{c(){$(a.$$.fragment)},l(e){p(a.$$.fragment,e)},m(e,t){h(a,e,t),r=!0},p(e,[t]){const s={};t&33&&(s.$$scope={dirty:t,ctx:e}),a.$set(s)},i(e){r||(u(a.$$.fragment,e),r=!0)},o(e){m(a.$$.fragment,e),r=!1},d(e){d(a,e)}}}function J(f,a,r){let{data:e}=a;function t(s){f.$$.not_equal(e.favorites,s)&&(e.favorites=s,r(0,e))}return f.$$set=s=>{"data"in s&&r(0,e=s.data)},[e,t]}class X extends q{constructor(a){super(),A(this,a,J,H,T,{data:0})}}export{X as default};
