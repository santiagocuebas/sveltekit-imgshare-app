import{S as se,i as le,s as ae,k,a as w,l as E,m as y,c as U,h as p,n as f,C as J,b as M,D as n,v as oe,d as z,f as fe,g as P,E as Be,q as R,e as K,r as F,F as C,G as Q,H as Te,I as Me,J as Oe,K as Re,L as Fe,M as Pe,N as Ce,u as ye,O as Ge,P as qe,Q as ue,R as Ye,T as je,U as He,V as Je,W as Ke,y as ce,z as _e,A as he,B as me,X as Qe,w as Ie,Y as Ae,Z as Ne}from"../chunks/index.d4184e2c.js";import{D as x}from"../chunks/config.d32a4ad9.js";import{c as ze}from"../chunks/click-outside.61d417da.js";import{a as We}from"../chunks/axios.707ed124.js";import{U as te}from"../chunks/enums.4774c07c.js";function Xe(r){let e,s,t,i,u,d,m,a,l,c,v,h,b,_=r[1]&&Se(r);return{c(){e=k("div"),s=k("a"),t=R("Signin"),i=w(),u=k("a"),d=R("Signup"),m=w(),a=k("button"),l=k("i"),c=w(),_&&_.c(),v=K(),this.h()},l(o){e=E(o,"DIV",{class:!0});var g=y(e);s=E(g,"A",{class:!0,href:!0});var S=y(s);t=F(S,"Signin"),S.forEach(p),i=U(g),u=E(g,"A",{class:!0,href:!0});var I=y(u);d=F(I,"Signup"),I.forEach(p),m=U(g),a=E(g,"BUTTON",{class:!0});var j=y(a);l=E(j,"I",{class:!0}),y(l).forEach(p),j.forEach(p),g.forEach(p),c=U(o),_&&_.l(o),v=K(),this.h()},h(){f(s,"class","nav-signin svelte-1d0j6v1"),f(s,"href","/signin"),f(u,"class","nav-signup svelte-1d0j6v1"),f(u,"href","/signup"),f(l,"class","fa-solid fa-caret-down svelte-1d0j6v1"),f(a,"class","svelte-1d0j6v1"),f(e,"class","nav-sign svelte-1d0j6v1")},m(o,g){M(o,e,g),n(e,s),n(s,t),n(e,i),n(e,u),n(u,d),n(e,m),n(e,a),n(a,l),M(o,c,g),_&&_.m(o,g),M(o,v,g),h||(b=C(a,"click",r[5]),h=!0)},p(o,g){o[1]?_?_.p(o,g):(_=Se(o),_.c(),_.m(v.parentNode,v)):_&&(_.d(1),_=null)},i:Q,o:Q,d(o){o&&p(e),o&&p(c),_&&_.d(o),o&&p(v),h=!1,b()}}}function Ze(r){let e,s,t,i,u,d;const m=r[3].default,a=Te(m,r,r[2],null);return{c(){e=k("img"),t=w(),a&&a.c(),this.h()},l(l){e=E(l,"IMG",{id:!0,class:!0,src:!0,alt:!0}),t=U(l),a&&a.l(l),this.h()},h(){var l;f(e,"id","nav-avatar"),f(e,"class","nav-avatar svelte-1d0j6v1"),J(e.src,s=x+"/uploads/avatars/"+((l=r[0])==null?void 0:l.avatar))||f(e,"src",s),f(e,"alt","")},m(l,c){M(l,e,c),M(l,t,c),a&&a.m(l,c),i=!0,u||(d=C(e,"click",r[4]),u=!0)},p(l,c){var v;(!i||c&1&&!J(e.src,s=x+"/uploads/avatars/"+((v=l[0])==null?void 0:v.avatar)))&&f(e,"src",s),a&&a.p&&(!i||c&4)&&Me(a,m,l,l[2],i?Re(m,l[2],c,null):Oe(l[2]),null)},i(l){i||(P(a,l),i=!0)},o(l){z(a,l),i=!1},d(l){l&&p(e),l&&p(t),a&&a.d(l),u=!1,d()}}}function Se(r){let e,s,t,i,u,d,m,a,l,c,v,h,b,_;return{c(){e=k("ul"),s=k("a"),t=k("i"),i=w(),u=k("li"),d=R("Signin"),m=w(),a=k("a"),l=k("i"),c=w(),v=k("li"),h=R("Signup"),this.h()},l(o){e=E(o,"UL",{class:!0});var g=y(e);s=E(g,"A",{href:!0,class:!0});var S=y(s);t=E(S,"I",{class:!0}),y(t).forEach(p),i=U(S),u=E(S,"LI",{});var I=y(u);d=F(I,"Signin"),I.forEach(p),S.forEach(p),m=U(g),a=E(g,"A",{href:!0,class:!0});var j=y(a);l=E(j,"I",{class:!0}),y(l).forEach(p),c=U(j),v=E(j,"LI",{});var $=y(v);h=F($,"Signup"),$.forEach(p),j.forEach(p),g.forEach(p),this.h()},h(){f(t,"class","fa-solid fa-right-to-bracket"),f(s,"href","/signin"),f(s,"class","svelte-1d0j6v1"),f(l,"class","fa-solid fa-right-to-bracket"),f(a,"href","/signup"),f(a,"class","svelte-1d0j6v1"),f(e,"class","nav-sign-list svelte-1d0j6v1")},m(o,g){M(o,e,g),n(e,s),n(s,t),n(s,i),n(s,u),n(u,d),n(e,m),n(e,a),n(a,l),n(a,c),n(a,v),n(v,h),b||(_=[C(s,"click",r[6]),C(a,"click",r[7]),Fe(ze.call(null,e)),C(e,"outclick",r[8])],b=!0)},p:Q,d(o){o&&p(e),b=!1,Pe(_)}}}function xe(r){let e,s,t,i,u,d,m,a,l,c,v,h,b,_,o,g,S;const I=[Ze,Xe],j=[];function $(L,V){return L[0]?0:1}return o=$(r),g=j[o]=I[o](r),{c(){e=k("nav"),s=k("a"),t=k("img"),u=w(),d=k("img"),a=w(),l=k("form"),c=k("input"),v=w(),h=k("button"),b=k("i"),_=w(),g.c(),this.h()},l(L){e=E(L,"NAV",{class:!0});var V=y(e);s=E(V,"A",{class:!0,href:!0});var D=y(s);t=E(D,"IMG",{class:!0,src:!0,alt:!0}),u=U(D),d=E(D,"IMG",{class:!0,src:!0,alt:!0}),D.forEach(p),a=U(V),l=E(V,"FORM",{action:!0,class:!0});var B=y(l);c=E(B,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),v=U(B),h=E(B,"BUTTON",{class:!0});var H=y(h);b=E(H,"I",{class:!0}),y(b).forEach(p),H.forEach(p),B.forEach(p),_=U(V),g.l(V),V.forEach(p),this.h()},h(){f(t,"class","nav-tiny-logo svelte-1d0j6v1"),J(t.src,i="/tiny-logo.png")||f(t,"src",i),f(t,"alt",""),f(d,"class","nav-main-logo svelte-1d0j6v1"),J(d.src,m="/imgshare-logo.png")||f(d,"src",m),f(d,"alt",""),f(s,"class","nav-logo svelte-1d0j6v1"),f(s,"href","/"),f(c,"type","search"),f(c,"name","q"),f(c,"placeholder","Search"),f(c,"class","svelte-1d0j6v1"),f(b,"class","fa-solid fa-magnifying-glass"),f(h,"class","nav-button svelte-1d0j6v1"),f(l,"action","/search"),f(l,"class","svelte-1d0j6v1"),f(e,"class","svelte-1d0j6v1")},m(L,V){M(L,e,V),n(e,s),n(s,t),n(s,u),n(s,d),n(e,a),n(e,l),n(l,c),n(l,v),n(l,h),n(h,b),n(e,_),j[o].m(e,null),S=!0},p(L,[V]){let D=o;o=$(L),o===D?j[o].p(L,V):(oe(),z(j[D],1,1,()=>{j[D]=null}),fe(),g=j[o],g?g.p(L,V):(g=j[o]=I[o](L),g.c()),P(g,1),g.m(e,null))},i(L){S||(P(g),S=!0)},o(L){z(g),S=!1},d(L){L&&p(e),j[o].d()}}}function et(r,e,s){let{$$slots:t={},$$scope:i}=e,{user:u}=e,d=!1;function m(h){Be.call(this,r,h)}const a=()=>s(1,d=!d),l=()=>s(1,d=!1),c=()=>s(1,d=!1),v=()=>s(1,d=!1);return r.$$set=h=>{"user"in h&&s(0,u=h.user),"$$scope"in h&&s(2,i=h.$$scope)},[u,d,i,t,m,a,l,c,v]}class tt extends se{constructor(e){super(),le(this,e,et,xe,ae,{user:0})}}function we(r,e,s){const t=r.slice();return t[6]=e[s],t}function Ue(r){let e,s,t,i,u,d,m;return{c(){e=k("a"),s=k("i"),t=w(),i=k("li"),u=R("Admin"),this.h()},l(a){e=E(a,"A",{href:!0,class:!0});var l=y(e);s=E(l,"I",{class:!0}),y(s).forEach(p),t=U(l),i=E(l,"LI",{});var c=y(i);u=F(c,"Admin"),c.forEach(p),l.forEach(p),this.h()},h(){f(s,"class","fa-solid fa-user"),f(e,"href","/admin"),f(e,"class","svelte-1jp0sts")},m(a,l){M(a,e,l),n(e,s),n(e,t),n(e,i),n(i,u),d||(m=C(e,"click",function(){ue(r[2])&&r[2].apply(this,arguments)}),d=!0)},p(a,l){r=a},d(a){a&&p(e),d=!1,m()}}}function $e(r,e){let s,t,i,u,d=e[6].name+"",m,a,l;return{key:r,first:null,c(){s=k("a"),t=k("i"),i=w(),u=k("li"),m=R(d),this.h()},l(c){s=E(c,"A",{href:!0,class:!0});var v=y(s);t=E(v,"I",{class:!0}),y(t).forEach(p),i=U(v),u=E(v,"LI",{});var h=y(u);m=F(h,d),h.forEach(p),v.forEach(p),this.h()},h(){f(t,"class",Ye(e[6].className)+" svelte-1jp0sts"),f(s,"href",e[6].href),f(s,"class","svelte-1jp0sts"),this.first=s},m(c,v){M(c,s,v),n(s,t),n(s,i),n(s,u),n(u,m),a||(l=C(s,"click",function(){ue(e[2])&&e[2].apply(this,arguments)}),a=!0)},p(c,v){e=c},d(c){c&&p(s),a=!1,l()}}}function st(r){var pe,ge,be,ke;let e,s,t,i,u,d,m,a,l=((pe=r[1])==null?void 0:pe.username)+"",c,v,h,b=((ge=r[1])==null?void 0:ge.email)+"",_,o,g,S,I,j,$=[],L=new Map,V,D,B,H,W,re,ie,de,T=(((be=r[1])==null?void 0:be.role)===te.ADMIN||((ke=r[1])==null?void 0:ke.role)===te.SUPER)&&Ue(r),ee=r[3];const ve=A=>A[6].name;for(let A=0;A<ee.length;A+=1){let N=we(r,ee,A),O=ve(N);L.set(O,$[A]=$e(O,N))}return{c(){e=k("div"),s=k("div"),t=k("img"),d=w(),m=k("div"),a=k("h3"),c=R(l),v=w(),h=k("p"),_=R(b),o=w(),g=k("span"),S=w(),I=k("ul"),T&&T.c(),j=w();for(let A=0;A<$.length;A+=1)$[A].c();V=w(),D=k("a"),B=k("i"),H=w(),W=k("li"),re=R("Logout"),this.h()},l(A){e=E(A,"DIV",{class:!0});var N=y(e);s=E(N,"DIV",{class:!0});var O=y(s);t=E(O,"IMG",{src:!0,alt:!0,class:!0}),d=U(O),m=E(O,"DIV",{});var q=y(m);a=E(q,"H3",{class:!0});var X=y(a);c=F(X,l),X.forEach(p),v=U(q),h=E(q,"P",{class:!0});var Z=y(h);_=F(Z,b),Z.forEach(p),q.forEach(p),O.forEach(p),o=U(N),g=E(N,"SPAN",{class:!0}),y(g).forEach(p),S=U(N),I=E(N,"UL",{class:!0});var G=y(I);T&&T.l(G),j=U(G);for(let ne=0;ne<$.length;ne+=1)$[ne].l(G);V=U(G),D=E(G,"A",{href:!0,class:!0});var Y=y(D);B=E(Y,"I",{class:!0}),y(B).forEach(p),H=U(Y),W=E(Y,"LI",{});var Ee=y(W);re=F(Ee,"Logout"),Ee.forEach(p),Y.forEach(p),G.forEach(p),N.forEach(p),this.h()},h(){var A,N;J(t.src,i=x+"/uploads/avatars/"+((A=r[1])==null?void 0:A.avatar))||f(t,"src",i),f(t,"alt",u=(N=r[1])==null?void 0:N.username),f(t,"class","svelte-1jp0sts"),f(a,"class","svelte-1jp0sts"),f(h,"class","svelte-1jp0sts"),f(s,"class","user-header svelte-1jp0sts"),f(g,"class","svelte-1jp0sts"),f(B,"class","fa-solid fa-right-from-bracket"),f(D,"href",x+"/api/auth/logout"),f(D,"class","svelte-1jp0sts"),f(I,"class","svelte-1jp0sts"),f(e,"class","user-list svelte-1jp0sts")},m(A,N){M(A,e,N),n(e,s),n(s,t),n(s,d),n(s,m),n(m,a),n(a,c),n(m,v),n(m,h),n(h,_),n(e,o),n(e,g),n(e,S),n(e,I),T&&T.m(I,null),n(I,j);for(let O=0;O<$.length;O+=1)$[O]&&$[O].m(I,null);n(I,V),n(I,D),n(D,B),n(D,H),n(D,W),n(W,re),ie||(de=[C(D,"click",Ce(r[4])),Fe(ze.call(null,e)),C(e,"outclick",r[5])],ie=!0)},p(A,[N]){var O,q,X,Z,G,Y;N&2&&!J(t.src,i=x+"/uploads/avatars/"+((O=A[1])==null?void 0:O.avatar))&&f(t,"src",i),N&2&&u!==(u=(q=A[1])==null?void 0:q.username)&&f(t,"alt",u),N&2&&l!==(l=((X=A[1])==null?void 0:X.username)+"")&&ye(c,l),N&2&&b!==(b=((Z=A[1])==null?void 0:Z.email)+"")&&ye(_,b),((G=A[1])==null?void 0:G.role)===te.ADMIN||((Y=A[1])==null?void 0:Y.role)===te.SUPER?T?T.p(A,N):(T=Ue(A),T.c(),T.m(I,j)):T&&(T.d(1),T=null),N&12&&(ee=A[3],$=Ge($,N,ve,1,A,ee,L,I,qe,$e,V,we))},i:Q,o:Q,d(A){A&&p(e),T&&T.d();for(let N=0;N<$.length;N+=1)$[N].d();ie=!1,Pe(de)}}}function lt(r,e,s){let{user:t}=e,{change:i}=e,{visible:u}=e;const d=[{href:`/user/${t==null?void 0:t.username}/post`,className:"fa-regular fa-image",name:"Post"},{href:`/user/${t==null?void 0:t.username}/favorite`,className:"fa-regular fa-star",name:"Favorite"},{href:`/user/${t==null?void 0:t.username}/comment`,className:"fa-regular fa-message",name:"Comments"},{href:`/user/${t==null?void 0:t.username}/about`,className:"fa-regular fa-file",name:"About"},{href:`/user/${t==null?void 0:t.username}/upload`,className:"fa-solid fa-arrow-up-from-bracket",name:"Upload"},{href:`/user/${t==null?void 0:t.username}/settings`,className:"fa-solid fa-gear",name:"Settings"}];async function m(l){const v=l.currentTarget.getAttribute("href"),h=await We({method:"POST",url:v,withCredentials:!0}).then(b=>b.data);i(),h.url&&(window.location.href="/")}const a=()=>s(0,u=!1);return r.$$set=l=>{"user"in l&&s(1,t=l.user),"change"in l&&s(2,i=l.change),"visible"in l&&s(0,u=l.visible)},[u,t,i,d,m,a]}class at extends se{constructor(e){super(),le(this,e,lt,st,ae,{user:1,change:2,visible:0})}}function rt(r){const e=r-1;return e*e*e+1}function De(r,{delay:e=0,duration:s=400,easing:t=rt,x:i=0,y:u=0,opacity:d=0}={}){const m=getComputedStyle(r),a=+m.opacity,l=m.transform==="none"?"":m.transform,c=a*(1-d),[v,h]=je(i),[b,_]=je(u);return{delay:e,duration:s,easing:t,css:(o,g)=>`
			transform: ${l} translate(${(1-o)*v}${h}, ${(1-o)*b}${_});
			opacity: ${a-c*g}`}}function it(r){let e,s,t,i=new Date().getFullYear()+"",u,d,m,a,l,c,v,h,b,_,o,g,S;return{c(){e=k("footer"),s=k("div"),t=R("imgShare © "),u=R(i),d=w(),m=k("a"),a=R("About"),l=w(),c=k("a"),v=R("Terms"),h=w(),b=k("a"),_=R("Rules"),this.h()},l(I){e=E(I,"FOOTER",{class:!0});var j=y(e);s=E(j,"DIV",{class:!0});var $=y(s);t=F($,"imgShare © "),u=F($,i),$.forEach(p),d=U(j),m=E(j,"A",{href:!0,class:!0});var L=y(m);a=F(L,"About"),L.forEach(p),l=U(j),c=E(j,"A",{href:!0,class:!0});var V=y(c);v=F(V,"Terms"),V.forEach(p),h=U(j),b=E(j,"A",{href:!0,class:!0});var D=y(b);_=F(D,"Rules"),D.forEach(p),j.forEach(p),this.h()},h(){f(s,"class","svelte-zgee83"),f(m,"href","/about"),f(m,"class","svelte-zgee83"),f(c,"href","/terms"),f(c,"class","svelte-zgee83"),f(b,"href","/rules"),f(b,"class","svelte-zgee83"),f(e,"class","svelte-zgee83")},m(I,j){M(I,e,j),n(e,s),n(s,t),n(s,u),n(e,d),n(e,m),n(m,a),n(e,l),n(e,c),n(c,v),n(e,h),n(e,b),n(b,_),S=!0},p:Q,i(I){S||(He(()=>{S&&(g&&g.end(1),o=Je(e,De,{y:50,duration:500}),o.start())}),S=!0)},o(I){o&&o.invalidate(),g=Ke(e,De,{y:50,duration:500}),S=!1},d(I){I&&p(e),I&&g&&g.end()}}}class nt extends se{constructor(e){super(),le(this,e,null,it,ae,{})}}function Le(r){let e,s,t,i;function u(a){r[7](a)}function d(a){r[8](a)}let m={user:r[0].user};return r[4]!==void 0&&(m.change=r[4]),r[1]!==void 0&&(m.visible=r[1]),e=new at({props:m}),Ie.push(()=>Ae(e,"change",u)),Ie.push(()=>Ae(e,"visible",d)),{c(){ce(e.$$.fragment)},l(a){_e(e.$$.fragment,a)},m(a,l){he(e,a,l),i=!0},p(a,l){const c={};l&1&&(c.user=a[0].user),!s&&l&16&&(s=!0,c.change=a[4],Ne(()=>s=!1)),!t&&l&2&&(t=!0,c.visible=a[1],Ne(()=>t=!1)),e.$set(c)},i(a){i||(P(e.$$.fragment,a),i=!0)},o(a){z(e.$$.fragment,a),i=!1},d(a){me(e,a)}}}function ot(r){let e,s,t=r[1]&&Le(r);return{c(){t&&t.c(),e=K()},l(i){t&&t.l(i),e=K()},m(i,u){t&&t.m(i,u),M(i,e,u),s=!0},p(i,u){i[1]?t?(t.p(i,u),u&2&&P(t,1)):(t=Le(i),t.c(),P(t,1),t.m(e.parentNode,e)):t&&(oe(),z(t,1,1,()=>{t=null}),fe())},i(i){s||(P(t),s=!0)},o(i){z(t),s=!1},d(i){t&&t.d(i),i&&p(e)}}}function Ve(r){let e,s;return e=new nt({}),{c(){ce(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,i){he(e,t,i),s=!0},i(t){s||(P(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){me(e,t)}}}function ft(r){var b;let e,s,t,i,u=r[2]&&(r[3]==="/"||((b=r[3])==null?void 0:b.includes("/gallery"))),d,m,a,l;e=new tt({props:{user:r[0].user,$$slots:{default:[ot]},$$scope:{ctx:r}}}),e.$on("click",function(){ue(r[4])&&r[4].apply(this,arguments)});const c=r[6].default,v=Te(c,r,r[9],null);let h=u&&Ve();return{c(){ce(e.$$.fragment),s=w(),t=k("div"),v&&v.c(),i=w(),h&&h.c(),d=K(),this.h()},l(_){_e(e.$$.fragment,_),s=U(_),t=E(_,"DIV",{class:!0});var o=y(t);v&&v.l(o),o.forEach(p),i=U(_),h&&h.l(_),d=K(),this.h()},h(){f(t,"class","main-container")},m(_,o){he(e,_,o),M(_,s,o),M(_,t,o),v&&v.m(t,null),M(_,i,o),h&&h.m(_,o),M(_,d,o),m=!0,a||(l=C(t,"wheel",r[5]),a=!0)},p(_,[o]){var S;r=_;const g={};o&1&&(g.user=r[0].user),o&531&&(g.$$scope={dirty:o,ctx:r}),e.$set(g),v&&v.p&&(!m||o&512)&&Me(v,c,r,r[9],m?Re(c,r[9],o,null):Oe(r[9]),null),o&12&&(u=r[2]&&(r[3]==="/"||((S=r[3])==null?void 0:S.includes("/gallery")))),u?h?o&12&&P(h,1):(h=Ve(),h.c(),P(h,1),h.m(d.parentNode,d)):h&&(oe(),z(h,1,1,()=>{h=null}),fe())},i(_){m||(P(e.$$.fragment,_),P(v,_),P(h),m=!0)},o(_){z(e.$$.fragment,_),z(v,_),z(h),m=!1},d(_){me(e,_),_&&p(s),_&&p(t),v&&v.d(_),_&&p(i),h&&h.d(_),_&&p(d),a=!1,l()}}}function ut(r,e,s){let{$$slots:t={},$$scope:i}=e,{data:u}=e,d=!1,m=!0,a,l=()=>s(1,d=!d);async function c(b){b.deltaY<=0?s(2,m=!0):s(2,m=!1)}Qe(()=>s(3,a=window.location.pathname));function v(b){l=b,s(4,l)}function h(b){d=b,s(1,d)}return r.$$set=b=>{"data"in b&&s(0,u=b.data),"$$scope"in b&&s(9,i=b.$$scope)},[u,d,m,a,l,c,t,v,h,i]}class vt extends se{constructor(e){super(),le(this,e,ut,ft,ae,{data:0})}}export{vt as default};
