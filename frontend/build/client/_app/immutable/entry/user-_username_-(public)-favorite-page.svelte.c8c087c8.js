import{S,i as U,s as q,y as _,z as $,A as p,g as u,d as m,B as h,w as A,X as T,a as z,c as C,b as v,Y as E,h as b,e as d,v as G,f as I,_ as F}from"../chunks/index.8bb6be9b.js";import{B as O}from"../chunks/BoxGallery.71982b39.js";import{G as P}from"../chunks/Gallery.2529fd7f.js";import{I as R}from"../chunks/Image.eea04beb.js";import{N as V}from"../chunks/NavUser.7d92a8b8.js";function w(f,a,r){const e=f.slice();return e[2]=a[r],e}function y(f){let a,r,e=f[0].favorites,t=[];for(let s=0;s<e.length;s+=1)t[s]=B(w(f,e,s));const l=s=>m(t[s],1,1,()=>{t[s]=null});return{c(){for(let s=0;s<t.length;s+=1)t[s].c();a=d()},l(s){for(let i=0;i<t.length;i+=1)t[i].l(s);a=d()},m(s,i){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,i);v(s,a,i),r=!0},p(s,i){if(i&1){e=s[0].favorites;let o;for(o=0;o<e.length;o+=1){const n=w(s,e,o);t[o]?(t[o].p(n,i),u(t[o],1)):(t[o]=B(n),t[o].c(),u(t[o],1),t[o].m(a.parentNode,a))}for(G(),o=e.length;o<t.length;o+=1)l(o);I()}},i(s){if(!r){for(let i=0;i<e.length;i+=1)u(t[i]);r=!0}},o(s){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)m(t[i]);r=!1},d(s){F(t,s),s&&b(a)}}}function B(f){let a,r;return a=new R({props:{image:f[2]}}),{c(){_(a.$$.fragment)},l(e){$(a.$$.fragment,e)},m(e,t){p(a,e,t),r=!0},p(e,t){const l={};t&1&&(l.image=e[2]),a.$set(l)},i(e){r||(u(a.$$.fragment,e),r=!0)},o(e){m(a.$$.fragment,e),r=!1},d(e){h(a,e)}}}function X(f){let a,r,e=f[0].favorites.length>0&&y(f);return{c(){e&&e.c(),a=d()},l(t){e&&e.l(t),a=d()},m(t,l){e&&e.m(t,l),v(t,a,l),r=!0},p(t,l){t[0].favorites.length>0?e?(e.p(t,l),l&1&&u(e,1)):(e=y(t),e.c(),u(e,1),e.m(a.parentNode,a)):e&&(G(),m(e,1,1,()=>{e=null}),I())},i(t){r||(u(e),r=!0)},o(t){m(e),r=!1},d(t){e&&e.d(t),t&&b(a)}}}function Y(f){var o;let a,r,e,t,l;function s(n){f[1](n)}let i={username:f[0].foreignUser.username,author:(o=f[0].user)==null?void 0:o.username,innerText:"FAVORITES"};return f[0].favorites!==void 0&&(i.images=f[0].favorites),a=new V({props:i}),A.push(()=>T(a,"images",s)),t=new O({props:{className:"image-cell",$$slots:{default:[X]},$$scope:{ctx:f}}}),{c(){_(a.$$.fragment),e=z(),_(t.$$.fragment)},l(n){$(a.$$.fragment,n),e=C(n),$(t.$$.fragment,n)},m(n,c){p(a,n,c),v(n,e,c),p(t,n,c),l=!0},p(n,c){var N;const g={};c&1&&(g.username=n[0].foreignUser.username),c&1&&(g.author=(N=n[0].user)==null?void 0:N.username),!r&&c&1&&(r=!0,g.images=n[0].favorites,E(()=>r=!1)),a.$set(g);const k={};c&33&&(k.$$scope={dirty:c,ctx:n}),t.$set(k)},i(n){l||(u(a.$$.fragment,n),u(t.$$.fragment,n),l=!0)},o(n){m(a.$$.fragment,n),m(t.$$.fragment,n),l=!1},d(n){h(a,n),n&&b(e),h(t,n)}}}function j(f){let a,r;return a=new P({props:{className:"gallery-user",$$slots:{default:[Y]},$$scope:{ctx:f}}}),{c(){_(a.$$.fragment)},l(e){$(a.$$.fragment,e)},m(e,t){p(a,e,t),r=!0},p(e,[t]){const l={};t&33&&(l.$$scope={dirty:t,ctx:e}),a.$set(l)},i(e){r||(u(a.$$.fragment,e),r=!0)},o(e){m(a.$$.fragment,e),r=!1},d(e){h(a,e)}}}function D(f,a,r){let{data:e}=a;function t(l){f.$$.not_equal(e.favorites,l)&&(e.favorites=l,r(0,e))}return f.$$set=l=>{"data"in l&&r(0,e=l.data)},[e,t]}class Q extends S{constructor(a){super(),U(this,a,D,j,q,{data:0})}}export{Q as default};
