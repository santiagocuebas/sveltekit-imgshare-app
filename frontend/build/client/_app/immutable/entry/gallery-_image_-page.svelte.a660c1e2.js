import{S as fe,i as ce,s as me,H as Ee,k as b,a as T,q as P,l as k,m as I,c as O,h as g,r as S,n as c,C as _e,b as z,D as m,g as N,v as Ie,d as R,f as we,u as ne,I as je,J as $e,K as De,F as K,a2 as nt,e as ue,a3 as at,$ as be,N as pe,M as Oe,G as ae,w as Z,L as lt,Q as qe,a0 as ot,W as rt,X as oe,y as x,z as ee,A as te,Y as re,B as se,_ as ut,O as ft,a1 as ct}from"../chunks/index.8bb6be9b.js";import{f as ke}from"../chunks/index.c08ef366.js";import{D as X}from"../chunks/config.d6051678.js";import{U as Ve}from"../chunks/enums.4774c07c.js";import{h as Se,a as Le}from"../chunks/services.bd8255ea.js";import{B as mt}from"../chunks/BoxGallery.71982b39.js";import{a as Pe}from"../chunks/axios.707ed124.js";import{c as it}from"../chunks/click-outside.61d417da.js";const _t=i=>({}),He=i=>({});function Fe(i){let e,t,s,l,a,r;const u=i[6].default,n=Ee(u,i,i[5],null);return{c(){e=b("div"),t=b("i"),s=T(),n&&n.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var f=I(e);t=k(f,"I",{class:!0}),I(t).forEach(g),s=O(f),n&&n.l(f),f.forEach(g),this.h()},h(){c(t,"class","fa-solid fa-ellipsis svelte-159uz2p"),c(e,"class","image-edit svelte-159uz2p")},m(o,f){z(o,e,f),m(e,t),m(e,s),n&&n.m(e,null),l=!0,a||(r=K(t,"mousedown",i[7]),a=!0)},p(o,f){n&&n.p&&(!l||f&32)&&je(n,u,o,o[5],l?De(u,o[5],f,null):$e(o[5]),null)},i(o){l||(N(n,o),l=!0)},o(o){R(n,o),l=!1},d(o){o&&g(e),n&&n.d(o),a=!1,r()}}}function ht(i){let e,t=i[0].description+"",s;return{c(){e=new nt(!1),s=ue(),this.h()},l(l){e=at(l,!1),s=ue(),this.h()},h(){e.a=s},m(l,a){e.m(t,l,a),z(l,s,a)},p(l,a){a&1&&t!==(t=l[0].description+"")&&e.p(t)},d(l){l&&g(s),l&&e.d()}}}function dt(i){let e,t,s,l,a,r,u,n,o,f,h;return{c(){e=b("form"),t=b("textarea"),s=T(),l=b("button"),a=P("Cancel"),r=T(),u=b("button"),n=P("Send"),this.h()},l(_){e=k(_,"FORM",{action:!0,method:!0,class:!0});var d=I(e);t=k(d,"TEXTAREA",{id:!0,name:!0,rows:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),I(t).forEach(g),s=O(d),l=k(d,"BUTTON",{class:!0});var E=I(l);a=S(E,"Cancel"),E.forEach(g),r=O(d),u=k(d,"BUTTON",{class:!0});var p=I(u);n=S(p,"Send"),p.forEach(g),d.forEach(g),this.h()},h(){c(t,"id","edit"),c(t,"name","description"),c(t,"rows","1"),c(t,"spellcheck","false"),c(t,"autocomplete","off"),c(t,"maxlength","4200"),c(t,"class","svelte-159uz2p"),c(l,"class","svelte-159uz2p"),c(u,"class","blue svelte-159uz2p"),c(e,"action",o=X+"/api/image/"+i[0].id+"/description"),c(e,"method","POST"),c(e,"class","svelte-159uz2p")},m(_,d){z(_,e,d),m(e,t),be(t,i[0].description),m(e,s),m(e,l),m(l,a),m(e,r),m(e,u),m(u,n),f||(h=[K(t,"input",i[8]),K(l,"click",pe(i[9])),K(e,"submit",pe(i[4]))],f=!0)},p(_,d){d&1&&be(t,_[0].description),d&1&&o!==(o=X+"/api/image/"+_[0].id+"/description")&&c(e,"action",o)},d(_){_&&g(e),f=!1,Oe(h)}}}function gt(i){var ze,Ue;let e,t,s,l,a,r=i[0].title+"",u,n,o,f,h,_,d,E,p,j,v=i[0].author+"",$,w,y,M,C=i[0].views+"",D,U,Y=ke(i[0].createdAt)+"",Q,J,W,H,L,V,B,ve,F,G=i[3]&&(((ze=i[3])==null?void 0:ze.username)===i[0].author||((Ue=i[3])==null?void 0:Ue.role)!==Ve.EDITOR)&&Fe(i);function Ce(A,q){return A[2]?dt:ht}let de=Ce(i),le=de(i);const Ae=i[6].assessment,ie=Ee(Ae,i,i[5],He);return{c(){e=b("div"),G&&G.c(),t=T(),s=b("h2"),l=b("i"),a=T(),u=P(r),n=T(),o=b("div"),f=b("a"),h=b("img"),p=T(),j=b("a"),$=P(v),y=T(),M=b("p"),D=P(C),U=P(" views ● "),Q=P(Y),J=T(),W=b("img"),V=T(),B=b("div"),le.c(),ve=T(),ie&&ie.c(),this.h()},l(A){e=k(A,"DIV",{class:!0});var q=I(e);G&&G.l(q),t=O(q),s=k(q,"H2",{class:!0});var ge=I(s);l=k(ge,"I",{class:!0}),I(l).forEach(g),a=O(ge),u=S(ge,r),ge.forEach(g),n=O(q),o=k(q,"DIV",{class:!0});var he=I(o);f=k(he,"A",{class:!0,href:!0});var Be=I(f);h=k(Be,"IMG",{src:!0,alt:!0,class:!0}),Be.forEach(g),p=O(he),j=k(he,"A",{class:!0,href:!0});var Re=I(j);$=S(Re,v),Re.forEach(g),y=O(he),M=k(he,"P",{});var ye=I(M);D=S(ye,C),U=S(ye," views ● "),Q=S(ye,Y),ye.forEach(g),he.forEach(g),J=O(q),W=k(q,"IMG",{class:!0,src:!0,alt:!0}),V=O(q),B=k(q,"DIV",{class:!0});var Me=I(B);le.l(Me),Me.forEach(g),ve=O(q),ie&&ie.l(q),q.forEach(g),this.h()},h(){c(l,"class","fa-solid fa-image title-icon"),c(s,"class","title"),_e(h.src,_=X+"/uploads/avatars/"+i[0].avatar)||c(h,"src",_),c(h,"alt",d=i[0].author),c(h,"class","svelte-159uz2p"),c(f,"class","image-author-link svelte-159uz2p"),c(f,"href",E="/user/"+i[0].author),c(j,"class","image-author-username svelte-159uz2p"),c(j,"href",w="/user/"+i[0].author),c(o,"class","image-author svelte-159uz2p"),c(W,"class","image-content svelte-159uz2p"),_e(W.src,H=X+"/uploads/"+i[0].filename)||c(W,"src",H),c(W,"alt",L=i[0].title),c(B,"class","image-description svelte-159uz2p"),c(e,"class","image-box svelte-159uz2p")},m(A,q){z(A,e,q),G&&G.m(e,null),m(e,t),m(e,s),m(s,l),m(s,a),m(s,u),m(e,n),m(e,o),m(o,f),m(f,h),m(o,p),m(o,j),m(j,$),m(o,y),m(o,M),m(M,D),m(M,U),m(M,Q),m(e,J),m(e,W),m(e,V),m(e,B),le.m(B,null),m(e,ve),ie&&ie.m(e,null),F=!0},p(A,[q]){var ge,he;A[3]&&(((ge=A[3])==null?void 0:ge.username)===A[0].author||((he=A[3])==null?void 0:he.role)!==Ve.EDITOR)?G?(G.p(A,q),q&9&&N(G,1)):(G=Fe(A),G.c(),N(G,1),G.m(e,t)):G&&(Ie(),R(G,1,1,()=>{G=null}),we()),(!F||q&1)&&r!==(r=A[0].title+"")&&ne(u,r),(!F||q&1&&!_e(h.src,_=X+"/uploads/avatars/"+A[0].avatar))&&c(h,"src",_),(!F||q&1&&d!==(d=A[0].author))&&c(h,"alt",d),(!F||q&1&&E!==(E="/user/"+A[0].author))&&c(f,"href",E),(!F||q&1)&&v!==(v=A[0].author+"")&&ne($,v),(!F||q&1&&w!==(w="/user/"+A[0].author))&&c(j,"href",w),(!F||q&1)&&C!==(C=A[0].views+"")&&ne(D,C),(!F||q&1)&&Y!==(Y=ke(A[0].createdAt)+"")&&ne(Q,Y),(!F||q&1&&!_e(W.src,H=X+"/uploads/"+A[0].filename))&&c(W,"src",H),(!F||q&1&&L!==(L=A[0].title))&&c(W,"alt",L),de===(de=Ce(A))&&le?le.p(A,q):(le.d(1),le=de(A),le&&(le.c(),le.m(B,null))),ie&&ie.p&&(!F||q&32)&&je(ie,Ae,A,A[5],F?De(Ae,A[5],q,_t):$e(A[5]),He)},i(A){F||(N(G),N(ie,A),F=!0)},o(A){R(G),R(ie,A),F=!1},d(A){A&&g(e),G&&G.d(),le.d(),ie&&ie.d(A)}}}function pt(i,e,t){let{$$slots:s={},$$scope:l}=e,{image:a}=e,{user:r}=e,{visible:u}=e,{description:n}=e;async function o(){t(2,n=!1),Se(this)}const f=()=>t(1,u=!u);function h(){a.description=this.value,t(0,a)}const _=()=>t(2,n=!1);return i.$$set=d=>{"image"in d&&t(0,a=d.image),"user"in d&&t(3,r=d.user),"visible"in d&&t(1,u=d.visible),"description"in d&&t(2,n=d.description),"$$scope"in d&&t(5,l=d.$$scope)},[a,u,n,r,o,l,s,f,h,_]}class vt extends fe{constructor(e){super(),ce(this,e,pt,gt,me,{image:0,user:3,visible:1,description:2})}}function bt(i){let e,t,s,l,a,r,u;const n=i[1].default,o=Ee(n,i,i[0],null);return{c(){e=b("div"),t=b("div"),s=b("h2"),l=b("i"),a=P(`\r
			Recent Uploads`),r=T(),o&&o.c(),this.h()},l(f){e=k(f,"DIV",{class:!0});var h=I(e);t=k(h,"DIV",{class:!0});var _=I(t);s=k(_,"H2",{class:!0});var d=I(s);l=k(d,"I",{class:!0}),I(l).forEach(g),a=S(d,`\r
			Recent Uploads`),d.forEach(g),r=O(_),o&&o.l(_),_.forEach(g),h.forEach(g),this.h()},h(){c(l,"class","fa-solid fa-images title-icon"),c(s,"class","title"),c(t,"class","sidebar-container svelte-pei3k5"),c(e,"class","sidebar svelte-pei3k5")},m(f,h){z(f,e,h),m(e,t),m(t,s),m(s,l),m(s,a),m(t,r),o&&o.m(t,null),u=!0},p(f,[h]){o&&o.p&&(!u||h&1)&&je(o,n,f,f[0],u?De(n,f[0],h,null):$e(f[0]),null)},i(f){u||(N(o,f),u=!0)},o(f){R(o,f),u=!1},d(f){f&&g(e),o&&o.d(f)}}}function kt(i,e,t){let{$$slots:s={},$$scope:l}=e;return i.$$set=a=>{"$$scope"in a&&t(0,l=a.$$scope)},[l,s]}class Et extends fe{constructor(e){super(),ce(this,e,kt,bt,me,{})}}function It(i){let e,t;const s=i[1].default,l=Ee(s,i,i[0],null);return{c(){e=b("div"),l&&l.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var r=I(e);l&&l.l(r),r.forEach(g),this.h()},h(){c(e,"class","comments svelte-1n6d5p9")},m(a,r){z(a,e,r),l&&l.m(e,null),t=!0},p(a,[r]){l&&l.p&&(!t||r&1)&&je(l,s,a,a[0],t?De(s,a[0],r,null):$e(a[0]),null)},i(a){t||(N(l,a),t=!0)},o(a){R(l,a),t=!1},d(a){a&&g(e),l&&l.d(a)}}}function wt(i,e,t){let{$$slots:s={},$$scope:l}=e;return i.$$set=a=>{"$$scope"in a&&t(0,l=a.$$scope)},[l,s]}class jt extends fe{constructor(e){super(),ce(this,e,wt,It,me,{})}}function $t(i){let e,t,s,l,a,r,u,n,o,f;return{c(){e=b("div"),t=P(`Must be register to comment\r
  `),s=b("div"),l=b("a"),a=b("button"),r=P("Signin"),u=T(),n=b("a"),o=b("button"),f=P("Signup"),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=I(e);t=S(_,`Must be register to comment\r
  `),s=k(_,"DIV",{class:!0});var d=I(s);l=k(d,"A",{href:!0});var E=I(l);a=k(E,"BUTTON",{class:!0});var p=I(a);r=S(p,"Signin"),p.forEach(g),E.forEach(g),u=O(d),n=k(d,"A",{href:!0});var j=I(n);o=k(j,"BUTTON",{class:!0});var v=I(o);f=S(v,"Signup"),v.forEach(g),j.forEach(g),d.forEach(g),_.forEach(g),this.h()},h(){c(a,"class","black svelte-5jkpge"),c(l,"href","/signin"),c(o,"class","green svelte-5jkpge"),c(n,"href","/signup"),c(s,"class","svelte-5jkpge"),c(e,"class","register svelte-5jkpge")},m(h,_){z(h,e,_),m(e,t),m(e,s),m(s,l),m(l,a),m(a,r),m(s,u),m(s,n),m(n,o),m(o,f)},p:ae,i:ae,o:ae,d(h){h&&g(e)}}}class Dt extends fe{constructor(e){super(),ce(this,e,null,$t,me,{})}}function Ge(i){let e,t,s,l,a,r,u,n,o,f;return{c(){e=b("span"),t=b("button"),s=P("Cancel"),l=T(),a=b("button"),r=P("Comment"),this.h()},l(h){e=k(h,"SPAN",{class:!0});var _=I(e);t=k(_,"BUTTON",{class:!0});var d=I(t);s=S(d,"Cancel"),d.forEach(g),l=O(_),a=k(_,"BUTTON",{class:!0});var E=I(a);r=S(E,"Comment"),E.forEach(g),_.forEach(g),this.h()},h(){c(t,"class","svelte-1slore9"),c(a,"class",u="blue "+(i[2].length>0?"":"disabled")+" svelte-1slore9"),a.disabled=n=!(i[2].length>0),c(e,"class","svelte-1slore9")},m(h,_){z(h,e,_),m(e,t),m(t,s),m(e,l),m(e,a),m(a,r),o||(f=K(t,"click",i[11]),o=!0)},p(h,_){_&4&&u!==(u="blue "+(h[2].length>0?"":"disabled")+" svelte-1slore9")&&c(a,"class",u),_&4&&n!==(n=!(h[2].length>0))&&(a.disabled=n)},d(h){h&&g(e),o=!1,f()}}}function Ct(i){let e,t,s,l,a,r,u,n,o,f,h,_,d,E,p=i[3]&&Ge(i);return{c(){e=b("div"),t=b("h2"),s=b("i"),l=P(`\r
		Post`),a=T(),r=b("form"),u=b("img"),o=T(),f=b("input"),h=T(),p&&p.c(),this.h()},l(j){e=k(j,"DIV",{class:!0});var v=I(e);t=k(v,"H2",{class:!0});var $=I(t);s=k($,"I",{class:!0}),I(s).forEach(g),l=S($,`\r
		Post`),$.forEach(g),a=O(v),r=k(v,"FORM",{action:!0,method:!0,class:!0});var w=I(r);u=k(w,"IMG",{src:!0,alt:!0,class:!0}),o=O(w),f=k(w,"INPUT",{type:!0,name:!0,placeholder:!0,autocomplete:!0,spellcheck:!0,class:!0}),h=O(w),p&&p.l(w),w.forEach(g),v.forEach(g),this.h()},h(){c(s,"class","fa-regular fa-copy title-icon"),c(t,"class","title"),_e(u.src,n=X+"/uploads/avatars/"+i[1])||c(u,"src",n),c(u,"alt",i[0]),c(u,"class","svelte-1slore9"),c(f,"type","text"),c(f,"name","comment"),c(f,"placeholder","Send a comment..."),c(f,"autocomplete","off"),c(f,"spellcheck","false"),c(f,"class","svelte-1slore9"),c(r,"action",_=X+"/api/image/"+i[0]+"/comment"),c(r,"method","POST"),c(r,"class","svelte-1slore9"),c(e,"class","svelte-1slore9")},m(j,v){z(j,e,v),m(e,t),m(t,s),m(t,l),m(e,a),m(e,r),m(r,u),m(r,o),m(r,f),be(f,i[2]),i[9](f),m(r,h),p&&p.m(r,null),d||(E=[K(f,"input",i[8]),K(f,"focus",i[10]),K(r,"submit",pe(i[6]))],d=!0)},p(j,[v]){v&2&&!_e(u.src,n=X+"/uploads/avatars/"+j[1])&&c(u,"src",n),v&1&&c(u,"alt",j[0]),v&4&&f.value!==j[2]&&be(f,j[2]),j[3]?p?p.p(j,v):(p=Ge(j),p.c(),p.m(r,null)):p&&(p.d(1),p=null),v&1&&_!==(_=X+"/api/image/"+j[0]+"/comment")&&c(r,"action",_)},i:ae,o:ae,d(j){j&&g(e),i[9](null),p&&p.d(),d=!1,Oe(E)}}}function Tt(i,e,t){let{imageId:s}=e,{avatar:l}=e,{comments:a}=e,r="",u=!1,n;const o=p=>{t(2,r=""),n.blur(),t(3,u=p)};async function f(){const p=await Se(this);p.comment&&t(7,a=[p.comment,...a]),o(!1)}function h(){r=this.value,t(2,r)}function _(p){Z[p?"unshift":"push"](()=>{n=p,t(4,n)})}const d=()=>t(3,u=!0),E=()=>o(!1);return i.$$set=p=>{"imageId"in p&&t(0,s=p.imageId),"avatar"in p&&t(1,l=p.avatar),"comments"in p&&t(7,a=p.comments)},[s,l,r,u,n,o,f,a,h,_,d,E]}class Ot extends fe{constructor(e){super(),ce(this,e,Tt,Ct,me,{imageId:0,avatar:1,comments:7})}}function Xe(i){let e,t;const s=i[2].default,l=Ee(s,i,i[1],null);return{c(){e=b("div"),l&&l.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var r=I(e);l&&l.l(r),r.forEach(g),this.h()},h(){c(e,"class","comments-list svelte-1y2cz3c")},m(a,r){z(a,e,r),l&&l.m(e,null),t=!0},p(a,r){l&&l.p&&(!t||r&2)&&je(l,s,a,a[1],t?De(s,a[1],r,null):$e(a[1]),null)},i(a){t||(N(l,a),t=!0)},o(a){R(l,a),t=!1},d(a){a&&g(e),l&&l.d(a)}}}function yt(i){let e,t,s,l,a,r,u,n,o=i[0]>0&&Xe(i);return{c(){e=b("div"),t=b("h2"),s=b("i"),l=T(),a=P(i[0]),r=P(" Comments"),u=T(),o&&o.c(),this.h()},l(f){e=k(f,"DIV",{class:!0});var h=I(e);t=k(h,"H2",{class:!0});var _=I(t);s=k(_,"I",{class:!0}),I(s).forEach(g),l=O(_),a=S(_,i[0]),r=S(_," Comments"),_.forEach(g),u=O(h),o&&o.l(h),h.forEach(g),this.h()},h(){c(s,"class","fa-solid fa-message title-icon"),c(t,"class","title"),c(e,"class","comments-container svelte-1y2cz3c")},m(f,h){z(f,e,h),m(e,t),m(t,s),m(t,l),m(t,a),m(t,r),m(e,u),o&&o.m(e,null),n=!0},p(f,[h]){(!n||h&1)&&ne(a,f[0]),f[0]>0?o?(o.p(f,h),h&1&&N(o,1)):(o=Xe(f),o.c(),N(o,1),o.m(e,null)):o&&(Ie(),R(o,1,1,()=>{o=null}),we())},i(f){n||(N(o),n=!0)},o(f){R(o),n=!1},d(f){f&&g(e),o&&o.d()}}}function Vt(i,e,t){let{$$slots:s={},$$scope:l}=e,{totalComments:a}=e;return i.$$set=r=>{"totalComments"in r&&t(0,a=r.totalComments),"$$scope"in r&&t(1,l=r.$$scope)},[a,l,s]}class At extends fe{constructor(e){super(),ce(this,e,Vt,yt,me,{totalComments:0})}}function Je(i){let e,t;return{c(){e=b("p"),t=P("(edit)"),this.h()},l(s){e=k(s,"P",{class:!0});var l=I(e);t=S(l,"(edit)"),l.forEach(g),this.h()},h(){c(e,"class","grey svelte-3y2i6b")},m(s,l){z(s,e,l),m(e,t)},d(s){s&&g(e)}}}function Nt(i){let e,t=i[0].comment+"",s;return{c(){e=b("div"),s=P(t),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=I(e);s=S(a,t),a.forEach(g),this.h()},h(){c(e,"class","comment-content svelte-3y2i6b")},m(l,a){z(l,e,a),m(e,s)},p(l,a){a&1&&t!==(t=l[0].comment+"")&&ne(s,t)},d(l){l&&g(e)}}}function Pt(i){let e,t,s,l,a,r,u,n,o,f,h,_,d,E,p;return{c(){e=b("form"),t=b("input"),s=T(),l=b("button"),a=b("i"),r=P(`\r
				Cancel`),u=T(),n=b("button"),o=b("i"),f=P(`\r
				Done`),this.h()},l(j){e=k(j,"FORM",{class:!0,action:!0,method:!0});var v=I(e);t=k(v,"INPUT",{type:!0,name:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),s=O(v),l=k(v,"BUTTON",{class:!0});var $=I(l);a=k($,"I",{class:!0}),I(a).forEach(g),r=S($,`\r
				Cancel`),$.forEach(g),u=O(v),n=k(v,"BUTTON",{class:!0});var w=I(n);o=k(w,"I",{class:!0}),I(o).forEach(g),f=S(w,`\r
				Done`),w.forEach(g),v.forEach(g),this.h()},h(){c(t,"type","text"),c(t,"name","comment"),c(t,"spellcheck","false"),c(t,"autocomplete","off"),c(t,"maxlength","4200"),c(t,"class","svelte-3y2i6b"),c(a,"class","fa-solid fa-cancel svelte-3y2i6b"),c(l,"class","red svelte-3y2i6b"),c(o,"class","fa-solid fa-check svelte-3y2i6b"),c(n,"class",h=qe(i[5].length>0?"":"disabled")+" svelte-3y2i6b"),n.disabled=_=!(i[5].length>0),c(e,"class","comment-form svelte-3y2i6b"),c(e,"action",d=X+"/api/comment/"+i[0].id+"/edit"),c(e,"method","POST")},m(j,v){z(j,e,v),m(e,t),be(t,i[5]),i[14](t),m(e,s),m(e,l),m(l,a),m(l,r),m(e,u),m(e,n),m(n,o),m(n,f),E||(p=[K(t,"input",i[13]),K(l,"click",pe(i[7])),K(e,"submit",pe(i[8]))],E=!0)},p(j,v){v&32&&t.value!==j[5]&&be(t,j[5]),v&32&&h!==(h=qe(j[5].length>0?"":"disabled")+" svelte-3y2i6b")&&c(n,"class",h),v&32&&_!==(_=!(j[5].length>0))&&(n.disabled=_),v&1&&d!==(d=X+"/api/comment/"+j[0].id+"/edit")&&c(e,"action",d)},d(j){j&&g(e),i[14](null),E=!1,Oe(p)}}}function Ke(i){let e,t,s,l,a,r,u=i[3]&&Qe(i);return{c(){e=b("button"),t=b("i"),s=T(),u&&u.c(),l=ue(),this.h()},l(n){e=k(n,"BUTTON",{class:!0});var o=I(e);t=k(o,"I",{class:!0}),I(t).forEach(g),o.forEach(g),s=O(n),u&&u.l(n),l=ue(),this.h()},h(){c(t,"class","fa-solid fa-ellipsis-vertical fa-lg svelte-3y2i6b"),c(e,"class","comment-button svelte-3y2i6b")},m(n,o){z(n,e,o),m(e,t),z(n,s,o),u&&u.m(n,o),z(n,l,o),a||(r=K(e,"click",i[15]),a=!0)},p(n,o){n[3]?u?u.p(n,o):(u=Qe(n),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null)},d(n){n&&g(e),n&&g(s),u&&u.d(n),n&&g(l),a=!1,r()}}}function Qe(i){let e,t,s,l,a,r,u,n=i[1].username===i[0].author&&We(i);return{c(){e=b("ul"),n&&n.c(),t=T(),s=b("li"),l=b("i"),a=P(`\r
					Delete`),this.h()},l(o){e=k(o,"UL",{class:!0});var f=I(e);n&&n.l(f),t=O(f),s=k(f,"LI",{class:!0});var h=I(s);l=k(h,"I",{class:!0}),I(l).forEach(g),a=S(h,`\r
					Delete`),h.forEach(g),f.forEach(g),this.h()},h(){c(l,"class","fa-solid fa-square-minus svelte-3y2i6b"),c(s,"class","svelte-3y2i6b"),c(e,"class","svelte-3y2i6b")},m(o,f){z(o,e,f),n&&n.m(e,null),m(e,t),m(e,s),m(s,l),m(s,a),r||(u=[K(s,"mousedown",i[9]),lt(it.call(null,e)),K(e,"outclick",i[16])],r=!0)},p(o,f){o[1].username===o[0].author?n?n.p(o,f):(n=We(o),n.c(),n.m(e,t)):n&&(n.d(1),n=null)},d(o){o&&g(e),n&&n.d(),r=!1,Oe(u)}}}function We(i){let e,t,s,l,a;return{c(){e=b("li"),t=b("i"),s=P(`\r
						Edit`),this.h()},l(r){e=k(r,"LI",{class:!0});var u=I(e);t=k(u,"I",{class:!0}),I(t).forEach(g),s=S(u,`\r
						Edit`),u.forEach(g),this.h()},h(){c(t,"class","fa-solid fa-pen svelte-3y2i6b"),c(e,"class","svelte-3y2i6b")},m(r,u){z(r,e,u),m(e,t),m(e,s),l||(a=K(e,"mousedown",i[6]),l=!0)},p:ae,d(r){r&&g(e),l=!1,a()}}}function St(i){let e,t,s,l,a,r,u,n,o,f=i[0].author+"",h,_,d,E,p=ke(i[0].createdAt)+"",j,v,$,w,y,M,C,D,U=i[0].edit&&Je();function Y(V,B){return V[4]?Pt:Nt}let Q=Y(i),J=Q(i);const W=i[12].default,H=Ee(W,i,i[11],null);let L=i[1]&&(i[1].username===i[0].author||i[1].username===i[0].receiver||i[1].role!==Ve.EDITOR)&&Ke(i);return{c(){e=b("div"),t=b("a"),s=b("img"),u=T(),n=b("div"),o=b("a"),h=P(f),d=P(`\r
		●\r
		`),E=b("p"),j=P(p),v=T(),U&&U.c(),$=T(),J.c(),w=T(),y=b("div"),H&&H.c(),M=T(),C=b("div"),L&&L.c(),this.h()},l(V){e=k(V,"DIV",{class:!0});var B=I(e);t=k(B,"A",{class:!0,href:!0});var ve=I(t);s=k(ve,"IMG",{src:!0,alt:!0,class:!0}),ve.forEach(g),u=O(B),n=k(B,"DIV",{class:!0});var F=I(n);o=k(F,"A",{href:!0,class:!0});var G=I(o);h=S(G,f),G.forEach(g),d=S(F,`\r
		●\r
		`),E=k(F,"P",{});var Ce=I(E);j=S(Ce,p),Ce.forEach(g),v=O(F),U&&U.l(F),F.forEach(g),$=O(B),J.l(B),w=O(B),y=k(B,"DIV",{class:!0});var de=I(y);H&&H.l(de),de.forEach(g),M=O(B),C=k(B,"DIV",{class:!0});var le=I(C);L&&L.l(le),le.forEach(g),B.forEach(g),this.h()},h(){_e(s.src,l=X+"/uploads/avatars/"+i[0].avatar)||c(s,"src",l),c(s,"alt",a=i[0].author),c(s,"class","svelte-3y2i6b"),c(t,"class","comment-avatar svelte-3y2i6b"),c(t,"href",r="/user/"+i[0].author),c(o,"href",_="/user/"+i[0].author),c(o,"class","svelte-3y2i6b"),c(n,"class","comment-author svelte-3y2i6b"),c(y,"class","svelte-3y2i6b"),c(C,"class","comment-options svelte-3y2i6b"),c(e,"class","comment svelte-3y2i6b")},m(V,B){z(V,e,B),m(e,t),m(t,s),m(e,u),m(e,n),m(n,o),m(o,h),m(n,d),m(n,E),m(E,j),m(n,v),U&&U.m(n,null),m(e,$),J.m(e,null),m(e,w),m(e,y),H&&H.m(y,null),m(e,M),m(e,C),L&&L.m(C,null),D=!0},p(V,[B]){(!D||B&1&&!_e(s.src,l=X+"/uploads/avatars/"+V[0].avatar))&&c(s,"src",l),(!D||B&1&&a!==(a=V[0].author))&&c(s,"alt",a),(!D||B&1&&r!==(r="/user/"+V[0].author))&&c(t,"href",r),(!D||B&1)&&f!==(f=V[0].author+"")&&ne(h,f),(!D||B&1&&_!==(_="/user/"+V[0].author))&&c(o,"href",_),(!D||B&1)&&p!==(p=ke(V[0].createdAt)+"")&&ne(j,p),V[0].edit?U||(U=Je(),U.c(),U.m(n,null)):U&&(U.d(1),U=null),Q===(Q=Y(V))&&J?J.p(V,B):(J.d(1),J=Q(V),J&&(J.c(),J.m(e,w))),H&&H.p&&(!D||B&2048)&&je(H,W,V,V[11],D?De(W,V[11],B,null):$e(V[11]),null),V[1]&&(V[1].username===V[0].author||V[1].username===V[0].receiver||V[1].role!==Ve.EDITOR)?L?L.p(V,B):(L=Ke(V),L.c(),L.m(C,null)):L&&(L.d(1),L=null)},i(V){D||(N(H,V),D=!0)},o(V){R(H,V),D=!1},d(V){V&&g(e),U&&U.d(),J.d(),H&&H.d(V),L&&L.d()}}}function zt(i,e,t){let{$$slots:s={},$$scope:l}=e,{comment:a}=e,{comments:r}=e,{user:u}=e,n,o=!1,f=!1,h=a.comment;async function _(){t(4,f=!0),t(3,o=!1),n.focus()}async function d(){t(4,f=!1),t(5,h=a.comment),n.blur()}async function E(){t(4,f=!1),t(0,a.edit=!0,a),t(0,a.comment=h,a),Se(this)}async function p(){t(3,o=!1),t(10,r=r.filter(({id:y})=>y!==a.id)),await Pe({method:"DELETE",url:`${X}/api/comment/${a.id}`,withCredentials:!0})}function j(){h=this.value,t(5,h)}function v(y){Z[y?"unshift":"push"](()=>{n=y,t(2,n)})}const $=()=>t(3,o=!o),w=()=>t(3,o=!1);return i.$$set=y=>{"comment"in y&&t(0,a=y.comment),"comments"in y&&t(10,r=y.comments),"user"in y&&t(1,u=y.user),"$$scope"in y&&t(11,l=y.$$scope)},[a,u,n,o,f,h,_,d,E,p,r,l,s,j,v,$,w]}class Ut extends fe{constructor(e){super(),ce(this,e,zt,St,me,{comment:0,comments:10,user:1})}}function Bt(i){let e,t,s,l,a,r,u=i[0].title+"",n,o,f,h=i[0].author+"",_,d,E,p=i[0].views+"",j,v,$=ke(i[0].createdAt)+"",w,y,M;return{c(){e=b("a"),t=b("img"),a=T(),r=b("h2"),n=P(u),o=T(),f=b("p"),_=P(h),d=T(),E=b("div"),j=P(p),v=P(" views ● "),w=P($),this.h()},l(C){e=k(C,"A",{href:!0,title:!0,class:!0});var D=I(e);t=k(D,"IMG",{src:!0,alt:!0,class:!0}),a=O(D),r=k(D,"H2",{class:!0});var U=I(r);n=S(U,u),U.forEach(g),o=O(D),f=k(D,"P",{class:!0});var Y=I(f);_=S(Y,h),Y.forEach(g),d=O(D),E=k(D,"DIV",{class:!0});var Q=I(E);j=S(Q,p),v=S(Q," views ● "),w=S(Q,$),Q.forEach(g),D.forEach(g),this.h()},h(){_e(t.src,s=X+"/uploads/"+i[0].filename)||c(t,"src",s),c(t,"alt",l=i[0].title),c(t,"class","svelte-18hblro"),c(r,"class","svelte-18hblro"),c(f,"class","svelte-18hblro"),c(E,"class","svelte-18hblro"),c(e,"href",y="/gallery/"+i[0].id),c(e,"title",M=i[0].title),c(e,"class","svelte-18hblro")},m(C,D){z(C,e,D),m(e,t),m(e,a),m(e,r),m(r,n),m(e,o),m(e,f),m(f,_),m(e,d),m(e,E),m(E,j),m(E,v),m(E,w)},p(C,[D]){D&1&&!_e(t.src,s=X+"/uploads/"+C[0].filename)&&c(t,"src",s),D&1&&l!==(l=C[0].title)&&c(t,"alt",l),D&1&&u!==(u=C[0].title+"")&&ne(n,u),D&1&&h!==(h=C[0].author+"")&&ne(_,h),D&1&&p!==(p=C[0].views+"")&&ne(j,p),D&1&&$!==($=ke(C[0].createdAt)+"")&&ne(w,$),D&1&&y!==(y="/gallery/"+C[0].id)&&c(e,"href",y),D&1&&M!==(M=C[0].title)&&c(e,"title",M)},i:ae,o:ae,d(C){C&&g(e)}}}function Rt(i,e,t){let{image:s}=e;return i.$$set=l=>{"image"in l&&t(0,s=l.image)},[s]}class Mt extends fe{constructor(e){super(),ce(this,e,Rt,Bt,me,{image:0})}}function qt(i){let e;return{c(){e=b("i"),this.h()},l(t){e=k(t,"I",{class:!0}),I(e).forEach(g),this.h()},h(){c(e,"class","fa-solid fa-eye-slash")},m(t,s){z(t,e,s)},d(t){t&&g(e)}}}function Lt(i){let e;return{c(){e=b("i"),this.h()},l(t){e=k(t,"I",{class:!0}),I(e).forEach(g),this.h()},h(){c(e,"class","fa-solid fa-eye")},m(t,s){z(t,e,s)},d(t){t&&g(e)}}}function Ht(i){let e,t,s,l,a,r,u,n,o,f,h,_,d,E,p,j,v,$,w;function y(D,U){return D[0].isPublic?Lt:qt}let M=y(i),C=M(i);return{c(){e=b("ul"),t=b("a"),s=b("li"),l=P("Edit"),a=T(),r=b("i"),u=T(),n=b("a"),o=b("li"),f=P("Public"),h=T(),C.c(),_=T(),d=b("a"),E=b("li"),p=P("Delete"),j=T(),v=b("i"),this.h()},l(D){e=k(D,"UL",{class:!0});var U=I(e);t=k(U,"A",{href:!0,class:!0});var Y=I(t);s=k(Y,"LI",{});var Q=I(s);l=S(Q,"Edit"),Q.forEach(g),a=O(Y),r=k(Y,"I",{class:!0}),I(r).forEach(g),Y.forEach(g),u=O(U),n=k(U,"A",{href:!0,class:!0});var J=I(n);o=k(J,"LI",{});var W=I(o);f=S(W,"Public"),W.forEach(g),h=O(J),C.l(J),J.forEach(g),_=O(U),d=k(U,"A",{href:!0,class:!0});var H=I(d);E=k(H,"LI",{});var L=I(E);p=S(L,"Delete"),L.forEach(g),j=O(H),v=k(H,"I",{class:!0}),I(v).forEach(g),H.forEach(g),U.forEach(g),this.h()},h(){c(r,"class","fa-solid fa-pen"),c(t,"href","#edit"),c(t,"class","svelte-1jhluf3"),c(n,"href","#placeholder"),c(n,"class","svelte-1jhluf3"),c(v,"class","fa-solid fa-delete-left"),c(d,"href","#placeholder"),c(d,"class","svelte-1jhluf3"),c(e,"class","svelte-1jhluf3")},m(D,U){z(D,e,U),m(e,t),m(t,s),m(s,l),m(t,a),m(t,r),m(e,u),m(e,n),m(n,o),m(o,f),m(n,h),C.m(n,null),m(e,_),m(e,d),m(d,E),m(E,p),m(d,j),m(d,v),$||(w=[K(t,"click",i[2]),K(n,"click",pe(i[3])),K(d,"click",pe(i[4])),lt(it.call(null,e)),K(e,"outclick",i[6])],$=!0)},p(D,[U]){M!==(M=y(D))&&(C.d(1),C=M(D),C&&(C.c(),C.m(n,null)))},i:ae,o:ae,d(D){D&&g(e),C.d(),$=!1,Oe(w)}}}function Ft(i,e,t){let{image:s}=e,{visible:l}=e,{description:a}=e;const r=()=>{t(1,l=!1),t(5,a=!0)},u=async()=>{t(1,l=!1),await Pe({method:"POST",url:`${X}/api/image/${s.id}/public`,withCredentials:!0}),t(0,s.isPublic=!s.isPublic,s)},n=async()=>{t(1,l=!1),await Pe({method:"DELETE",url:`${X}/api/image/${s.id}`,withCredentials:!0}),window.location.href="/"},o=()=>t(1,l=!1);return i.$$set=f=>{"image"in f&&t(0,s=f.image),"visible"in f&&t(1,l=f.visible),"description"in f&&t(5,a=f.description)},[s,l,r,u,n,a,o]}class Gt extends fe{constructor(e){super(),ce(this,e,Ft,Ht,me,{image:0,visible:1,description:5})}}function Ne(i){return i.favorites!==void 0}function Ye(i){return i.comment!==void 0}function Xt(i){let e,t,s,l,a,r,u;return{c(){e=b("div"),t=b("i"),l=T(),a=P(i[3]),this.h()},l(n){e=k(n,"DIV",{class:!0});var o=I(e);t=k(o,"I",{class:!0}),I(t).forEach(g),l=O(o),a=S(o,i[3]),o.forEach(g),this.h()},h(){c(t,"class",s="fa-solid "+i[4]()+" "+(i[1]?i[2]:"")+" svelte-xdj7pf"),c(e,"class","svelte-xdj7pf")},m(n,o){z(n,e,o),m(e,t),m(e,l),m(e,a),r||(u=K(t,"mousedown",function(){ot(i[0]==="fav"?i[6]:i[5])&&(i[0]==="fav"?i[6]:i[5]).apply(this,arguments)}),r=!0)},p(n,[o]){i=n,o&6&&s!==(s="fa-solid "+i[4]()+" "+(i[1]?i[2]:"")+" svelte-xdj7pf")&&c(t,"class",s),o&8&&ne(a,i[3])},i:ae,o:ae,d(n){n&&g(e),r=!1,u()}}}function Jt(i,e,t){let{user:s}=e,{object:l}=e,{id:a="like"}=e,r=f(),u=h(),n=_();function o(){return a==="like"?"fa-thumbs-up":a==="dislike"?"fa-thumbs-down":"fa-star"}function f(){return Ne(l)&&a==="fav"?l.favorites.includes(s==null?void 0:s.username):a==="like"?l.likes.includes(s==null?void 0:s.username):l.dislikes.includes(s==null?void 0:s.username)}function h(){return Ye(l)?"grey":"selected"}function _(){return Ne(l)&&a==="fav"?l.favorites.length:a==="like"?l.likes.length:l.dislikes.length}async function d(){if(s){let p="image";Ye(l)&&(p="comment");const j=`${X}/api/${p}/${l.id}/like`,{likes:v,dislikes:$}=await Le(j,a);t(7,l.likes=v,l),t(7,l.dislikes=$,l)}}async function E(){if(s&&Ne(l)){const p=`${X}/api/image/${l.id}/favorite`,{favorites:j}=await Le(p,a);j&&t(7,l.favorites=j,l)}}return rt(()=>{t(1,r=f()),t(2,u=h()),t(3,n=_())}),i.$$set=p=>{"user"in p&&t(8,s=p.user),"object"in p&&t(7,l=p.object),"id"in p&&t(0,a=p.id)},[a,r,u,n,o,d,E,l,s]}class Te extends fe{constructor(e){super(),ce(this,e,Jt,Xt,me,{user:8,object:7,id:0})}}function Ze(i,e,t){const s=i.slice();return s[16]=e[t],s[17]=e,s[18]=t,s}function xe(i,e,t){const s=i.slice();return s[19]=e[t],s}function et(i){let e,t,s,l,a;function r(f){i[6](f)}function u(f){i[7](f)}function n(f){i[8](f)}let o={};return i[0].image!==void 0&&(o.image=i[0].image),i[1]!==void 0&&(o.visible=i[1]),i[2]!==void 0&&(o.description=i[2]),e=new Gt({props:o}),Z.push(()=>oe(e,"image",r)),Z.push(()=>oe(e,"visible",u)),Z.push(()=>oe(e,"description",n)),{c(){x(e.$$.fragment)},l(f){ee(e.$$.fragment,f)},m(f,h){te(e,f,h),a=!0},p(f,h){const _={};!t&&h&1&&(t=!0,_.image=f[0].image,re(()=>t=!1)),!s&&h&2&&(s=!0,_.visible=f[1],re(()=>s=!1)),!l&&h&4&&(l=!0,_.description=f[2],re(()=>l=!1)),e.$set(_)},i(f){a||(N(e.$$.fragment,f),a=!0)},o(f){R(e.$$.fragment,f),a=!1},d(f){se(e,f)}}}function Kt(i){let e,t,s=i[1]&&et(i);return{c(){s&&s.c(),e=ue()},l(l){s&&s.l(l),e=ue()},m(l,a){s&&s.m(l,a),z(l,e,a),t=!0},p(l,a){l[1]?s?(s.p(l,a),a&2&&N(s,1)):(s=et(l),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(Ie(),R(s,1,1,()=>{s=null}),we())},i(l){t||(N(s),t=!0)},o(l){R(s),t=!1},d(l){s&&s.d(l),l&&g(e)}}}function Qt(i){let e,t,s,l,a,r,u,n,o,f;function h(v){i[3](v)}let _={user:i[0].user};i[0].image!==void 0&&(_.object=i[0].image),t=new Te({props:_}),Z.push(()=>oe(t,"object",h));function d(v){i[4](v)}let E={user:i[0].user,id:"dislike"};i[0].image!==void 0&&(E.object=i[0].image),a=new Te({props:E}),Z.push(()=>oe(a,"object",d));function p(v){i[5](v)}let j={user:i[0].user,id:"fav"};return i[0].image!==void 0&&(j.object=i[0].image),n=new Te({props:j}),Z.push(()=>oe(n,"object",p)),{c(){e=b("div"),x(t.$$.fragment),l=T(),x(a.$$.fragment),u=T(),x(n.$$.fragment),this.h()},l(v){e=k(v,"DIV",{class:!0,slot:!0});var $=I(e);ee(t.$$.fragment,$),l=O($),ee(a.$$.fragment,$),u=O($),ee(n.$$.fragment,$),$.forEach(g),this.h()},h(){c(e,"class","image-stats svelte-2mhczw"),c(e,"slot","assessment")},m(v,$){z(v,e,$),te(t,e,null),m(e,l),te(a,e,null),m(e,u),te(n,e,null),f=!0},p(v,$){const w={};$&1&&(w.user=v[0].user),!s&&$&1&&(s=!0,w.object=v[0].image,re(()=>s=!1)),t.$set(w);const y={};$&1&&(y.user=v[0].user),!r&&$&1&&(r=!0,y.object=v[0].image,re(()=>r=!1)),a.$set(y);const M={};$&1&&(M.user=v[0].user),!o&&$&1&&(o=!0,M.object=v[0].image,re(()=>o=!1)),n.$set(M)},i(v){f||(N(t.$$.fragment,v),N(a.$$.fragment,v),N(n.$$.fragment,v),f=!0)},o(v){R(t.$$.fragment,v),R(a.$$.fragment,v),R(n.$$.fragment,v),f=!1},d(v){v&&g(e),se(t),se(a),se(n)}}}function tt(i){let e,t;return e=new Mt({props:{image:i[19]}}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,l){te(e,s,l),t=!0},p(s,l){const a={};l&1&&(a.image=s[19]),e.$set(a)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Wt(i){let e,t,s=i[0].sidebar,l=[];for(let r=0;r<s.length;r+=1)l[r]=tt(xe(i,s,r));const a=r=>R(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ue()},l(r){for(let u=0;u<l.length;u+=1)l[u].l(r);e=ue()},m(r,u){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(r,u);z(r,e,u),t=!0},p(r,u){if(u&1){s=r[0].sidebar;let n;for(n=0;n<s.length;n+=1){const o=xe(r,s,n);l[n]?(l[n].p(o,u),N(l[n],1)):(l[n]=tt(o),l[n].c(),N(l[n],1),l[n].m(e.parentNode,e))}for(Ie(),n=s.length;n<l.length;n+=1)a(n);we()}},i(r){if(!t){for(let u=0;u<s.length;u+=1)N(l[u]);t=!0}},o(r){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)R(l[u]);t=!1},d(r){ut(l,r),r&&g(e)}}}function Yt(i){let e,t;return e=new mt({props:{className:"image-sidebar",$$slots:{default:[Wt]},$$scope:{ctx:i}}}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,l){te(e,s,l),t=!0},p(s,l){const a={};l&4194305&&(a.$$scope={dirty:l,ctx:s}),e.$set(a)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Zt(i){let e,t;return e=new Dt({}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,l){te(e,s,l),t=!0},p:ae,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function xt(i){let e,t,s;function l(r){i[11](r)}let a={imageId:i[0].image.id,avatar:i[0].user.avatar};return i[0].comments!==void 0&&(a.comments=i[0].comments),e=new Ot({props:a}),Z.push(()=>oe(e,"comments",l)),{c(){x(e.$$.fragment)},l(r){ee(e.$$.fragment,r)},m(r,u){te(e,r,u),s=!0},p(r,u){const n={};u&1&&(n.imageId=r[0].image.id),u&1&&(n.avatar=r[0].user.avatar),!t&&u&1&&(t=!0,n.comments=r[0].comments,re(()=>t=!1)),e.$set(n)},i(r){s||(N(e.$$.fragment,r),s=!0)},o(r){R(e.$$.fragment,r),s=!1},d(r){se(e,r)}}}function es(i){let e,t,s,l,a,r,u;function n(_){i[12](_,i[16],i[17],i[18])}let o={user:i[0].user};i[16]!==void 0&&(o.object=i[16]),e=new Te({props:o}),Z.push(()=>oe(e,"object",n));function f(_){i[13](_,i[16],i[17],i[18])}let h={user:i[0].user,id:"dislike"};return i[16]!==void 0&&(h.object=i[16]),l=new Te({props:h}),Z.push(()=>oe(l,"object",f)),{c(){x(e.$$.fragment),s=T(),x(l.$$.fragment),r=T()},l(_){ee(e.$$.fragment,_),s=O(_),ee(l.$$.fragment,_),r=O(_)},m(_,d){te(e,_,d),z(_,s,d),te(l,_,d),z(_,r,d),u=!0},p(_,d){i=_;const E={};d&1&&(E.user=i[0].user),!t&&d&1&&(t=!0,E.object=i[16],re(()=>t=!1)),e.$set(E);const p={};d&1&&(p.user=i[0].user),!a&&d&1&&(a=!0,p.object=i[16],re(()=>a=!1)),l.$set(p)},i(_){u||(N(e.$$.fragment,_),N(l.$$.fragment,_),u=!0)},o(_){R(e.$$.fragment,_),R(l.$$.fragment,_),u=!1},d(_){se(e,_),_&&g(s),se(l,_),_&&g(r)}}}function st(i,e){let t,s,l,a,r;function u(f){e[14](f)}function n(f){e[15](f,e[16],e[17],e[18])}let o={user:e[0].user,$$slots:{default:[es]},$$scope:{ctx:e}};return e[0].comments!==void 0&&(o.comments=e[0].comments),e[16]!==void 0&&(o.comment=e[16]),s=new Ut({props:o}),Z.push(()=>oe(s,"comments",u)),Z.push(()=>oe(s,"comment",n)),{key:i,first:null,c(){t=ue(),x(s.$$.fragment),this.h()},l(f){t=ue(),ee(s.$$.fragment,f),this.h()},h(){this.first=t},m(f,h){z(f,t,h),te(s,f,h),r=!0},p(f,h){e=f;const _={};h&1&&(_.user=e[0].user),h&4194305&&(_.$$scope={dirty:h,ctx:e}),!l&&h&1&&(l=!0,_.comments=e[0].comments,re(()=>l=!1)),!a&&h&1&&(a=!0,_.comment=e[16],re(()=>a=!1)),s.$set(_)},i(f){r||(N(s.$$.fragment,f),r=!0)},o(f){R(s.$$.fragment,f),r=!1},d(f){f&&g(t),se(s,f)}}}function ts(i){let e=[],t=new Map,s,l,a=i[0].comments;const r=u=>u[16].id;for(let u=0;u<a.length;u+=1){let n=Ze(i,a,u),o=r(n);t.set(o,e[u]=st(o,n))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();s=ue()},l(u){for(let n=0;n<e.length;n+=1)e[n].l(u);s=ue()},m(u,n){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(u,n);z(u,s,n),l=!0},p(u,n){n&1&&(a=u[0].comments,Ie(),e=ft(e,n,r,1,u,a,t,s.parentNode,ct,st,s,Ze),we())},i(u){if(!l){for(let n=0;n<a.length;n+=1)N(e[n]);l=!0}},o(u){for(let n=0;n<e.length;n+=1)R(e[n]);l=!1},d(u){for(let n=0;n<e.length;n+=1)e[n].d(u);u&&g(s)}}}function ss(i){let e,t,s,l,a;const r=[xt,Zt],u=[];function n(o,f){return o[0].user?0:1}return e=n(i),t=u[e]=r[e](i),l=new At({props:{totalComments:i[0].comments.length,$$slots:{default:[ts]},$$scope:{ctx:i}}}),{c(){t.c(),s=T(),x(l.$$.fragment)},l(o){t.l(o),s=O(o),ee(l.$$.fragment,o)},m(o,f){u[e].m(o,f),z(o,s,f),te(l,o,f),a=!0},p(o,f){let h=e;e=n(o),e===h?u[e].p(o,f):(Ie(),R(u[h],1,1,()=>{u[h]=null}),we(),t=u[e],t?t.p(o,f):(t=u[e]=r[e](o),t.c()),N(t,1),t.m(s.parentNode,s));const _={};f&1&&(_.totalComments=o[0].comments.length),f&4194305&&(_.$$scope={dirty:f,ctx:o}),l.$set(_)},i(o){a||(N(t),N(l.$$.fragment,o),a=!0)},o(o){R(t),R(l.$$.fragment,o),a=!1},d(o){u[e].d(o),o&&g(s),se(l,o)}}}function ls(i){let e,t,s,l,a,r,u,n,o;function f(d){i[9](d)}function h(d){i[10](d)}let _={image:i[0].image,user:i[0].user,$$slots:{assessment:[Qt],default:[Kt]},$$scope:{ctx:i}};return i[1]!==void 0&&(_.visible=i[1]),i[2]!==void 0&&(_.description=i[2]),t=new vt({props:_}),Z.push(()=>oe(t,"visible",f)),Z.push(()=>oe(t,"description",h)),r=new Et({props:{$$slots:{default:[Yt]},$$scope:{ctx:i}}}),n=new jt({props:{$$slots:{default:[ss]},$$scope:{ctx:i}}}),{c(){e=b("div"),x(t.$$.fragment),a=T(),x(r.$$.fragment),u=T(),x(n.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0});var E=I(e);ee(t.$$.fragment,E),a=O(E),ee(r.$$.fragment,E),u=O(E),ee(n.$$.fragment,E),E.forEach(g),this.h()},h(){c(e,"class","image-container svelte-2mhczw")},m(d,E){z(d,e,E),te(t,e,null),m(e,a),te(r,e,null),m(e,u),te(n,e,null),o=!0},p(d,[E]){const p={};E&1&&(p.image=d[0].image),E&1&&(p.user=d[0].user),E&4194311&&(p.$$scope={dirty:E,ctx:d}),!s&&E&2&&(s=!0,p.visible=d[1],re(()=>s=!1)),!l&&E&4&&(l=!0,p.description=d[2],re(()=>l=!1)),t.$set(p);const j={};E&4194305&&(j.$$scope={dirty:E,ctx:d}),r.$set(j);const v={};E&4194305&&(v.$$scope={dirty:E,ctx:d}),n.$set(v)},i(d){o||(N(t.$$.fragment,d),N(r.$$.fragment,d),N(n.$$.fragment,d),o=!0)},o(d){R(t.$$.fragment,d),R(r.$$.fragment,d),R(n.$$.fragment,d),o=!1},d(d){d&&g(e),se(t),se(r),se(n)}}}function is(i,e,t){let{data:s}=e,l=!1,a=!1;function r(w){i.$$.not_equal(s.image,w)&&(s.image=w,t(0,s))}function u(w){i.$$.not_equal(s.image,w)&&(s.image=w,t(0,s))}function n(w){i.$$.not_equal(s.image,w)&&(s.image=w,t(0,s))}function o(w){i.$$.not_equal(s.image,w)&&(s.image=w,t(0,s))}function f(w){l=w,t(1,l)}function h(w){a=w,t(2,a)}function _(w){l=w,t(1,l)}function d(w){a=w,t(2,a)}function E(w){i.$$.not_equal(s.comments,w)&&(s.comments=w,t(0,s))}function p(w,y,M,C){M[C]=w,t(0,s)}function j(w,y,M,C){M[C]=w,t(0,s)}function v(w){i.$$.not_equal(s.comments,w)&&(s.comments=w,t(0,s))}function $(w,y,M,C){M[C]=w,t(0,s)}return i.$$set=w=>{"data"in w&&t(0,s=w.data)},[s,l,a,r,u,n,o,f,h,_,d,E,p,j,v,$]}class _s extends fe{constructor(e){super(),ce(this,e,is,ls,me,{data:0})}}export{_s as default};
