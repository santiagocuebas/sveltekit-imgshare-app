import{S as se,i as le,s as ae,k as b,a as $,l as k,m as E,c as w,h as p,n as d,C as K,b as M,D as o,v as oe,d as z,f as fe,g as P,E as Re,q as R,e as Q,r as F,F as C,G as H,H as Ue,I as De,J as Le,K as Ve,L as Te,M as Me,N as Fe,u as Ee,O as Pe,P as ze,Q as Be,R as ye,T as Ce,U as Ge,V as qe,y as ce,z as ue,A as _e,B as he,W as Ye,w as He,X as Je,Y as Ke}from"../chunks/index.8bb6be9b.js";import{D as x}from"../chunks/config.36c6f35d.js";import{c as Oe}from"../chunks/click-outside.61d417da.js";import{a as Qe}from"../chunks/axios.707ed124.js";import{U as te}from"../chunks/enums.4774c07c.js";function We(r){let e,s,t,n,c,a,v,m,u,l,_,f,y,i=r[1]&&je(r);return{c(){e=b("div"),s=b("a"),t=R("Signin"),n=$(),c=b("a"),a=R("Signup"),v=$(),m=b("button"),u=b("i"),l=$(),i&&i.c(),_=Q(),this.h()},l(h){e=k(h,"DIV",{class:!0});var g=E(e);s=k(g,"A",{class:!0,href:!0});var S=E(s);t=F(S,"Signin"),S.forEach(p),n=w(g),c=k(g,"A",{class:!0,href:!0});var I=E(c);a=F(I,"Signup"),I.forEach(p),v=w(g),m=k(g,"BUTTON",{class:!0});var j=E(m);u=k(j,"I",{class:!0}),E(u).forEach(p),j.forEach(p),g.forEach(p),l=w(h),i&&i.l(h),_=Q(),this.h()},h(){d(s,"class","nav-signin svelte-1d0j6v1"),d(s,"href","/signin"),d(c,"class","nav-signup svelte-1d0j6v1"),d(c,"href","/signup"),d(u,"class","fa-solid fa-caret-down svelte-1d0j6v1"),d(m,"class","svelte-1d0j6v1"),d(e,"class","nav-sign svelte-1d0j6v1")},m(h,g){M(h,e,g),o(e,s),o(s,t),o(e,n),o(e,c),o(c,a),o(e,v),o(e,m),o(m,u),M(h,l,g),i&&i.m(h,g),M(h,_,g),f||(y=C(m,"click",r[5]),f=!0)},p(h,g){h[1]?i?i.p(h,g):(i=je(h),i.c(),i.m(_.parentNode,_)):i&&(i.d(1),i=null)},i:H,o:H,d(h){h&&p(e),h&&p(l),i&&i.d(h),h&&p(_),f=!1,y()}}}function Xe(r){let e,s,t,n,c,a,v;const m=r[3].default,u=Ue(m,r,r[2],null);return{c(){e=b("img"),n=$(),u&&u.c(),this.h()},l(l){e=k(l,"IMG",{id:!0,class:!0,src:!0,alt:!0}),n=w(l),u&&u.l(l),this.h()},h(){var l,_;d(e,"id","nav-avatar"),d(e,"class","nav-avatar svelte-1d0j6v1"),K(e.src,s=x+"/uploads/avatars/"+((l=r[0])==null?void 0:l.avatar))||d(e,"src",s),d(e,"alt",t=(_=r[0])==null?void 0:_.username)},m(l,_){M(l,e,_),M(l,n,_),u&&u.m(l,_),c=!0,a||(v=C(e,"click",r[4]),a=!0)},p(l,_){var f,y;(!c||_&1&&!K(e.src,s=x+"/uploads/avatars/"+((f=l[0])==null?void 0:f.avatar)))&&d(e,"src",s),(!c||_&1&&t!==(t=(y=l[0])==null?void 0:y.username))&&d(e,"alt",t),u&&u.p&&(!c||_&4)&&De(u,m,l,l[2],c?Ve(m,l[2],_,null):Le(l[2]),null)},i(l){c||(P(u,l),c=!0)},o(l){z(u,l),c=!1},d(l){l&&p(e),l&&p(n),u&&u.d(l),a=!1,v()}}}function je(r){let e,s,t,n,c,a,v,m,u,l,_,f,y,i;return{c(){e=b("ul"),s=b("a"),t=b("i"),n=$(),c=b("li"),a=R("Signin"),v=$(),m=b("a"),u=b("i"),l=$(),_=b("li"),f=R("Signup"),this.h()},l(h){e=k(h,"UL",{class:!0});var g=E(e);s=k(g,"A",{href:!0,class:!0});var S=E(s);t=k(S,"I",{class:!0}),E(t).forEach(p),n=w(S),c=k(S,"LI",{});var I=E(c);a=F(I,"Signin"),I.forEach(p),S.forEach(p),v=w(g),m=k(g,"A",{href:!0,class:!0});var j=E(m);u=k(j,"I",{class:!0}),E(u).forEach(p),l=w(j),_=k(j,"LI",{});var U=E(_);f=F(U,"Signup"),U.forEach(p),j.forEach(p),g.forEach(p),this.h()},h(){d(t,"class","fa-solid fa-right-to-bracket"),d(s,"href","/signin"),d(s,"class","svelte-1d0j6v1"),d(u,"class","fa-solid fa-right-to-bracket"),d(m,"href","/signup"),d(m,"class","svelte-1d0j6v1"),d(e,"class","nav-sign-list svelte-1d0j6v1")},m(h,g){M(h,e,g),o(e,s),o(s,t),o(s,n),o(s,c),o(c,a),o(e,v),o(e,m),o(m,u),o(m,l),o(m,_),o(_,f),y||(i=[C(s,"click",r[6]),C(m,"click",r[7]),Te(Oe.call(null,e)),C(e,"outclick",r[8])],y=!0)},p:H,d(h){h&&p(e),y=!1,Me(i)}}}function Ze(r){let e,s,t,n,c,a,v,m,u,l,_,f,y,i,h,g,S;const I=[Xe,We],j=[];function U(L,V){return L[0]?0:1}return h=U(r),g=j[h]=I[h](r),{c(){e=b("nav"),s=b("a"),t=b("img"),c=$(),a=b("img"),m=$(),u=b("form"),l=b("input"),_=$(),f=b("button"),y=b("i"),i=$(),g.c(),this.h()},l(L){e=k(L,"NAV",{class:!0});var V=E(e);s=k(V,"A",{class:!0,href:!0});var D=E(s);t=k(D,"IMG",{class:!0,src:!0,alt:!0}),c=w(D),a=k(D,"IMG",{class:!0,src:!0,alt:!0}),D.forEach(p),m=w(V),u=k(V,"FORM",{action:!0,class:!0});var B=E(u);l=k(B,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),_=w(B),f=k(B,"BUTTON",{class:!0});var J=E(f);y=k(J,"I",{class:!0}),E(y).forEach(p),J.forEach(p),B.forEach(p),i=w(V),g.l(V),V.forEach(p),this.h()},h(){d(t,"class","nav-tiny-logo svelte-1d0j6v1"),K(t.src,n="/tiny-logo.png")||d(t,"src",n),d(t,"alt",""),d(a,"class","nav-main-logo svelte-1d0j6v1"),K(a.src,v="/imgshare-logo.png")||d(a,"src",v),d(a,"alt",""),d(s,"class","nav-logo svelte-1d0j6v1"),d(s,"href","/"),d(l,"type","search"),d(l,"name","q"),d(l,"placeholder","Search"),d(l,"class","svelte-1d0j6v1"),d(y,"class","fa-solid fa-magnifying-glass"),d(f,"class","nav-button svelte-1d0j6v1"),d(u,"action","/search"),d(u,"class","svelte-1d0j6v1"),d(e,"class","svelte-1d0j6v1")},m(L,V){M(L,e,V),o(e,s),o(s,t),o(s,c),o(s,a),o(e,m),o(e,u),o(u,l),o(u,_),o(u,f),o(f,y),o(e,i),j[h].m(e,null),S=!0},p(L,[V]){let D=h;h=U(L),h===D?j[h].p(L,V):(oe(),z(j[D],1,1,()=>{j[D]=null}),fe(),g=j[h],g?g.p(L,V):(g=j[h]=I[h](L),g.c()),P(g,1),g.m(e,null))},i(L){S||(P(g),S=!0)},o(L){z(g),S=!1},d(L){L&&p(e),j[h].d()}}}function xe(r,e,s){let{$$slots:t={},$$scope:n}=e,{user:c}=e,a=!1;function v(f){Re.call(this,r,f)}const m=()=>s(1,a=!a),u=()=>s(1,a=!1),l=()=>s(1,a=!1),_=()=>s(1,a=!1);return r.$$set=f=>{"user"in f&&s(0,c=f.user),"$$scope"in f&&s(2,n=f.$$scope)},[c,a,n,t,v,m,u,l,_]}class et extends se{constructor(e){super(),le(this,e,xe,Ze,ae,{user:0})}}function Ie(r,e,s){const t=r.slice();return t[7]=e[s],t}function Ae(r){let e,s,t,n,c,a,v;return{c(){e=b("a"),s=b("i"),t=$(),n=b("li"),c=R("Admin"),this.h()},l(m){e=k(m,"A",{href:!0,class:!0});var u=E(e);s=k(u,"I",{class:!0}),E(s).forEach(p),t=w(u),n=k(u,"LI",{});var l=E(n);c=F(l,"Admin"),l.forEach(p),u.forEach(p),this.h()},h(){d(s,"class","fa-solid fa-user"),d(e,"href","/admin"),d(e,"class","svelte-1jp0sts")},m(m,u){M(m,e,u),o(e,s),o(e,t),o(e,n),o(n,c),a||(v=C(e,"click",r[4]),a=!0)},p:H,d(m){m&&p(e),a=!1,v()}}}function Ne(r,e){let s,t,n,c,a=e[7].name+"",v,m,u;return{key:r,first:null,c(){s=b("a"),t=b("i"),n=$(),c=b("li"),v=R(a),this.h()},l(l){s=k(l,"A",{href:!0,class:!0});var _=E(s);t=k(_,"I",{class:!0}),E(t).forEach(p),n=w(_),c=k(_,"LI",{});var f=E(c);v=F(f,a),f.forEach(p),_.forEach(p),this.h()},h(){d(t,"class",Be(e[7].className)+" svelte-1jp0sts"),d(s,"href",e[7].href),d(s,"class","svelte-1jp0sts"),this.first=s},m(l,_){M(l,s,_),o(s,t),o(s,n),o(s,c),o(c,v),m||(u=C(s,"click",e[5]),m=!0)},p(l,_){e=l},d(l){l&&p(s),m=!1,u()}}}function tt(r){var ve,pe,ge,be;let e,s,t,n,c,a,v,m,u=((ve=r[1])==null?void 0:ve.username)+"",l,_,f,y=((pe=r[1])==null?void 0:pe.email)+"",i,h,g,S,I,j,U=[],L=new Map,V,D,B,J,W,re,ie,de,T=(((ge=r[1])==null?void 0:ge.role)===te.ADMIN||((be=r[1])==null?void 0:be.role)===te.SUPER)&&Ae(r),ee=r[2];const me=A=>A[7].name;for(let A=0;A<ee.length;A+=1){let N=Ie(r,ee,A),O=me(N);L.set(O,U[A]=Ne(O,N))}return{c(){e=b("div"),s=b("div"),t=b("img"),a=$(),v=b("div"),m=b("h3"),l=R(u),_=$(),f=b("p"),i=R(y),h=$(),g=b("span"),S=$(),I=b("ul"),T&&T.c(),j=$();for(let A=0;A<U.length;A+=1)U[A].c();V=$(),D=b("a"),B=b("i"),J=$(),W=b("li"),re=R("Logout"),this.h()},l(A){e=k(A,"DIV",{class:!0});var N=E(e);s=k(N,"DIV",{class:!0});var O=E(s);t=k(O,"IMG",{src:!0,alt:!0,class:!0}),a=w(O),v=k(O,"DIV",{});var q=E(v);m=k(q,"H3",{class:!0});var X=E(m);l=F(X,u),X.forEach(p),_=w(q),f=k(q,"P",{class:!0});var Z=E(f);i=F(Z,y),Z.forEach(p),q.forEach(p),O.forEach(p),h=w(N),g=k(N,"SPAN",{class:!0}),E(g).forEach(p),S=w(N),I=k(N,"UL",{class:!0});var G=E(I);T&&T.l(G),j=w(G);for(let ne=0;ne<U.length;ne+=1)U[ne].l(G);V=w(G),D=k(G,"A",{href:!0,class:!0});var Y=E(D);B=k(Y,"I",{class:!0}),E(B).forEach(p),J=w(Y),W=k(Y,"LI",{});var ke=E(W);re=F(ke,"Logout"),ke.forEach(p),Y.forEach(p),G.forEach(p),N.forEach(p),this.h()},h(){var A,N;K(t.src,n=x+"/uploads/avatars/"+((A=r[1])==null?void 0:A.avatar))||d(t,"src",n),d(t,"alt",c=(N=r[1])==null?void 0:N.username),d(t,"class","svelte-1jp0sts"),d(m,"class","svelte-1jp0sts"),d(f,"class","svelte-1jp0sts"),d(s,"class","user-header svelte-1jp0sts"),d(g,"class","svelte-1jp0sts"),d(B,"class","fa-solid fa-right-from-bracket"),d(D,"href","/logout"),d(D,"class","svelte-1jp0sts"),d(I,"class","svelte-1jp0sts"),d(e,"class","user-list svelte-1jp0sts")},m(A,N){M(A,e,N),o(e,s),o(s,t),o(s,a),o(s,v),o(v,m),o(m,l),o(v,_),o(v,f),o(f,i),o(e,h),o(e,g),o(e,S),o(e,I),T&&T.m(I,null),o(I,j);for(let O=0;O<U.length;O+=1)U[O]&&U[O].m(I,null);o(I,V),o(I,D),o(D,B),o(D,J),o(D,W),o(W,re),ie||(de=[C(D,"click",Fe(r[3])),Te(Oe.call(null,e)),C(e,"outclick",r[6])],ie=!0)},p(A,[N]){var O,q,X,Z,G,Y;N&2&&!K(t.src,n=x+"/uploads/avatars/"+((O=A[1])==null?void 0:O.avatar))&&d(t,"src",n),N&2&&c!==(c=(q=A[1])==null?void 0:q.username)&&d(t,"alt",c),N&2&&u!==(u=((X=A[1])==null?void 0:X.username)+"")&&Ee(l,u),N&2&&y!==(y=((Z=A[1])==null?void 0:Z.email)+"")&&Ee(i,y),((G=A[1])==null?void 0:G.role)===te.ADMIN||((Y=A[1])==null?void 0:Y.role)===te.SUPER?T?T.p(A,N):(T=Ae(A),T.c(),T.m(I,j)):T&&(T.d(1),T=null),N&5&&(ee=A[2],U=Pe(U,N,me,1,A,ee,L,I,ze,Ne,V,Ie))},i:H,o:H,d(A){A&&p(e),T&&T.d();for(let N=0;N<U.length;N+=1)U[N].d();ie=!1,Me(de)}}}function st(r,e,s){let{user:t}=e,{visible:n}=e;const c=[{href:`/user/${t==null?void 0:t.username}/post`,className:"fa-regular fa-image",name:"Post"},{href:`/user/${t==null?void 0:t.username}/favorite`,className:"fa-regular fa-star",name:"Favorite"},{href:`/user/${t==null?void 0:t.username}/comment`,className:"fa-regular fa-message",name:"Comments"},{href:`/user/${t==null?void 0:t.username}/about`,className:"fa-regular fa-file",name:"About"},{href:`/user/${t==null?void 0:t.username}/upload`,className:"fa-solid fa-arrow-up-from-bracket",name:"Upload"},{href:`/user/${t==null?void 0:t.username}/settings`,className:"fa-solid fa-gear",name:"Settings"}];async function a(){(await Qe({method:"POST",url:x+"/api/auth/logout",withCredentials:!0}).then(_=>_.data)).redirect&&(window.location.href="/")}const v=()=>s(0,n=!1),m=()=>s(0,n=!1),u=()=>s(0,n=!1);return r.$$set=l=>{"user"in l&&s(1,t=l.user),"visible"in l&&s(0,n=l.visible)},[n,t,c,a,v,m,u]}class lt extends se{constructor(e){super(),le(this,e,st,tt,ae,{user:1,visible:0})}}function at(r){const e=r-1;return e*e*e+1}function Se(r,{delay:e=0,duration:s=400,easing:t=at,x:n=0,y:c=0,opacity:a=0}={}){const v=getComputedStyle(r),m=+v.opacity,u=v.transform==="none"?"":v.transform,l=m*(1-a),[_,f]=ye(n),[y,i]=ye(c);return{delay:e,duration:s,easing:t,css:(h,g)=>`
			transform: ${u} translate(${(1-h)*_}${f}, ${(1-h)*y}${i});
			opacity: ${m-l*g}`}}function rt(r){let e,s,t,n=new Date().getFullYear()+"",c,a,v,m,u,l,_,f,y,i,h,g,S;return{c(){e=b("footer"),s=b("div"),t=R("imgShare © "),c=R(n),a=$(),v=b("a"),m=R("About"),u=$(),l=b("a"),_=R("Terms"),f=$(),y=b("a"),i=R("Rules"),this.h()},l(I){e=k(I,"FOOTER",{class:!0});var j=E(e);s=k(j,"DIV",{class:!0});var U=E(s);t=F(U,"imgShare © "),c=F(U,n),U.forEach(p),a=w(j),v=k(j,"A",{href:!0,class:!0});var L=E(v);m=F(L,"About"),L.forEach(p),u=w(j),l=k(j,"A",{href:!0,class:!0});var V=E(l);_=F(V,"Terms"),V.forEach(p),f=w(j),y=k(j,"A",{href:!0,class:!0});var D=E(y);i=F(D,"Rules"),D.forEach(p),j.forEach(p),this.h()},h(){d(s,"class","svelte-zgee83"),d(v,"href","/about"),d(v,"class","svelte-zgee83"),d(l,"href","/terms"),d(l,"class","svelte-zgee83"),d(y,"href","/rules"),d(y,"class","svelte-zgee83"),d(e,"class","svelte-zgee83")},m(I,j){M(I,e,j),o(e,s),o(s,t),o(s,c),o(e,a),o(e,v),o(v,m),o(e,u),o(e,l),o(l,_),o(e,f),o(e,y),o(y,i),S=!0},p:H,i(I){S||(Ce(()=>{S&&(g&&g.end(1),h=Ge(e,Se,{y:50,duration:500}),h.start())}),S=!0)},o(I){h&&h.invalidate(),g=qe(e,Se,{y:50,duration:500}),S=!1},d(I){I&&p(e),I&&g&&g.end()}}}class it extends se{constructor(e){super(),le(this,e,null,rt,ae,{})}}function $e(r){let e,s,t;function n(a){r[6](a)}let c={user:r[0].user};return r[1]!==void 0&&(c.visible=r[1]),e=new lt({props:c}),He.push(()=>Je(e,"visible",n)),{c(){ce(e.$$.fragment)},l(a){ue(e.$$.fragment,a)},m(a,v){_e(e,a,v),t=!0},p(a,v){const m={};v&1&&(m.user=a[0].user),!s&&v&2&&(s=!0,m.visible=a[1],Ke(()=>s=!1)),e.$set(m)},i(a){t||(P(e.$$.fragment,a),t=!0)},o(a){z(e.$$.fragment,a),t=!1},d(a){he(e,a)}}}function nt(r){let e,s,t=r[1]&&$e(r);return{c(){t&&t.c(),e=Q()},l(n){t&&t.l(n),e=Q()},m(n,c){t&&t.m(n,c),M(n,e,c),s=!0},p(n,c){n[1]?t?(t.p(n,c),c&2&&P(t,1)):(t=$e(n),t.c(),P(t,1),t.m(e.parentNode,e)):t&&(oe(),z(t,1,1,()=>{t=null}),fe())},i(n){s||(P(t),s=!0)},o(n){z(t),s=!1},d(n){t&&t.d(n),n&&p(e)}}}function we(r){let e,s;return e=new it({}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){_e(e,t,n),s=!0},i(t){s||(P(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){he(e,t)}}}function ot(r){var y;let e,s,t,n,c=r[2]&&(r[3]==="/"||((y=r[3])==null?void 0:y.includes("/gallery"))),a,v,m,u;e=new et({props:{user:r[0].user,$$slots:{default:[nt]},$$scope:{ctx:r}}}),e.$on("click",r[7]);const l=r[5].default,_=Ue(l,r,r[8],null);let f=c&&we();return{c(){ce(e.$$.fragment),s=$(),t=b("div"),_&&_.c(),n=$(),f&&f.c(),a=Q(),this.h()},l(i){ue(e.$$.fragment,i),s=w(i),t=k(i,"DIV",{class:!0});var h=E(t);_&&_.l(h),h.forEach(p),n=w(i),f&&f.l(i),a=Q(),this.h()},h(){d(t,"class","main-container")},m(i,h){_e(e,i,h),M(i,s,h),M(i,t,h),_&&_.m(t,null),M(i,n,h),f&&f.m(i,h),M(i,a,h),v=!0,m||(u=C(t,"wheel",r[4]),m=!0)},p(i,[h]){var S;const g={};h&1&&(g.user=i[0].user),h&259&&(g.$$scope={dirty:h,ctx:i}),e.$set(g),_&&_.p&&(!v||h&256)&&De(_,l,i,i[8],v?Ve(l,i[8],h,null):Le(i[8]),null),h&12&&(c=i[2]&&(i[3]==="/"||((S=i[3])==null?void 0:S.includes("/gallery")))),c?f?h&12&&P(f,1):(f=we(),f.c(),P(f,1),f.m(a.parentNode,a)):f&&(oe(),z(f,1,1,()=>{f=null}),fe())},i(i){v||(P(e.$$.fragment,i),P(_,i),P(f),v=!0)},o(i){z(e.$$.fragment,i),z(_,i),z(f),v=!1},d(i){he(e,i),i&&p(s),i&&p(t),_&&_.d(i),i&&p(n),f&&f.d(i),i&&p(a),m=!1,u()}}}function ft(r,e,s){let{$$slots:t={},$$scope:n}=e,{data:c}=e,a=!1,v=!0,m;async function u(f){f.deltaY<=0?s(2,v=!0):s(2,v=!1)}Ye(()=>s(3,m=window.location.pathname));function l(f){a=f,s(1,a)}const _=()=>s(1,a=!a);return r.$$set=f=>{"data"in f&&s(0,c=f.data),"$$scope"in f&&s(8,n=f.$$scope)},[c,a,v,m,u,t,l,_,n]}class mt extends se{constructor(e){super(),le(this,e,ft,ot,ae,{data:0})}}export{mt as default};
