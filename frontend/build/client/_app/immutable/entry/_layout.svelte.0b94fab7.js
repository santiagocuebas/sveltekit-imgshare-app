import{S as se,i as le,s as ae,k as b,a as $,l as k,m as E,c as w,h as p,n as h,C as K,b as M,D as f,v as oe,d as z,f as fe,g as P,E as Re,q as R,e as Q,r as F,F as C,G as H,H as Ue,I as De,J as Le,K as Te,L as Ve,M as Me,N as Fe,u as Ee,O as Pe,P as ze,Q as Be,R as ye,T as Ce,U as Ge,V as qe,y as ce,z as ue,A as _e,B as he,W as Ye,w as He,X as Je,Y as Ke}from"../chunks/index.8bb6be9b.js";import{D as x}from"../chunks/config.6d74d3ec.js";import{c as Oe}from"../chunks/click-outside.61d417da.js";import{a as Qe}from"../chunks/axios.707ed124.js";import{U as te}from"../chunks/enums.4774c07c.js";function We(i){let e,s,t,n,c,a,v,m,u,l,d,o,y,r=i[1]&&je(i);return{c(){e=b("div"),s=b("a"),t=R("Signin"),n=$(),c=b("a"),a=R("Signup"),v=$(),m=b("button"),u=b("i"),l=$(),r&&r.c(),d=Q(),this.h()},l(_){e=k(_,"DIV",{class:!0});var g=E(e);s=k(g,"A",{class:!0,href:!0});var S=E(s);t=F(S,"Signin"),S.forEach(p),n=w(g),c=k(g,"A",{class:!0,href:!0});var I=E(c);a=F(I,"Signup"),I.forEach(p),v=w(g),m=k(g,"BUTTON",{class:!0});var j=E(m);u=k(j,"I",{class:!0}),E(u).forEach(p),j.forEach(p),g.forEach(p),l=w(_),r&&r.l(_),d=Q(),this.h()},h(){h(s,"class","nav-signin svelte-1d0j6v1"),h(s,"href","/signin"),h(c,"class","nav-signup svelte-1d0j6v1"),h(c,"href","/signup"),h(u,"class","fa-solid fa-caret-down svelte-1d0j6v1"),h(m,"class","svelte-1d0j6v1"),h(e,"class","nav-sign svelte-1d0j6v1")},m(_,g){M(_,e,g),f(e,s),f(s,t),f(e,n),f(e,c),f(c,a),f(e,v),f(e,m),f(m,u),M(_,l,g),r&&r.m(_,g),M(_,d,g),o||(y=C(m,"click",i[5]),o=!0)},p(_,g){_[1]?r?r.p(_,g):(r=je(_),r.c(),r.m(d.parentNode,d)):r&&(r.d(1),r=null)},i:H,o:H,d(_){_&&p(e),_&&p(l),r&&r.d(_),_&&p(d),o=!1,y()}}}function Xe(i){let e,s,t,n,c,a,v;const m=i[3].default,u=Ue(m,i,i[2],null);return{c(){e=b("img"),n=$(),u&&u.c(),this.h()},l(l){e=k(l,"IMG",{id:!0,class:!0,src:!0,alt:!0}),n=w(l),u&&u.l(l),this.h()},h(){var l,d;h(e,"id","nav-avatar"),h(e,"class","nav-avatar svelte-1d0j6v1"),K(e.src,s=x+"/uploads/avatars/"+((l=i[0])==null?void 0:l.avatar))||h(e,"src",s),h(e,"alt",t=(d=i[0])==null?void 0:d.username)},m(l,d){M(l,e,d),M(l,n,d),u&&u.m(l,d),c=!0,a||(v=C(e,"click",i[4]),a=!0)},p(l,d){var o,y;(!c||d&1&&!K(e.src,s=x+"/uploads/avatars/"+((o=l[0])==null?void 0:o.avatar)))&&h(e,"src",s),(!c||d&1&&t!==(t=(y=l[0])==null?void 0:y.username))&&h(e,"alt",t),u&&u.p&&(!c||d&4)&&De(u,m,l,l[2],c?Te(m,l[2],d,null):Le(l[2]),null)},i(l){c||(P(u,l),c=!0)},o(l){z(u,l),c=!1},d(l){l&&p(e),l&&p(n),u&&u.d(l),a=!1,v()}}}function je(i){let e,s,t,n,c,a,v,m,u,l,d,o,y,r;return{c(){e=b("ul"),s=b("a"),t=b("i"),n=$(),c=b("li"),a=R("Signin"),v=$(),m=b("a"),u=b("i"),l=$(),d=b("li"),o=R("Signup"),this.h()},l(_){e=k(_,"UL",{class:!0});var g=E(e);s=k(g,"A",{href:!0,class:!0});var S=E(s);t=k(S,"I",{class:!0}),E(t).forEach(p),n=w(S),c=k(S,"LI",{});var I=E(c);a=F(I,"Signin"),I.forEach(p),S.forEach(p),v=w(g),m=k(g,"A",{href:!0,class:!0});var j=E(m);u=k(j,"I",{class:!0}),E(u).forEach(p),l=w(j),d=k(j,"LI",{});var U=E(d);o=F(U,"Signup"),U.forEach(p),j.forEach(p),g.forEach(p),this.h()},h(){h(t,"class","fa-solid fa-right-to-bracket"),h(s,"href","/signin"),h(s,"class","svelte-1d0j6v1"),h(u,"class","fa-solid fa-right-to-bracket"),h(m,"href","/signup"),h(m,"class","svelte-1d0j6v1"),h(e,"class","nav-sign-list svelte-1d0j6v1")},m(_,g){M(_,e,g),f(e,s),f(s,t),f(s,n),f(s,c),f(c,a),f(e,v),f(e,m),f(m,u),f(m,l),f(m,d),f(d,o),y||(r=[C(s,"click",i[6]),C(m,"click",i[7]),Ve(Oe.call(null,e)),C(e,"outclick",i[8])],y=!0)},p:H,d(_){_&&p(e),y=!1,Me(r)}}}function Ze(i){let e,s,t,n,c,a,v,m,u,l,d,o,y,r,_,g,S;const I=[Xe,We],j=[];function U(L,T){return L[0]?0:1}return _=U(i),g=j[_]=I[_](i),{c(){e=b("nav"),s=b("a"),t=b("img"),c=$(),a=b("img"),m=$(),u=b("form"),l=b("input"),d=$(),o=b("button"),y=b("i"),r=$(),g.c(),this.h()},l(L){e=k(L,"NAV",{class:!0});var T=E(e);s=k(T,"A",{class:!0,href:!0});var D=E(s);t=k(D,"IMG",{class:!0,src:!0,alt:!0}),c=w(D),a=k(D,"IMG",{class:!0,src:!0,alt:!0}),D.forEach(p),m=w(T),u=k(T,"FORM",{action:!0,class:!0});var B=E(u);l=k(B,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),d=w(B),o=k(B,"BUTTON",{class:!0});var J=E(o);y=k(J,"I",{class:!0}),E(y).forEach(p),J.forEach(p),B.forEach(p),r=w(T),g.l(T),T.forEach(p),this.h()},h(){h(t,"class","nav-tiny-logo svelte-1d0j6v1"),K(t.src,n="/tiny-logo.png")||h(t,"src",n),h(t,"alt",""),h(a,"class","nav-main-logo svelte-1d0j6v1"),K(a.src,v="/imgshare-logo.png")||h(a,"src",v),h(a,"alt",""),h(s,"class","nav-logo svelte-1d0j6v1"),h(s,"href","/"),h(l,"type","search"),h(l,"name","q"),h(l,"placeholder","Search"),h(l,"class","svelte-1d0j6v1"),h(y,"class","fa-solid fa-magnifying-glass"),h(o,"class","nav-button svelte-1d0j6v1"),h(u,"action","/search"),h(u,"class","svelte-1d0j6v1"),h(e,"class","svelte-1d0j6v1")},m(L,T){M(L,e,T),f(e,s),f(s,t),f(s,c),f(s,a),f(e,m),f(e,u),f(u,l),f(u,d),f(u,o),f(o,y),f(e,r),j[_].m(e,null),S=!0},p(L,[T]){let D=_;_=U(L),_===D?j[_].p(L,T):(oe(),z(j[D],1,1,()=>{j[D]=null}),fe(),g=j[_],g?g.p(L,T):(g=j[_]=I[_](L),g.c()),P(g,1),g.m(e,null))},i(L){S||(P(g),S=!0)},o(L){z(g),S=!1},d(L){L&&p(e),j[_].d()}}}function xe(i,e,s){let{$$slots:t={},$$scope:n}=e,{user:c}=e,a=!1;function v(o){Re.call(this,i,o)}const m=()=>s(1,a=!a),u=()=>s(1,a=!1),l=()=>s(1,a=!1),d=()=>s(1,a=!1);return i.$$set=o=>{"user"in o&&s(0,c=o.user),"$$scope"in o&&s(2,n=o.$$scope)},[c,a,n,t,v,m,u,l,d]}class et extends se{constructor(e){super(),le(this,e,xe,Ze,ae,{user:0})}}function Ie(i,e,s){const t=i.slice();return t[7]=e[s],t}function Ae(i){let e,s,t,n,c,a,v;return{c(){e=b("a"),s=b("i"),t=$(),n=b("li"),c=R("Admin"),this.h()},l(m){e=k(m,"A",{href:!0,class:!0});var u=E(e);s=k(u,"I",{class:!0}),E(s).forEach(p),t=w(u),n=k(u,"LI",{});var l=E(n);c=F(l,"Admin"),l.forEach(p),u.forEach(p),this.h()},h(){h(s,"class","fa-solid fa-user"),h(e,"href","/admin"),h(e,"class","svelte-1jp0sts")},m(m,u){M(m,e,u),f(e,s),f(e,t),f(e,n),f(n,c),a||(v=C(e,"click",i[4]),a=!0)},p:H,d(m){m&&p(e),a=!1,v()}}}function Ne(i,e){let s,t,n,c,a=e[7].name+"",v,m,u;return{key:i,first:null,c(){s=b("a"),t=b("i"),n=$(),c=b("li"),v=R(a),this.h()},l(l){s=k(l,"A",{href:!0,class:!0});var d=E(s);t=k(d,"I",{class:!0}),E(t).forEach(p),n=w(d),c=k(d,"LI",{});var o=E(c);v=F(o,a),o.forEach(p),d.forEach(p),this.h()},h(){h(t,"class",Be(e[7].className)+" svelte-1jp0sts"),h(s,"href",e[7].href),h(s,"class","svelte-1jp0sts"),this.first=s},m(l,d){M(l,s,d),f(s,t),f(s,n),f(s,c),f(c,v),m||(u=C(s,"click",e[5]),m=!0)},p(l,d){e=l},d(l){l&&p(s),m=!1,u()}}}function tt(i){var ve,pe,ge,be;let e,s,t,n,c,a,v,m,u=((ve=i[1])==null?void 0:ve.username)+"",l,d,o,y=((pe=i[1])==null?void 0:pe.email)+"",r,_,g,S,I,j,U=[],L=new Map,T,D,B,J,W,re,ie,me,V=(((ge=i[1])==null?void 0:ge.role)===te.ADMIN||((be=i[1])==null?void 0:be.role)===te.SUPER)&&Ae(i),ee=i[2];const de=A=>A[7].name;for(let A=0;A<ee.length;A+=1){let N=Ie(i,ee,A),O=de(N);L.set(O,U[A]=Ne(O,N))}return{c(){e=b("div"),s=b("div"),t=b("img"),a=$(),v=b("div"),m=b("h3"),l=R(u),d=$(),o=b("p"),r=R(y),_=$(),g=b("span"),S=$(),I=b("ul"),V&&V.c(),j=$();for(let A=0;A<U.length;A+=1)U[A].c();T=$(),D=b("a"),B=b("i"),J=$(),W=b("li"),re=R("Logout"),this.h()},l(A){e=k(A,"DIV",{class:!0});var N=E(e);s=k(N,"DIV",{class:!0});var O=E(s);t=k(O,"IMG",{src:!0,alt:!0,class:!0}),a=w(O),v=k(O,"DIV",{});var q=E(v);m=k(q,"H3",{class:!0});var X=E(m);l=F(X,u),X.forEach(p),d=w(q),o=k(q,"P",{class:!0});var Z=E(o);r=F(Z,y),Z.forEach(p),q.forEach(p),O.forEach(p),_=w(N),g=k(N,"SPAN",{class:!0}),E(g).forEach(p),S=w(N),I=k(N,"UL",{class:!0});var G=E(I);V&&V.l(G),j=w(G);for(let ne=0;ne<U.length;ne+=1)U[ne].l(G);T=w(G),D=k(G,"A",{href:!0,class:!0});var Y=E(D);B=k(Y,"I",{class:!0}),E(B).forEach(p),J=w(Y),W=k(Y,"LI",{});var ke=E(W);re=F(ke,"Logout"),ke.forEach(p),Y.forEach(p),G.forEach(p),N.forEach(p),this.h()},h(){var A,N;K(t.src,n=x+"/uploads/avatars/"+((A=i[1])==null?void 0:A.avatar))||h(t,"src",n),h(t,"alt",c=(N=i[1])==null?void 0:N.username),h(t,"class","svelte-1jp0sts"),h(m,"class","svelte-1jp0sts"),h(o,"class","svelte-1jp0sts"),h(s,"class","user-header svelte-1jp0sts"),h(g,"class","svelte-1jp0sts"),h(B,"class","fa-solid fa-right-from-bracket"),h(D,"href",x+"/api/auth/logout"),h(D,"class","svelte-1jp0sts"),h(I,"class","svelte-1jp0sts"),h(e,"class","user-list svelte-1jp0sts")},m(A,N){M(A,e,N),f(e,s),f(s,t),f(s,a),f(s,v),f(v,m),f(m,l),f(v,d),f(v,o),f(o,r),f(e,_),f(e,g),f(e,S),f(e,I),V&&V.m(I,null),f(I,j);for(let O=0;O<U.length;O+=1)U[O]&&U[O].m(I,null);f(I,T),f(I,D),f(D,B),f(D,J),f(D,W),f(W,re),ie||(me=[C(D,"click",Fe(i[3])),Ve(Oe.call(null,e)),C(e,"outclick",i[6])],ie=!0)},p(A,[N]){var O,q,X,Z,G,Y;N&2&&!K(t.src,n=x+"/uploads/avatars/"+((O=A[1])==null?void 0:O.avatar))&&h(t,"src",n),N&2&&c!==(c=(q=A[1])==null?void 0:q.username)&&h(t,"alt",c),N&2&&u!==(u=((X=A[1])==null?void 0:X.username)+"")&&Ee(l,u),N&2&&y!==(y=((Z=A[1])==null?void 0:Z.email)+"")&&Ee(r,y),((G=A[1])==null?void 0:G.role)===te.ADMIN||((Y=A[1])==null?void 0:Y.role)===te.SUPER?V?V.p(A,N):(V=Ae(A),V.c(),V.m(I,j)):V&&(V.d(1),V=null),N&5&&(ee=A[2],U=Pe(U,N,de,1,A,ee,L,I,ze,Ne,T,Ie))},i:H,o:H,d(A){A&&p(e),V&&V.d();for(let N=0;N<U.length;N+=1)U[N].d();ie=!1,Me(me)}}}function st(i,e,s){let{user:t}=e,{visible:n}=e;const c=[{href:`/user/${t==null?void 0:t.username}/post`,className:"fa-regular fa-image",name:"Post"},{href:`/user/${t==null?void 0:t.username}/favorite`,className:"fa-regular fa-star",name:"Favorite"},{href:`/user/${t==null?void 0:t.username}/comment`,className:"fa-regular fa-message",name:"Comments"},{href:`/user/${t==null?void 0:t.username}/about`,className:"fa-regular fa-file",name:"About"},{href:`/user/${t==null?void 0:t.username}/upload`,className:"fa-solid fa-arrow-up-from-bracket",name:"Upload"},{href:`/user/${t==null?void 0:t.username}/settings`,className:"fa-solid fa-gear",name:"Settings"}];async function a(l){const o=l.currentTarget.getAttribute("href"),y=await Qe({method:"POST",url:o,withCredentials:!0}).then(r=>r.data);s(0,n=!1),y.url&&(window.location.href="/")}const v=()=>s(0,n=!1),m=()=>s(0,n=!1),u=()=>s(0,n=!1);return i.$$set=l=>{"user"in l&&s(1,t=l.user),"visible"in l&&s(0,n=l.visible)},[n,t,c,a,v,m,u]}class lt extends se{constructor(e){super(),le(this,e,st,tt,ae,{user:1,visible:0})}}function at(i){const e=i-1;return e*e*e+1}function Se(i,{delay:e=0,duration:s=400,easing:t=at,x:n=0,y:c=0,opacity:a=0}={}){const v=getComputedStyle(i),m=+v.opacity,u=v.transform==="none"?"":v.transform,l=m*(1-a),[d,o]=ye(n),[y,r]=ye(c);return{delay:e,duration:s,easing:t,css:(_,g)=>`
			transform: ${u} translate(${(1-_)*d}${o}, ${(1-_)*y}${r});
			opacity: ${m-l*g}`}}function rt(i){let e,s,t,n=new Date().getFullYear()+"",c,a,v,m,u,l,d,o,y,r,_,g,S;return{c(){e=b("footer"),s=b("div"),t=R("imgShare © "),c=R(n),a=$(),v=b("a"),m=R("About"),u=$(),l=b("a"),d=R("Terms"),o=$(),y=b("a"),r=R("Rules"),this.h()},l(I){e=k(I,"FOOTER",{class:!0});var j=E(e);s=k(j,"DIV",{class:!0});var U=E(s);t=F(U,"imgShare © "),c=F(U,n),U.forEach(p),a=w(j),v=k(j,"A",{href:!0,class:!0});var L=E(v);m=F(L,"About"),L.forEach(p),u=w(j),l=k(j,"A",{href:!0,class:!0});var T=E(l);d=F(T,"Terms"),T.forEach(p),o=w(j),y=k(j,"A",{href:!0,class:!0});var D=E(y);r=F(D,"Rules"),D.forEach(p),j.forEach(p),this.h()},h(){h(s,"class","svelte-zgee83"),h(v,"href","/about"),h(v,"class","svelte-zgee83"),h(l,"href","/terms"),h(l,"class","svelte-zgee83"),h(y,"href","/rules"),h(y,"class","svelte-zgee83"),h(e,"class","svelte-zgee83")},m(I,j){M(I,e,j),f(e,s),f(s,t),f(s,c),f(e,a),f(e,v),f(v,m),f(e,u),f(e,l),f(l,d),f(e,o),f(e,y),f(y,r),S=!0},p:H,i(I){S||(Ce(()=>{S&&(g&&g.end(1),_=Ge(e,Se,{y:50,duration:500}),_.start())}),S=!0)},o(I){_&&_.invalidate(),g=qe(e,Se,{y:50,duration:500}),S=!1},d(I){I&&p(e),I&&g&&g.end()}}}class it extends se{constructor(e){super(),le(this,e,null,rt,ae,{})}}function $e(i){let e,s,t;function n(a){i[6](a)}let c={user:i[0].user};return i[1]!==void 0&&(c.visible=i[1]),e=new lt({props:c}),He.push(()=>Je(e,"visible",n)),{c(){ce(e.$$.fragment)},l(a){ue(e.$$.fragment,a)},m(a,v){_e(e,a,v),t=!0},p(a,v){const m={};v&1&&(m.user=a[0].user),!s&&v&2&&(s=!0,m.visible=a[1],Ke(()=>s=!1)),e.$set(m)},i(a){t||(P(e.$$.fragment,a),t=!0)},o(a){z(e.$$.fragment,a),t=!1},d(a){he(e,a)}}}function nt(i){let e,s,t=i[1]&&$e(i);return{c(){t&&t.c(),e=Q()},l(n){t&&t.l(n),e=Q()},m(n,c){t&&t.m(n,c),M(n,e,c),s=!0},p(n,c){n[1]?t?(t.p(n,c),c&2&&P(t,1)):(t=$e(n),t.c(),P(t,1),t.m(e.parentNode,e)):t&&(oe(),z(t,1,1,()=>{t=null}),fe())},i(n){s||(P(t),s=!0)},o(n){z(t),s=!1},d(n){t&&t.d(n),n&&p(e)}}}function we(i){let e,s;return e=new it({}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){_e(e,t,n),s=!0},i(t){s||(P(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){he(e,t)}}}function ot(i){var y;let e,s,t,n,c=i[2]&&(i[3]==="/"||((y=i[3])==null?void 0:y.includes("/gallery"))),a,v,m,u;e=new et({props:{user:i[0].user,$$slots:{default:[nt]},$$scope:{ctx:i}}}),e.$on("click",i[7]);const l=i[5].default,d=Ue(l,i,i[8],null);let o=c&&we();return{c(){ce(e.$$.fragment),s=$(),t=b("div"),d&&d.c(),n=$(),o&&o.c(),a=Q(),this.h()},l(r){ue(e.$$.fragment,r),s=w(r),t=k(r,"DIV",{class:!0});var _=E(t);d&&d.l(_),_.forEach(p),n=w(r),o&&o.l(r),a=Q(),this.h()},h(){h(t,"class","main-container")},m(r,_){_e(e,r,_),M(r,s,_),M(r,t,_),d&&d.m(t,null),M(r,n,_),o&&o.m(r,_),M(r,a,_),v=!0,m||(u=C(t,"wheel",i[4]),m=!0)},p(r,[_]){var S;const g={};_&1&&(g.user=r[0].user),_&259&&(g.$$scope={dirty:_,ctx:r}),e.$set(g),d&&d.p&&(!v||_&256)&&De(d,l,r,r[8],v?Te(l,r[8],_,null):Le(r[8]),null),_&12&&(c=r[2]&&(r[3]==="/"||((S=r[3])==null?void 0:S.includes("/gallery")))),c?o?_&12&&P(o,1):(o=we(),o.c(),P(o,1),o.m(a.parentNode,a)):o&&(oe(),z(o,1,1,()=>{o=null}),fe())},i(r){v||(P(e.$$.fragment,r),P(d,r),P(o),v=!0)},o(r){z(e.$$.fragment,r),z(d,r),z(o),v=!1},d(r){he(e,r),r&&p(s),r&&p(t),d&&d.d(r),r&&p(n),o&&o.d(r),r&&p(a),m=!1,u()}}}function ft(i,e,s){let{$$slots:t={},$$scope:n}=e,{data:c}=e,a=!1,v=!0,m;async function u(o){o.deltaY<=0?s(2,v=!0):s(2,v=!1)}Ye(()=>s(3,m=window.location.pathname));function l(o){a=o,s(1,a)}const d=()=>s(1,a=!a);return i.$$set=o=>{"data"in o&&s(0,c=o.data),"$$scope"in o&&s(8,n=o.$$scope)},[c,a,v,m,u,t,l,d,n]}class dt extends se{constructor(e){super(),le(this,e,ft,ot,ae,{data:0})}}export{dt as default};
