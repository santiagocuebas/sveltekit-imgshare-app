import{S as se,i as le,s as ae,k as b,a as $,l as k,m as E,c as w,h as p,n as h,C as K,b as M,D as c,v as oe,d as z,f as ce,g as P,E as Re,q as R,e as Q,r as F,F as C,G as H,H as Ue,I as De,J as Le,K as Te,L as Ve,M as Me,N as Fe,u as Ee,O as Pe,P as ze,Q as Be,R as ye,T as Ce,U as Ge,V as qe,y as fe,z as ue,A as _e,B as he,W as Ye,w as He,X as Je,Y as Ke}from"../chunks/index.8bb6be9b.js";import{D as x}from"../chunks/config.98d8a59a.js";import{c as Oe}from"../chunks/click-outside.61d417da.js";import{a as Qe}from"../chunks/axios.707ed124.js";import{U as te}from"../chunks/enums.4774c07c.js";function We(o){let e,s,t,r,m,n,d,a,l,_,v,f,y,i=o[1]&&je(o);return{c(){e=b("div"),s=b("a"),t=R("Signin"),r=$(),m=b("a"),n=R("Signup"),d=$(),a=b("button"),l=b("i"),_=$(),i&&i.c(),v=Q(),this.h()},l(u){e=k(u,"DIV",{class:!0});var g=E(e);s=k(g,"A",{class:!0,href:!0});var S=E(s);t=F(S,"Signin"),S.forEach(p),r=w(g),m=k(g,"A",{class:!0,href:!0});var I=E(m);n=F(I,"Signup"),I.forEach(p),d=w(g),a=k(g,"BUTTON",{class:!0});var j=E(a);l=k(j,"I",{class:!0}),E(l).forEach(p),j.forEach(p),g.forEach(p),_=w(u),i&&i.l(u),v=Q(),this.h()},h(){h(s,"class","nav-signin svelte-1d0j6v1"),h(s,"href","/signin"),h(m,"class","nav-signup svelte-1d0j6v1"),h(m,"href","/signup"),h(l,"class","fa-solid fa-caret-down svelte-1d0j6v1"),h(a,"class","svelte-1d0j6v1"),h(e,"class","nav-sign svelte-1d0j6v1")},m(u,g){M(u,e,g),c(e,s),c(s,t),c(e,r),c(e,m),c(m,n),c(e,d),c(e,a),c(a,l),M(u,_,g),i&&i.m(u,g),M(u,v,g),f||(y=C(a,"click",o[5]),f=!0)},p(u,g){u[1]?i?i.p(u,g):(i=je(u),i.c(),i.m(v.parentNode,v)):i&&(i.d(1),i=null)},i:H,o:H,d(u){u&&p(e),u&&p(_),i&&i.d(u),u&&p(v),f=!1,y()}}}function Xe(o){let e,s,t,r,m,n;const d=o[3].default,a=Ue(d,o,o[2],null);return{c(){e=b("img"),t=$(),a&&a.c(),this.h()},l(l){e=k(l,"IMG",{id:!0,class:!0,src:!0,alt:!0}),t=w(l),a&&a.l(l),this.h()},h(){var l;h(e,"id","nav-avatar"),h(e,"class","nav-avatar svelte-1d0j6v1"),K(e.src,s=x+"/uploads/avatars/"+((l=o[0])==null?void 0:l.avatar))||h(e,"src",s),h(e,"alt","")},m(l,_){M(l,e,_),M(l,t,_),a&&a.m(l,_),r=!0,m||(n=C(e,"click",o[4]),m=!0)},p(l,_){var v;(!r||_&1&&!K(e.src,s=x+"/uploads/avatars/"+((v=l[0])==null?void 0:v.avatar)))&&h(e,"src",s),a&&a.p&&(!r||_&4)&&De(a,d,l,l[2],r?Te(d,l[2],_,null):Le(l[2]),null)},i(l){r||(P(a,l),r=!0)},o(l){z(a,l),r=!1},d(l){l&&p(e),l&&p(t),a&&a.d(l),m=!1,n()}}}function je(o){let e,s,t,r,m,n,d,a,l,_,v,f,y,i;return{c(){e=b("ul"),s=b("a"),t=b("i"),r=$(),m=b("li"),n=R("Signin"),d=$(),a=b("a"),l=b("i"),_=$(),v=b("li"),f=R("Signup"),this.h()},l(u){e=k(u,"UL",{class:!0});var g=E(e);s=k(g,"A",{href:!0,class:!0});var S=E(s);t=k(S,"I",{class:!0}),E(t).forEach(p),r=w(S),m=k(S,"LI",{});var I=E(m);n=F(I,"Signin"),I.forEach(p),S.forEach(p),d=w(g),a=k(g,"A",{href:!0,class:!0});var j=E(a);l=k(j,"I",{class:!0}),E(l).forEach(p),_=w(j),v=k(j,"LI",{});var U=E(v);f=F(U,"Signup"),U.forEach(p),j.forEach(p),g.forEach(p),this.h()},h(){h(t,"class","fa-solid fa-right-to-bracket"),h(s,"href","/signin"),h(s,"class","svelte-1d0j6v1"),h(l,"class","fa-solid fa-right-to-bracket"),h(a,"href","/signup"),h(a,"class","svelte-1d0j6v1"),h(e,"class","nav-sign-list svelte-1d0j6v1")},m(u,g){M(u,e,g),c(e,s),c(s,t),c(s,r),c(s,m),c(m,n),c(e,d),c(e,a),c(a,l),c(a,_),c(a,v),c(v,f),y||(i=[C(s,"click",o[6]),C(a,"click",o[7]),Ve(Oe.call(null,e)),C(e,"outclick",o[8])],y=!0)},p:H,d(u){u&&p(e),y=!1,Me(i)}}}function Ze(o){let e,s,t,r,m,n,d,a,l,_,v,f,y,i,u,g,S;const I=[Xe,We],j=[];function U(L,T){return L[0]?0:1}return u=U(o),g=j[u]=I[u](o),{c(){e=b("nav"),s=b("a"),t=b("img"),m=$(),n=b("img"),a=$(),l=b("form"),_=b("input"),v=$(),f=b("button"),y=b("i"),i=$(),g.c(),this.h()},l(L){e=k(L,"NAV",{class:!0});var T=E(e);s=k(T,"A",{class:!0,href:!0});var D=E(s);t=k(D,"IMG",{class:!0,src:!0,alt:!0}),m=w(D),n=k(D,"IMG",{class:!0,src:!0,alt:!0}),D.forEach(p),a=w(T),l=k(T,"FORM",{action:!0,class:!0});var B=E(l);_=k(B,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),v=w(B),f=k(B,"BUTTON",{class:!0});var J=E(f);y=k(J,"I",{class:!0}),E(y).forEach(p),J.forEach(p),B.forEach(p),i=w(T),g.l(T),T.forEach(p),this.h()},h(){h(t,"class","nav-tiny-logo svelte-1d0j6v1"),K(t.src,r="/tiny-logo.png")||h(t,"src",r),h(t,"alt",""),h(n,"class","nav-main-logo svelte-1d0j6v1"),K(n.src,d="/imgshare-logo.png")||h(n,"src",d),h(n,"alt",""),h(s,"class","nav-logo svelte-1d0j6v1"),h(s,"href","/"),h(_,"type","search"),h(_,"name","q"),h(_,"placeholder","Search"),h(_,"class","svelte-1d0j6v1"),h(y,"class","fa-solid fa-magnifying-glass"),h(f,"class","nav-button svelte-1d0j6v1"),h(l,"action","/search"),h(l,"class","svelte-1d0j6v1"),h(e,"class","svelte-1d0j6v1")},m(L,T){M(L,e,T),c(e,s),c(s,t),c(s,m),c(s,n),c(e,a),c(e,l),c(l,_),c(l,v),c(l,f),c(f,y),c(e,i),j[u].m(e,null),S=!0},p(L,[T]){let D=u;u=U(L),u===D?j[u].p(L,T):(oe(),z(j[D],1,1,()=>{j[D]=null}),ce(),g=j[u],g?g.p(L,T):(g=j[u]=I[u](L),g.c()),P(g,1),g.m(e,null))},i(L){S||(P(g),S=!0)},o(L){z(g),S=!1},d(L){L&&p(e),j[u].d()}}}function xe(o,e,s){let{$$slots:t={},$$scope:r}=e,{user:m}=e,n=!1;function d(f){Re.call(this,o,f)}const a=()=>s(1,n=!n),l=()=>s(1,n=!1),_=()=>s(1,n=!1),v=()=>s(1,n=!1);return o.$$set=f=>{"user"in f&&s(0,m=f.user),"$$scope"in f&&s(2,r=f.$$scope)},[m,n,r,t,d,a,l,_,v]}class et extends se{constructor(e){super(),le(this,e,xe,Ze,ae,{user:0})}}function Ie(o,e,s){const t=o.slice();return t[7]=e[s],t}function Ae(o){let e,s,t,r,m,n,d;return{c(){e=b("a"),s=b("i"),t=$(),r=b("li"),m=R("Admin"),this.h()},l(a){e=k(a,"A",{href:!0,class:!0});var l=E(e);s=k(l,"I",{class:!0}),E(s).forEach(p),t=w(l),r=k(l,"LI",{});var _=E(r);m=F(_,"Admin"),_.forEach(p),l.forEach(p),this.h()},h(){h(s,"class","fa-solid fa-user"),h(e,"href","/admin"),h(e,"class","svelte-1jp0sts")},m(a,l){M(a,e,l),c(e,s),c(e,t),c(e,r),c(r,m),n||(d=C(e,"click",o[4]),n=!0)},p:H,d(a){a&&p(e),n=!1,d()}}}function Ne(o,e){let s,t,r,m,n=e[7].name+"",d,a,l;return{key:o,first:null,c(){s=b("a"),t=b("i"),r=$(),m=b("li"),d=R(n),this.h()},l(_){s=k(_,"A",{href:!0,class:!0});var v=E(s);t=k(v,"I",{class:!0}),E(t).forEach(p),r=w(v),m=k(v,"LI",{});var f=E(m);d=F(f,n),f.forEach(p),v.forEach(p),this.h()},h(){h(t,"class",Be(e[7].className)+" svelte-1jp0sts"),h(s,"href",e[7].href),h(s,"class","svelte-1jp0sts"),this.first=s},m(_,v){M(_,s,v),c(s,t),c(s,r),c(s,m),c(m,d),a||(l=C(s,"click",e[5]),a=!0)},p(_,v){e=_},d(_){_&&p(s),a=!1,l()}}}function tt(o){var ve,pe,ge,be;let e,s,t,r,m,n,d,a,l=((ve=o[1])==null?void 0:ve.username)+"",_,v,f,y=((pe=o[1])==null?void 0:pe.email)+"",i,u,g,S,I,j,U=[],L=new Map,T,D,B,J,W,re,ie,me,V=(((ge=o[1])==null?void 0:ge.role)===te.ADMIN||((be=o[1])==null?void 0:be.role)===te.SUPER)&&Ae(o),ee=o[2];const de=A=>A[7].name;for(let A=0;A<ee.length;A+=1){let N=Ie(o,ee,A),O=de(N);L.set(O,U[A]=Ne(O,N))}return{c(){e=b("div"),s=b("div"),t=b("img"),n=$(),d=b("div"),a=b("h3"),_=R(l),v=$(),f=b("p"),i=R(y),u=$(),g=b("span"),S=$(),I=b("ul"),V&&V.c(),j=$();for(let A=0;A<U.length;A+=1)U[A].c();T=$(),D=b("a"),B=b("i"),J=$(),W=b("li"),re=R("Logout"),this.h()},l(A){e=k(A,"DIV",{class:!0});var N=E(e);s=k(N,"DIV",{class:!0});var O=E(s);t=k(O,"IMG",{src:!0,alt:!0,class:!0}),n=w(O),d=k(O,"DIV",{});var q=E(d);a=k(q,"H3",{class:!0});var X=E(a);_=F(X,l),X.forEach(p),v=w(q),f=k(q,"P",{class:!0});var Z=E(f);i=F(Z,y),Z.forEach(p),q.forEach(p),O.forEach(p),u=w(N),g=k(N,"SPAN",{class:!0}),E(g).forEach(p),S=w(N),I=k(N,"UL",{class:!0});var G=E(I);V&&V.l(G),j=w(G);for(let ne=0;ne<U.length;ne+=1)U[ne].l(G);T=w(G),D=k(G,"A",{href:!0,class:!0});var Y=E(D);B=k(Y,"I",{class:!0}),E(B).forEach(p),J=w(Y),W=k(Y,"LI",{});var ke=E(W);re=F(ke,"Logout"),ke.forEach(p),Y.forEach(p),G.forEach(p),N.forEach(p),this.h()},h(){var A,N;K(t.src,r=x+"/uploads/avatars/"+((A=o[1])==null?void 0:A.avatar))||h(t,"src",r),h(t,"alt",m=(N=o[1])==null?void 0:N.username),h(t,"class","svelte-1jp0sts"),h(a,"class","svelte-1jp0sts"),h(f,"class","svelte-1jp0sts"),h(s,"class","user-header svelte-1jp0sts"),h(g,"class","svelte-1jp0sts"),h(B,"class","fa-solid fa-right-from-bracket"),h(D,"href",x+"/api/auth/logout"),h(D,"class","svelte-1jp0sts"),h(I,"class","svelte-1jp0sts"),h(e,"class","user-list svelte-1jp0sts")},m(A,N){M(A,e,N),c(e,s),c(s,t),c(s,n),c(s,d),c(d,a),c(a,_),c(d,v),c(d,f),c(f,i),c(e,u),c(e,g),c(e,S),c(e,I),V&&V.m(I,null),c(I,j);for(let O=0;O<U.length;O+=1)U[O]&&U[O].m(I,null);c(I,T),c(I,D),c(D,B),c(D,J),c(D,W),c(W,re),ie||(me=[C(D,"click",Fe(o[3])),Ve(Oe.call(null,e)),C(e,"outclick",o[6])],ie=!0)},p(A,[N]){var O,q,X,Z,G,Y;N&2&&!K(t.src,r=x+"/uploads/avatars/"+((O=A[1])==null?void 0:O.avatar))&&h(t,"src",r),N&2&&m!==(m=(q=A[1])==null?void 0:q.username)&&h(t,"alt",m),N&2&&l!==(l=((X=A[1])==null?void 0:X.username)+"")&&Ee(_,l),N&2&&y!==(y=((Z=A[1])==null?void 0:Z.email)+"")&&Ee(i,y),((G=A[1])==null?void 0:G.role)===te.ADMIN||((Y=A[1])==null?void 0:Y.role)===te.SUPER?V?V.p(A,N):(V=Ae(A),V.c(),V.m(I,j)):V&&(V.d(1),V=null),N&5&&(ee=A[2],U=Pe(U,N,de,1,A,ee,L,I,ze,Ne,T,Ie))},i:H,o:H,d(A){A&&p(e),V&&V.d();for(let N=0;N<U.length;N+=1)U[N].d();ie=!1,Me(me)}}}function st(o,e,s){let{user:t}=e,{visible:r}=e;const m=[{href:`/user/${t==null?void 0:t.username}/post`,className:"fa-regular fa-image",name:"Post"},{href:`/user/${t==null?void 0:t.username}/favorite`,className:"fa-regular fa-star",name:"Favorite"},{href:`/user/${t==null?void 0:t.username}/comment`,className:"fa-regular fa-message",name:"Comments"},{href:`/user/${t==null?void 0:t.username}/about`,className:"fa-regular fa-file",name:"About"},{href:`/user/${t==null?void 0:t.username}/upload`,className:"fa-solid fa-arrow-up-from-bracket",name:"Upload"},{href:`/user/${t==null?void 0:t.username}/settings`,className:"fa-solid fa-gear",name:"Settings"}];async function n(_){const f=_.currentTarget.getAttribute("href"),y=await Qe({method:"POST",url:f,withCredentials:!0}).then(i=>i.data);s(0,r=!1),y.url&&(window.location.href="/")}const d=()=>s(0,r=!1),a=()=>s(0,r=!1),l=()=>s(0,r=!1);return o.$$set=_=>{"user"in _&&s(1,t=_.user),"visible"in _&&s(0,r=_.visible)},[r,t,m,n,d,a,l]}class lt extends se{constructor(e){super(),le(this,e,st,tt,ae,{user:1,visible:0})}}function at(o){const e=o-1;return e*e*e+1}function Se(o,{delay:e=0,duration:s=400,easing:t=at,x:r=0,y:m=0,opacity:n=0}={}){const d=getComputedStyle(o),a=+d.opacity,l=d.transform==="none"?"":d.transform,_=a*(1-n),[v,f]=ye(r),[y,i]=ye(m);return{delay:e,duration:s,easing:t,css:(u,g)=>`
			transform: ${l} translate(${(1-u)*v}${f}, ${(1-u)*y}${i});
			opacity: ${a-_*g}`}}function rt(o){let e,s,t,r=new Date().getFullYear()+"",m,n,d,a,l,_,v,f,y,i,u,g,S;return{c(){e=b("footer"),s=b("div"),t=R("imgShare © "),m=R(r),n=$(),d=b("a"),a=R("About"),l=$(),_=b("a"),v=R("Terms"),f=$(),y=b("a"),i=R("Rules"),this.h()},l(I){e=k(I,"FOOTER",{class:!0});var j=E(e);s=k(j,"DIV",{class:!0});var U=E(s);t=F(U,"imgShare © "),m=F(U,r),U.forEach(p),n=w(j),d=k(j,"A",{href:!0,class:!0});var L=E(d);a=F(L,"About"),L.forEach(p),l=w(j),_=k(j,"A",{href:!0,class:!0});var T=E(_);v=F(T,"Terms"),T.forEach(p),f=w(j),y=k(j,"A",{href:!0,class:!0});var D=E(y);i=F(D,"Rules"),D.forEach(p),j.forEach(p),this.h()},h(){h(s,"class","svelte-zgee83"),h(d,"href","/about"),h(d,"class","svelte-zgee83"),h(_,"href","/terms"),h(_,"class","svelte-zgee83"),h(y,"href","/rules"),h(y,"class","svelte-zgee83"),h(e,"class","svelte-zgee83")},m(I,j){M(I,e,j),c(e,s),c(s,t),c(s,m),c(e,n),c(e,d),c(d,a),c(e,l),c(e,_),c(_,v),c(e,f),c(e,y),c(y,i),S=!0},p:H,i(I){S||(Ce(()=>{S&&(g&&g.end(1),u=Ge(e,Se,{y:50,duration:500}),u.start())}),S=!0)},o(I){u&&u.invalidate(),g=qe(e,Se,{y:50,duration:500}),S=!1},d(I){I&&p(e),I&&g&&g.end()}}}class it extends se{constructor(e){super(),le(this,e,null,rt,ae,{})}}function $e(o){let e,s,t;function r(n){o[6](n)}let m={user:o[0].user};return o[1]!==void 0&&(m.visible=o[1]),e=new lt({props:m}),He.push(()=>Je(e,"visible",r)),{c(){fe(e.$$.fragment)},l(n){ue(e.$$.fragment,n)},m(n,d){_e(e,n,d),t=!0},p(n,d){const a={};d&1&&(a.user=n[0].user),!s&&d&2&&(s=!0,a.visible=n[1],Ke(()=>s=!1)),e.$set(a)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){z(e.$$.fragment,n),t=!1},d(n){he(e,n)}}}function nt(o){let e,s,t=o[1]&&$e(o);return{c(){t&&t.c(),e=Q()},l(r){t&&t.l(r),e=Q()},m(r,m){t&&t.m(r,m),M(r,e,m),s=!0},p(r,m){r[1]?t?(t.p(r,m),m&2&&P(t,1)):(t=$e(r),t.c(),P(t,1),t.m(e.parentNode,e)):t&&(oe(),z(t,1,1,()=>{t=null}),ce())},i(r){s||(P(t),s=!0)},o(r){z(t),s=!1},d(r){t&&t.d(r),r&&p(e)}}}function we(o){let e,s;return e=new it({}),{c(){fe(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){_e(e,t,r),s=!0},i(t){s||(P(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){he(e,t)}}}function ot(o){var y;let e,s,t,r,m=o[2]&&(o[3]==="/"||((y=o[3])==null?void 0:y.includes("/gallery"))),n,d,a,l;e=new et({props:{user:o[0].user,$$slots:{default:[nt]},$$scope:{ctx:o}}}),e.$on("click",o[7]);const _=o[5].default,v=Ue(_,o,o[8],null);let f=m&&we();return{c(){fe(e.$$.fragment),s=$(),t=b("div"),v&&v.c(),r=$(),f&&f.c(),n=Q(),this.h()},l(i){ue(e.$$.fragment,i),s=w(i),t=k(i,"DIV",{class:!0});var u=E(t);v&&v.l(u),u.forEach(p),r=w(i),f&&f.l(i),n=Q(),this.h()},h(){h(t,"class","main-container")},m(i,u){_e(e,i,u),M(i,s,u),M(i,t,u),v&&v.m(t,null),M(i,r,u),f&&f.m(i,u),M(i,n,u),d=!0,a||(l=C(t,"wheel",o[4]),a=!0)},p(i,[u]){var S;const g={};u&1&&(g.user=i[0].user),u&259&&(g.$$scope={dirty:u,ctx:i}),e.$set(g),v&&v.p&&(!d||u&256)&&De(v,_,i,i[8],d?Te(_,i[8],u,null):Le(i[8]),null),u&12&&(m=i[2]&&(i[3]==="/"||((S=i[3])==null?void 0:S.includes("/gallery")))),m?f?u&12&&P(f,1):(f=we(),f.c(),P(f,1),f.m(n.parentNode,n)):f&&(oe(),z(f,1,1,()=>{f=null}),ce())},i(i){d||(P(e.$$.fragment,i),P(v,i),P(f),d=!0)},o(i){z(e.$$.fragment,i),z(v,i),z(f),d=!1},d(i){he(e,i),i&&p(s),i&&p(t),v&&v.d(i),i&&p(r),f&&f.d(i),i&&p(n),a=!1,l()}}}function ct(o,e,s){let{$$slots:t={},$$scope:r}=e,{data:m}=e,n=!1,d=!0,a;async function l(f){f.deltaY<=0?s(2,d=!0):s(2,d=!1)}Ye(()=>s(3,a=window.location.pathname));function _(f){n=f,s(1,n)}const v=()=>s(1,n=!n);return o.$$set=f=>{"data"in f&&s(0,m=f.data),"$$scope"in f&&s(8,r=f.$$scope)},[m,n,d,a,l,t,_,v,r]}class dt extends se{constructor(e){super(),le(this,e,ct,ot,ae,{data:0})}}export{dt as default};
