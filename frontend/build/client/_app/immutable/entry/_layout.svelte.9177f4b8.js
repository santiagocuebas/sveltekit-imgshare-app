import{S as se,i as le,s as ae,k,a as w,l as E,m as y,c as U,h as v,n as u,C as J,b as M,D as n,v as oe,d as z,f as ue,g as P,E as Be,q as R,e as K,r as F,F as C,G as Q,H as Te,I as Me,J as Oe,K as Re,L as Fe,M as Pe,N as Ce,u as ye,O as Ge,P as qe,Q as fe,R as Ye,T as je,U as He,V as Je,W as Ke,y as ce,z as _e,A as he,B as me,X as Qe,w as Ie,Y as Ae,Z as Ne}from"../chunks/index.d4184e2c.js";import{D as x}from"../chunks/config.ec8b886b.js";import{c as ze}from"../chunks/click-outside.61d417da.js";import{a as We}from"../chunks/axios.707ed124.js";import{U as te}from"../chunks/enums.4774c07c.js";function Xe(r){let e,t,s,i,f,d,m,l,a,c,p,h,b,_=r[1]&&Se(r);return{c(){e=k("div"),t=k("a"),s=R("Signin"),i=w(),f=k("a"),d=R("Signup"),m=w(),l=k("button"),a=k("i"),c=w(),_&&_.c(),p=K(),this.h()},l(o){e=E(o,"DIV",{class:!0});var g=y(e);t=E(g,"A",{class:!0,href:!0});var S=y(t);s=F(S,"Signin"),S.forEach(v),i=U(g),f=E(g,"A",{class:!0,href:!0});var I=y(f);d=F(I,"Signup"),I.forEach(v),m=U(g),l=E(g,"BUTTON",{class:!0});var j=y(l);a=E(j,"I",{class:!0}),y(a).forEach(v),j.forEach(v),g.forEach(v),c=U(o),_&&_.l(o),p=K(),this.h()},h(){u(t,"class","nav-signin svelte-1d0j6v1"),u(t,"href","/signin"),u(f,"class","nav-signup svelte-1d0j6v1"),u(f,"href","/signup"),u(a,"class","fa-solid fa-caret-down svelte-1d0j6v1"),u(l,"class","svelte-1d0j6v1"),u(e,"class","nav-sign svelte-1d0j6v1")},m(o,g){M(o,e,g),n(e,t),n(t,s),n(e,i),n(e,f),n(f,d),n(e,m),n(e,l),n(l,a),M(o,c,g),_&&_.m(o,g),M(o,p,g),h||(b=C(l,"click",r[5]),h=!0)},p(o,g){o[1]?_?_.p(o,g):(_=Se(o),_.c(),_.m(p.parentNode,p)):_&&(_.d(1),_=null)},i:Q,o:Q,d(o){o&&v(e),o&&v(c),_&&_.d(o),o&&v(p),h=!1,b()}}}function Ze(r){let e,t,s,i,f,d;const m=r[3].default,l=Te(m,r,r[2],null);return{c(){e=k("img"),s=w(),l&&l.c(),this.h()},l(a){e=E(a,"IMG",{id:!0,class:!0,src:!0,alt:!0}),s=U(a),l&&l.l(a),this.h()},h(){u(e,"id","nav-avatar"),u(e,"class","nav-avatar svelte-1d0j6v1"),J(e.src,t=x+"/uploads/avatars/"+r[0].avatar)||u(e,"src",t),u(e,"alt","")},m(a,c){M(a,e,c),M(a,s,c),l&&l.m(a,c),i=!0,f||(d=C(e,"click",r[4]),f=!0)},p(a,c){(!i||c&1&&!J(e.src,t=x+"/uploads/avatars/"+a[0].avatar))&&u(e,"src",t),l&&l.p&&(!i||c&4)&&Me(l,m,a,a[2],i?Re(m,a[2],c,null):Oe(a[2]),null)},i(a){i||(P(l,a),i=!0)},o(a){z(l,a),i=!1},d(a){a&&v(e),a&&v(s),l&&l.d(a),f=!1,d()}}}function Se(r){let e,t,s,i,f,d,m,l,a,c,p,h,b,_;return{c(){e=k("ul"),t=k("a"),s=k("i"),i=w(),f=k("li"),d=R("Signin"),m=w(),l=k("a"),a=k("i"),c=w(),p=k("li"),h=R("Signup"),this.h()},l(o){e=E(o,"UL",{class:!0});var g=y(e);t=E(g,"A",{href:!0,class:!0});var S=y(t);s=E(S,"I",{class:!0}),y(s).forEach(v),i=U(S),f=E(S,"LI",{});var I=y(f);d=F(I,"Signin"),I.forEach(v),S.forEach(v),m=U(g),l=E(g,"A",{href:!0,class:!0});var j=y(l);a=E(j,"I",{class:!0}),y(a).forEach(v),c=U(j),p=E(j,"LI",{});var $=y(p);h=F($,"Signup"),$.forEach(v),j.forEach(v),g.forEach(v),this.h()},h(){u(s,"class","fa-solid fa-right-to-bracket"),u(t,"href","/signin"),u(t,"class","svelte-1d0j6v1"),u(a,"class","fa-solid fa-right-to-bracket"),u(l,"href","/signup"),u(l,"class","svelte-1d0j6v1"),u(e,"class","nav-sign-list svelte-1d0j6v1")},m(o,g){M(o,e,g),n(e,t),n(t,s),n(t,i),n(t,f),n(f,d),n(e,m),n(e,l),n(l,a),n(l,c),n(l,p),n(p,h),b||(_=[C(t,"click",r[6]),C(l,"click",r[7]),Fe(ze.call(null,e)),C(e,"outclick",r[8])],b=!0)},p:Q,d(o){o&&v(e),b=!1,Pe(_)}}}function xe(r){let e,t,s,i,f,d,m,l,a,c,p,h,b,_,o,g,S;const I=[Ze,Xe],j=[];function $(L,V){return L[0]?0:1}return o=$(r),g=j[o]=I[o](r),{c(){e=k("nav"),t=k("a"),s=k("img"),f=w(),d=k("img"),l=w(),a=k("form"),c=k("input"),p=w(),h=k("button"),b=k("i"),_=w(),g.c(),this.h()},l(L){e=E(L,"NAV",{class:!0});var V=y(e);t=E(V,"A",{class:!0,href:!0});var D=y(t);s=E(D,"IMG",{class:!0,src:!0,alt:!0}),f=U(D),d=E(D,"IMG",{class:!0,src:!0,alt:!0}),D.forEach(v),l=U(V),a=E(V,"FORM",{action:!0,class:!0});var B=y(a);c=E(B,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),p=U(B),h=E(B,"BUTTON",{class:!0});var H=y(h);b=E(H,"I",{class:!0}),y(b).forEach(v),H.forEach(v),B.forEach(v),_=U(V),g.l(V),V.forEach(v),this.h()},h(){u(s,"class","nav-tiny-logo svelte-1d0j6v1"),J(s.src,i="/tiny-logo.png")||u(s,"src",i),u(s,"alt",""),u(d,"class","nav-main-logo svelte-1d0j6v1"),J(d.src,m="/imgshare-logo.png")||u(d,"src",m),u(d,"alt",""),u(t,"class","nav-logo svelte-1d0j6v1"),u(t,"href","/"),u(c,"type","search"),u(c,"name","q"),u(c,"placeholder","Search"),u(c,"class","svelte-1d0j6v1"),u(b,"class","fa-solid fa-magnifying-glass"),u(h,"class","nav-button svelte-1d0j6v1"),u(a,"action","/search"),u(a,"class","svelte-1d0j6v1"),u(e,"class","svelte-1d0j6v1")},m(L,V){M(L,e,V),n(e,t),n(t,s),n(t,f),n(t,d),n(e,l),n(e,a),n(a,c),n(a,p),n(a,h),n(h,b),n(e,_),j[o].m(e,null),S=!0},p(L,[V]){let D=o;o=$(L),o===D?j[o].p(L,V):(oe(),z(j[D],1,1,()=>{j[D]=null}),ue(),g=j[o],g?g.p(L,V):(g=j[o]=I[o](L),g.c()),P(g,1),g.m(e,null))},i(L){S||(P(g),S=!0)},o(L){z(g),S=!1},d(L){L&&v(e),j[o].d()}}}function et(r,e,t){let{$$slots:s={},$$scope:i}=e,{user:f}=e,d=!1;function m(h){Be.call(this,r,h)}const l=()=>t(1,d=!d),a=()=>t(1,d=!1),c=()=>t(1,d=!1),p=()=>t(1,d=!1);return r.$$set=h=>{"user"in h&&t(0,f=h.user),"$$scope"in h&&t(2,i=h.$$scope)},[f,d,i,s,m,l,a,c,p]}class tt extends se{constructor(e){super(),le(this,e,et,xe,ae,{user:0})}}function we(r,e,t){const s=r.slice();return s[6]=e[t],s}function Ue(r){let e,t,s,i,f,d,m;return{c(){e=k("a"),t=k("i"),s=w(),i=k("li"),f=R("Admin"),this.h()},l(l){e=E(l,"A",{href:!0,class:!0});var a=y(e);t=E(a,"I",{class:!0}),y(t).forEach(v),s=U(a),i=E(a,"LI",{});var c=y(i);f=F(c,"Admin"),c.forEach(v),a.forEach(v),this.h()},h(){u(t,"class","fa-solid fa-user"),u(e,"href","/admin"),u(e,"class","svelte-1jp0sts")},m(l,a){M(l,e,a),n(e,t),n(e,s),n(e,i),n(i,f),d||(m=C(e,"click",function(){fe(r[2])&&r[2].apply(this,arguments)}),d=!0)},p(l,a){r=l},d(l){l&&v(e),d=!1,m()}}}function $e(r,e){let t,s,i,f,d=e[6].name+"",m,l,a;return{key:r,first:null,c(){t=k("a"),s=k("i"),i=w(),f=k("li"),m=R(d),this.h()},l(c){t=E(c,"A",{href:!0,class:!0});var p=y(t);s=E(p,"I",{class:!0}),y(s).forEach(v),i=U(p),f=E(p,"LI",{});var h=y(f);m=F(h,d),h.forEach(v),p.forEach(v),this.h()},h(){u(s,"class",Ye(e[6].className)+" svelte-1jp0sts"),u(t,"href",e[6].href),u(t,"class","svelte-1jp0sts"),this.first=t},m(c,p){M(c,t,p),n(t,s),n(t,i),n(t,f),n(f,m),l||(a=C(t,"click",function(){fe(e[2])&&e[2].apply(this,arguments)}),l=!0)},p(c,p){e=c},d(c){c&&v(t),l=!1,a()}}}function st(r){var pe,ge,be,ke;let e,t,s,i,f,d,m,l,a=((pe=r[1])==null?void 0:pe.username)+"",c,p,h,b=((ge=r[1])==null?void 0:ge.email)+"",_,o,g,S,I,j,$=[],L=new Map,V,D,B,H,W,re,ie,de,T=(((be=r[1])==null?void 0:be.role)===te.ADMIN||((ke=r[1])==null?void 0:ke.role)===te.SUPER)&&Ue(r),ee=r[3];const ve=A=>A[6].name;for(let A=0;A<ee.length;A+=1){let N=we(r,ee,A),O=ve(N);L.set(O,$[A]=$e(O,N))}return{c(){e=k("div"),t=k("div"),s=k("img"),d=w(),m=k("div"),l=k("h3"),c=R(a),p=w(),h=k("p"),_=R(b),o=w(),g=k("span"),S=w(),I=k("ul"),T&&T.c(),j=w();for(let A=0;A<$.length;A+=1)$[A].c();V=w(),D=k("a"),B=k("i"),H=w(),W=k("li"),re=R("Logout"),this.h()},l(A){e=E(A,"DIV",{class:!0});var N=y(e);t=E(N,"DIV",{class:!0});var O=y(t);s=E(O,"IMG",{src:!0,alt:!0,class:!0}),d=U(O),m=E(O,"DIV",{});var q=y(m);l=E(q,"H3",{class:!0});var X=y(l);c=F(X,a),X.forEach(v),p=U(q),h=E(q,"P",{class:!0});var Z=y(h);_=F(Z,b),Z.forEach(v),q.forEach(v),O.forEach(v),o=U(N),g=E(N,"SPAN",{class:!0}),y(g).forEach(v),S=U(N),I=E(N,"UL",{class:!0});var G=y(I);T&&T.l(G),j=U(G);for(let ne=0;ne<$.length;ne+=1)$[ne].l(G);V=U(G),D=E(G,"A",{href:!0,class:!0});var Y=y(D);B=E(Y,"I",{class:!0}),y(B).forEach(v),H=U(Y),W=E(Y,"LI",{});var Ee=y(W);re=F(Ee,"Logout"),Ee.forEach(v),Y.forEach(v),G.forEach(v),N.forEach(v),this.h()},h(){var A,N;J(s.src,i=x+"/uploads/avatars/"+((A=r[1])==null?void 0:A.avatar))||u(s,"src",i),u(s,"alt",f=(N=r[1])==null?void 0:N.username),u(s,"class","svelte-1jp0sts"),u(l,"class","svelte-1jp0sts"),u(h,"class","svelte-1jp0sts"),u(t,"class","user-header svelte-1jp0sts"),u(g,"class","svelte-1jp0sts"),u(B,"class","fa-solid fa-right-from-bracket"),u(D,"href",x+"/api/auth/logout"),u(D,"class","svelte-1jp0sts"),u(I,"class","svelte-1jp0sts"),u(e,"class","user-list svelte-1jp0sts")},m(A,N){M(A,e,N),n(e,t),n(t,s),n(t,d),n(t,m),n(m,l),n(l,c),n(m,p),n(m,h),n(h,_),n(e,o),n(e,g),n(e,S),n(e,I),T&&T.m(I,null),n(I,j);for(let O=0;O<$.length;O+=1)$[O]&&$[O].m(I,null);n(I,V),n(I,D),n(D,B),n(D,H),n(D,W),n(W,re),ie||(de=[C(D,"click",Ce(r[4])),Fe(ze.call(null,e)),C(e,"outclick",r[5])],ie=!0)},p(A,[N]){var O,q,X,Z,G,Y;N&2&&!J(s.src,i=x+"/uploads/avatars/"+((O=A[1])==null?void 0:O.avatar))&&u(s,"src",i),N&2&&f!==(f=(q=A[1])==null?void 0:q.username)&&u(s,"alt",f),N&2&&a!==(a=((X=A[1])==null?void 0:X.username)+"")&&ye(c,a),N&2&&b!==(b=((Z=A[1])==null?void 0:Z.email)+"")&&ye(_,b),((G=A[1])==null?void 0:G.role)===te.ADMIN||((Y=A[1])==null?void 0:Y.role)===te.SUPER?T?T.p(A,N):(T=Ue(A),T.c(),T.m(I,j)):T&&(T.d(1),T=null),N&12&&(ee=A[3],$=Ge($,N,ve,1,A,ee,L,I,qe,$e,V,we))},i:Q,o:Q,d(A){A&&v(e),T&&T.d();for(let N=0;N<$.length;N+=1)$[N].d();ie=!1,Pe(de)}}}function lt(r,e,t){let{user:s}=e,{change:i}=e,{visible:f}=e;const d=[{href:`/user/${s.username}/post`,className:"fa-regular fa-image",name:"Post"},{href:`/user/${s.username}/favorite`,className:"fa-regular fa-star",name:"Favorite"},{href:`/user/${s.username}/comment`,className:"fa-regular fa-message",name:"Comments"},{href:`/user/${s.username}/about`,className:"fa-regular fa-file",name:"About"},{href:`/user/${s.username}/upload`,className:"fa-solid fa-arrow-up-from-bracket",name:"Upload"},{href:`/user/${s.username}/settings`,className:"fa-solid fa-gear",name:"Settings"}];async function m(a){const p=a.currentTarget.getAttribute("href"),h=await We({method:"POST",url:p,withCredentials:!0}).then(b=>b.data);i(),h.url&&(window.location.href="/")}const l=()=>t(0,f=!1);return r.$$set=a=>{"user"in a&&t(1,s=a.user),"change"in a&&t(2,i=a.change),"visible"in a&&t(0,f=a.visible)},[f,s,i,d,m,l]}class at extends se{constructor(e){super(),le(this,e,lt,st,ae,{user:1,change:2,visible:0})}}function rt(r){const e=r-1;return e*e*e+1}function De(r,{delay:e=0,duration:t=400,easing:s=rt,x:i=0,y:f=0,opacity:d=0}={}){const m=getComputedStyle(r),l=+m.opacity,a=m.transform==="none"?"":m.transform,c=l*(1-d),[p,h]=je(i),[b,_]=je(f);return{delay:e,duration:t,easing:s,css:(o,g)=>`
			transform: ${a} translate(${(1-o)*p}${h}, ${(1-o)*b}${_});
			opacity: ${l-c*g}`}}function it(r){let e,t,s,i=new Date().getFullYear()+"",f,d,m,l,a,c,p,h,b,_,o,g,S;return{c(){e=k("footer"),t=k("div"),s=R("imgShare © "),f=R(i),d=w(),m=k("a"),l=R("About"),a=w(),c=k("a"),p=R("Terms"),h=w(),b=k("a"),_=R("Rules"),this.h()},l(I){e=E(I,"FOOTER",{class:!0});var j=y(e);t=E(j,"DIV",{class:!0});var $=y(t);s=F($,"imgShare © "),f=F($,i),$.forEach(v),d=U(j),m=E(j,"A",{href:!0,class:!0});var L=y(m);l=F(L,"About"),L.forEach(v),a=U(j),c=E(j,"A",{href:!0,class:!0});var V=y(c);p=F(V,"Terms"),V.forEach(v),h=U(j),b=E(j,"A",{href:!0,class:!0});var D=y(b);_=F(D,"Rules"),D.forEach(v),j.forEach(v),this.h()},h(){u(t,"class","svelte-zgee83"),u(m,"href","/about"),u(m,"class","svelte-zgee83"),u(c,"href","/terms"),u(c,"class","svelte-zgee83"),u(b,"href","/rules"),u(b,"class","svelte-zgee83"),u(e,"class","svelte-zgee83")},m(I,j){M(I,e,j),n(e,t),n(t,s),n(t,f),n(e,d),n(e,m),n(m,l),n(e,a),n(e,c),n(c,p),n(e,h),n(e,b),n(b,_),S=!0},p:Q,i(I){S||(He(()=>{S&&(g&&g.end(1),o=Je(e,De,{y:50,duration:500}),o.start())}),S=!0)},o(I){o&&o.invalidate(),g=Ke(e,De,{y:50,duration:500}),S=!1},d(I){I&&v(e),I&&g&&g.end()}}}class nt extends se{constructor(e){super(),le(this,e,null,it,ae,{})}}function Le(r){let e,t,s,i;function f(l){r[7](l)}function d(l){r[8](l)}let m={user:r[0].user};return r[4]!==void 0&&(m.change=r[4]),r[1]!==void 0&&(m.visible=r[1]),e=new at({props:m}),Ie.push(()=>Ae(e,"change",f)),Ie.push(()=>Ae(e,"visible",d)),{c(){ce(e.$$.fragment)},l(l){_e(e.$$.fragment,l)},m(l,a){he(e,l,a),i=!0},p(l,a){const c={};a&1&&(c.user=l[0].user),!t&&a&16&&(t=!0,c.change=l[4],Ne(()=>t=!1)),!s&&a&2&&(s=!0,c.visible=l[1],Ne(()=>s=!1)),e.$set(c)},i(l){i||(P(e.$$.fragment,l),i=!0)},o(l){z(e.$$.fragment,l),i=!1},d(l){me(e,l)}}}function ot(r){let e,t,s=r[1]&&Le(r);return{c(){s&&s.c(),e=K()},l(i){s&&s.l(i),e=K()},m(i,f){s&&s.m(i,f),M(i,e,f),t=!0},p(i,f){i[1]?s?(s.p(i,f),f&2&&P(s,1)):(s=Le(i),s.c(),P(s,1),s.m(e.parentNode,e)):s&&(oe(),z(s,1,1,()=>{s=null}),ue())},i(i){t||(P(s),t=!0)},o(i){z(s),t=!1},d(i){s&&s.d(i),i&&v(e)}}}function Ve(r){let e,t;return e=new nt({}),{c(){ce(e.$$.fragment)},l(s){_e(e.$$.fragment,s)},m(s,i){he(e,s,i),t=!0},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){z(e.$$.fragment,s),t=!1},d(s){me(e,s)}}}function ut(r){var b;let e,t,s,i,f=r[2]&&(r[3]==="/"||((b=r[3])==null?void 0:b.includes("/gallery"))),d,m,l,a;e=new tt({props:{user:r[0].user,$$slots:{default:[ot]},$$scope:{ctx:r}}}),e.$on("click",function(){fe(r[4])&&r[4].apply(this,arguments)});const c=r[6].default,p=Te(c,r,r[9],null);let h=f&&Ve();return{c(){ce(e.$$.fragment),t=w(),s=k("div"),p&&p.c(),i=w(),h&&h.c(),d=K(),this.h()},l(_){_e(e.$$.fragment,_),t=U(_),s=E(_,"DIV",{class:!0});var o=y(s);p&&p.l(o),o.forEach(v),i=U(_),h&&h.l(_),d=K(),this.h()},h(){u(s,"class","main-container")},m(_,o){he(e,_,o),M(_,t,o),M(_,s,o),p&&p.m(s,null),M(_,i,o),h&&h.m(_,o),M(_,d,o),m=!0,l||(a=C(s,"wheel",r[5]),l=!0)},p(_,[o]){var S;r=_;const g={};o&1&&(g.user=r[0].user),o&531&&(g.$$scope={dirty:o,ctx:r}),e.$set(g),p&&p.p&&(!m||o&512)&&Me(p,c,r,r[9],m?Re(c,r[9],o,null):Oe(r[9]),null),o&12&&(f=r[2]&&(r[3]==="/"||((S=r[3])==null?void 0:S.includes("/gallery")))),f?h?o&12&&P(h,1):(h=Ve(),h.c(),P(h,1),h.m(d.parentNode,d)):h&&(oe(),z(h,1,1,()=>{h=null}),ue())},i(_){m||(P(e.$$.fragment,_),P(p,_),P(h),m=!0)},o(_){z(e.$$.fragment,_),z(p,_),z(h),m=!1},d(_){me(e,_),_&&v(t),_&&v(s),p&&p.d(_),_&&v(i),h&&h.d(_),_&&v(d),l=!1,a()}}}function ft(r,e,t){let{$$slots:s={},$$scope:i}=e,{data:f}=e,d=!1,m=!0,l,a=()=>t(1,d=!d);async function c(b){b.deltaY<=0?t(2,m=!0):t(2,m=!1)}Qe(()=>t(3,l=window.location.pathname));function p(b){a=b,t(4,a)}function h(b){d=b,t(1,d)}return r.$$set=b=>{"data"in b&&t(0,f=b.data),"$$scope"in b&&t(9,i=b.$$scope)},[f,d,m,l,a,c,s,p,h,i]}class vt extends se{constructor(e){super(),le(this,e,ft,ut,ae,{data:0})}}export{vt as default};
