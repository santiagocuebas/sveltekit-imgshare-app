import{S as fe,i as ce,s as me,H as Ee,k as p,a as O,q as R,l as k,m as E,c as V,h as d,r as U,n as c,C as _e,b as y,D as m,g as B,v as Ie,d as q,f as we,u as ne,I as je,J as De,K as Ce,F as Y,a2 as lt,e as ue,a3 as it,a0 as pe,N as ve,M as Oe,G as ae,w as $,L as tt,R as qe,Q as nt,Y as oe,y as x,z as ee,A as te,Z as re,B as se,$ as at,O as ot,a1 as rt}from"../chunks/index.d4184e2c.js";import{f as ke}from"../chunks/index.c08ef366.js";import{D as Q}from"../chunks/config.d32a4ad9.js";import{U as Ae}from"../chunks/enums.4774c07c.js";import{h as ze,a as Le}from"../chunks/services.1ba75943.js";import{B as ut}from"../chunks/BoxGallery.d2547153.js";import{a as Se}from"../chunks/axios.707ed124.js";import{c as st}from"../chunks/click-outside.61d417da.js";const ft=l=>({}),He=l=>({});function Fe(l){let e,t,s,i,a,r;const u=l[7].default,n=Ee(u,l,l[6],null);return{c(){e=p("div"),t=p("i"),s=O(),n&&n.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var f=E(e);t=k(f,"I",{class:!0}),E(t).forEach(d),s=V(f),n&&n.l(f),f.forEach(d),this.h()},h(){c(t,"class","fa-solid fa-ellipsis svelte-159uz2p"),c(e,"class","image-edit svelte-159uz2p")},m(o,f){y(o,e,f),m(e,t),m(e,s),n&&n.m(e,null),i=!0,a||(r=Y(t,"mousedown",l[8]),a=!0)},p(o,f){n&&n.p&&(!i||f&64)&&je(n,u,o,o[6],i?Ce(u,o[6],f,null):De(o[6]),null)},i(o){i||(B(n,o),i=!0)},o(o){q(n,o),i=!1},d(o){o&&d(e),n&&n.d(o),a=!1,r()}}}function ct(l){let e,t=l[0].description+"",s;return{c(){e=new lt(!1),s=ue(),this.h()},l(i){e=it(i,!1),s=ue(),this.h()},h(){e.a=s},m(i,a){e.m(t,i,a),y(i,s,a)},p(i,a){a&1&&t!==(t=i[0].description+"")&&e.p(t)},d(i){i&&d(s),i&&e.d()}}}function mt(l){let e,t,s,i,a,r,u,n,o,f,h;return{c(){e=p("form"),t=p("textarea"),s=O(),i=p("button"),a=R("Cancel"),r=O(),u=p("button"),n=R("Send"),this.h()},l(v){e=k(v,"FORM",{action:!0,method:!0,class:!0});var g=E(e);t=k(g,"TEXTAREA",{id:!0,name:!0,rows:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),E(t).forEach(d),s=V(g),i=k(g,"BUTTON",{class:!0});var _=E(i);a=U(_,"Cancel"),_.forEach(d),r=V(g),u=k(g,"BUTTON",{class:!0});var b=E(u);n=U(b,"Send"),b.forEach(d),g.forEach(d),this.h()},h(){c(t,"id","edit"),c(t,"name","description"),c(t,"rows","1"),c(t,"spellcheck","false"),c(t,"autocomplete","off"),c(t,"maxlength","4200"),c(t,"class","svelte-159uz2p"),c(i,"class","svelte-159uz2p"),c(u,"class","blue svelte-159uz2p"),c(e,"action",o=Q+"/api/image/"+l[0].id+"/description"),c(e,"method","POST"),c(e,"class","svelte-159uz2p")},m(v,g){y(v,e,g),m(e,t),pe(t,l[0].description),m(e,s),m(e,i),m(i,a),m(e,r),m(e,u),m(u,n),f||(h=[Y(t,"input",l[9]),Y(i,"click",ve(l[5])),Y(e,"submit",ve(l[4]))],f=!0)},p(v,g){g&1&&pe(t,v[0].description),g&1&&o!==(o=Q+"/api/image/"+v[0].id+"/description")&&c(e,"action",o)},d(v){v&&d(e),f=!1,Oe(h)}}}function _t(l){var Be,Re;let e,t,s,i,a,r=l[0].title+"",u,n,o,f,h,v,g,_,b,j,D=l[0].author+"",S,I,w,N,T=l[0].views+"",C,A,Z=ke(l[0].createdAt)+"",X,F,W,G,H,P,M,be,J,K=l[3]&&(((Be=l[3])==null?void 0:Be.username)===l[0].author||((Re=l[3])==null?void 0:Re.role)!==Ae.EDITOR)&&Fe(l);function Te(z,L){return z[2]?mt:ct}let de=Te(l),le=de(l);const Pe=l[7].assessment,ie=Ee(Pe,l,l[6],He);return{c(){e=p("div"),K&&K.c(),t=O(),s=p("h2"),i=p("i"),a=O(),u=R(r),n=O(),o=p("div"),f=p("a"),h=p("img"),b=O(),j=p("a"),S=R(D),w=O(),N=p("p"),C=R(T),A=R(" views ● "),X=R(Z),F=O(),W=p("img"),P=O(),M=p("div"),le.c(),be=O(),ie&&ie.c(),this.h()},l(z){e=k(z,"DIV",{class:!0});var L=E(e);K&&K.l(L),t=V(L),s=k(L,"H2",{class:!0});var ge=E(s);i=k(ge,"I",{class:!0}),E(i).forEach(d),a=V(ge),u=U(ge,r),ge.forEach(d),n=V(L),o=k(L,"DIV",{class:!0});var he=E(o);f=k(he,"A",{class:!0,href:!0});var Ue=E(f);h=k(Ue,"IMG",{src:!0,alt:!0,class:!0}),Ue.forEach(d),b=V(he),j=k(he,"A",{class:!0,href:!0});var ye=E(j);S=U(ye,D),ye.forEach(d),w=V(he),N=k(he,"P",{});var Ve=E(N);C=U(Ve,T),A=U(Ve," views ● "),X=U(Ve,Z),Ve.forEach(d),he.forEach(d),F=V(L),W=k(L,"IMG",{class:!0,src:!0,alt:!0}),P=V(L),M=k(L,"DIV",{class:!0});var Me=E(M);le.l(Me),Me.forEach(d),be=V(L),ie&&ie.l(L),L.forEach(d),this.h()},h(){c(i,"class","fa-solid fa-image title-icon"),c(s,"class","title"),_e(h.src,v=Q+"/uploads/avatars/"+l[0].avatar)||c(h,"src",v),c(h,"alt",g=l[0].author),c(h,"class","svelte-159uz2p"),c(f,"class","image-author-link svelte-159uz2p"),c(f,"href",_="/user/"+l[0].author),c(j,"class","image-author-username svelte-159uz2p"),c(j,"href",I="/user/"+l[0].author),c(o,"class","image-author svelte-159uz2p"),c(W,"class","image-content svelte-159uz2p"),_e(W.src,G=Q+"/uploads/"+l[0].filename)||c(W,"src",G),c(W,"alt",H=l[0].title),c(M,"class","image-description svelte-159uz2p"),c(e,"class","image-box svelte-159uz2p")},m(z,L){y(z,e,L),K&&K.m(e,null),m(e,t),m(e,s),m(s,i),m(s,a),m(s,u),m(e,n),m(e,o),m(o,f),m(f,h),m(o,b),m(o,j),m(j,S),m(o,w),m(o,N),m(N,C),m(N,A),m(N,X),m(e,F),m(e,W),m(e,P),m(e,M),le.m(M,null),m(e,be),ie&&ie.m(e,null),J=!0},p(z,[L]){var ge,he;z[3]&&(((ge=z[3])==null?void 0:ge.username)===z[0].author||((he=z[3])==null?void 0:he.role)!==Ae.EDITOR)?K?(K.p(z,L),L&9&&B(K,1)):(K=Fe(z),K.c(),B(K,1),K.m(e,t)):K&&(Ie(),q(K,1,1,()=>{K=null}),we()),(!J||L&1)&&r!==(r=z[0].title+"")&&ne(u,r),(!J||L&1&&!_e(h.src,v=Q+"/uploads/avatars/"+z[0].avatar))&&c(h,"src",v),(!J||L&1&&g!==(g=z[0].author))&&c(h,"alt",g),(!J||L&1&&_!==(_="/user/"+z[0].author))&&c(f,"href",_),(!J||L&1)&&D!==(D=z[0].author+"")&&ne(S,D),(!J||L&1&&I!==(I="/user/"+z[0].author))&&c(j,"href",I),(!J||L&1)&&T!==(T=z[0].views+"")&&ne(C,T),(!J||L&1)&&Z!==(Z=ke(z[0].createdAt)+"")&&ne(X,Z),(!J||L&1&&!_e(W.src,G=Q+"/uploads/"+z[0].filename))&&c(W,"src",G),(!J||L&1&&H!==(H=z[0].title))&&c(W,"alt",H),de===(de=Te(z))&&le?le.p(z,L):(le.d(1),le=de(z),le&&(le.c(),le.m(M,null))),ie&&ie.p&&(!J||L&64)&&je(ie,Pe,z,z[6],J?Ce(Pe,z[6],L,ft):De(z[6]),He)},i(z){J||(B(K),B(ie,z),J=!0)},o(z){q(K),q(ie,z),J=!1},d(z){z&&d(e),K&&K.d(),le.d(),ie&&ie.d(z)}}}function ht(l,e,t){let{$$slots:s={},$$scope:i}=e,{image:a}=e,{user:r}=e,{visible:u}=e,{description:n}=e;async function o(){t(2,n=!1),ze(this)}async function f(){t(2,n=!1)}const h=()=>t(1,u=!u);function v(){a.description=this.value,t(0,a)}return l.$$set=g=>{"image"in g&&t(0,a=g.image),"user"in g&&t(3,r=g.user),"visible"in g&&t(1,u=g.visible),"description"in g&&t(2,n=g.description),"$$scope"in g&&t(6,i=g.$$scope)},[a,u,n,r,o,f,i,s,h,v]}class dt extends fe{constructor(e){super(),ce(this,e,ht,_t,me,{image:0,user:3,visible:1,description:2})}}function gt(l){let e,t,s,i,a,r,u;const n=l[1].default,o=Ee(n,l,l[0],null);return{c(){e=p("div"),t=p("div"),s=p("h2"),i=p("i"),a=R(`\r
			Recent Uploads`),r=O(),o&&o.c(),this.h()},l(f){e=k(f,"DIV",{class:!0});var h=E(e);t=k(h,"DIV",{class:!0});var v=E(t);s=k(v,"H2",{class:!0});var g=E(s);i=k(g,"I",{class:!0}),E(i).forEach(d),a=U(g,`\r
			Recent Uploads`),g.forEach(d),r=V(v),o&&o.l(v),v.forEach(d),h.forEach(d),this.h()},h(){c(i,"class","fa-solid fa-images title-icon"),c(s,"class","title"),c(t,"class","sidebar-container svelte-pei3k5"),c(e,"class","sidebar svelte-pei3k5")},m(f,h){y(f,e,h),m(e,t),m(t,s),m(s,i),m(s,a),m(t,r),o&&o.m(t,null),u=!0},p(f,[h]){o&&o.p&&(!u||h&1)&&je(o,n,f,f[0],u?Ce(n,f[0],h,null):De(f[0]),null)},i(f){u||(B(o,f),u=!0)},o(f){q(o,f),u=!1},d(f){f&&d(e),o&&o.d(f)}}}function vt(l,e,t){let{$$slots:s={},$$scope:i}=e;return l.$$set=a=>{"$$scope"in a&&t(0,i=a.$$scope)},[i,s]}class bt extends fe{constructor(e){super(),ce(this,e,vt,gt,me,{})}}function pt(l){let e,t;const s=l[1].default,i=Ee(s,l,l[0],null);return{c(){e=p("div"),i&&i.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var r=E(e);i&&i.l(r),r.forEach(d),this.h()},h(){c(e,"class","comments svelte-1n6d5p9")},m(a,r){y(a,e,r),i&&i.m(e,null),t=!0},p(a,[r]){i&&i.p&&(!t||r&1)&&je(i,s,a,a[0],t?Ce(s,a[0],r,null):De(a[0]),null)},i(a){t||(B(i,a),t=!0)},o(a){q(i,a),t=!1},d(a){a&&d(e),i&&i.d(a)}}}function kt(l,e,t){let{$$slots:s={},$$scope:i}=e;return l.$$set=a=>{"$$scope"in a&&t(0,i=a.$$scope)},[i,s]}class Et extends fe{constructor(e){super(),ce(this,e,kt,pt,me,{})}}function It(l){let e,t,s,i,a,r,u,n,o,f;return{c(){e=p("div"),t=R(`Must be register to comment\r
  `),s=p("div"),i=p("a"),a=p("button"),r=R("Signin"),u=O(),n=p("a"),o=p("button"),f=R("Signup"),this.h()},l(h){e=k(h,"DIV",{class:!0});var v=E(e);t=U(v,`Must be register to comment\r
  `),s=k(v,"DIV",{class:!0});var g=E(s);i=k(g,"A",{href:!0});var _=E(i);a=k(_,"BUTTON",{class:!0});var b=E(a);r=U(b,"Signin"),b.forEach(d),_.forEach(d),u=V(g),n=k(g,"A",{href:!0});var j=E(n);o=k(j,"BUTTON",{class:!0});var D=E(o);f=U(D,"Signup"),D.forEach(d),j.forEach(d),g.forEach(d),v.forEach(d),this.h()},h(){c(a,"class","black svelte-5jkpge"),c(i,"href","/signin"),c(o,"class","green svelte-5jkpge"),c(n,"href","/signup"),c(s,"class","svelte-5jkpge"),c(e,"class","register svelte-5jkpge")},m(h,v){y(h,e,v),m(e,t),m(e,s),m(s,i),m(i,a),m(a,r),m(s,u),m(s,n),m(n,o),m(o,f)},p:ae,i:ae,o:ae,d(h){h&&d(e)}}}class wt extends fe{constructor(e){super(),ce(this,e,null,It,me,{})}}function Ge(l){let e,t,s,i,a,r,u,n,o,f;return{c(){e=p("span"),t=p("button"),s=R("Cancel"),i=O(),a=p("button"),r=R("Comment"),this.h()},l(h){e=k(h,"SPAN",{class:!0});var v=E(e);t=k(v,"BUTTON",{class:!0});var g=E(t);s=U(g,"Cancel"),g.forEach(d),i=V(v),a=k(v,"BUTTON",{class:!0});var _=E(a);r=U(_,"Comment"),_.forEach(d),v.forEach(d),this.h()},h(){c(t,"class","svelte-1slore9"),c(a,"class",u="blue "+(l[2].length>0?"":"disabled")+" svelte-1slore9"),a.disabled=n=!(l[2].length>0),c(e,"class","svelte-1slore9")},m(h,v){y(h,e,v),m(e,t),m(t,s),m(e,i),m(e,a),m(a,r),o||(f=Y(t,"click",l[11]),o=!0)},p(h,v){v&4&&u!==(u="blue "+(h[2].length>0?"":"disabled")+" svelte-1slore9")&&c(a,"class",u),v&4&&n!==(n=!(h[2].length>0))&&(a.disabled=n)},d(h){h&&d(e),o=!1,f()}}}function jt(l){let e,t,s,i,a,r,u,n,o,f,h,v,g,_,b=l[3]&&Ge(l);return{c(){e=p("div"),t=p("h2"),s=p("i"),i=R(`\r
		Post`),a=O(),r=p("form"),u=p("img"),o=O(),f=p("input"),h=O(),b&&b.c(),this.h()},l(j){e=k(j,"DIV",{class:!0});var D=E(e);t=k(D,"H2",{class:!0});var S=E(t);s=k(S,"I",{class:!0}),E(s).forEach(d),i=U(S,`\r
		Post`),S.forEach(d),a=V(D),r=k(D,"FORM",{action:!0,method:!0,class:!0});var I=E(r);u=k(I,"IMG",{src:!0,alt:!0,class:!0}),o=V(I),f=k(I,"INPUT",{type:!0,name:!0,placeholder:!0,autocomplete:!0,spellcheck:!0,class:!0}),h=V(I),b&&b.l(I),I.forEach(d),D.forEach(d),this.h()},h(){c(s,"class","fa-regular fa-copy title-icon"),c(t,"class","title"),_e(u.src,n=Q+"/uploads/avatars/"+l[1])||c(u,"src",n),c(u,"alt",l[0]),c(u,"class","svelte-1slore9"),c(f,"type","text"),c(f,"name","comment"),c(f,"placeholder","Send a comment..."),c(f,"autocomplete","off"),c(f,"spellcheck","false"),c(f,"class","svelte-1slore9"),c(r,"action",v=Q+"/api/image/"+l[0]+"/comment"),c(r,"method","POST"),c(r,"class","svelte-1slore9"),c(e,"class","svelte-1slore9")},m(j,D){y(j,e,D),m(e,t),m(t,s),m(t,i),m(e,a),m(e,r),m(r,u),m(r,o),m(r,f),pe(f,l[2]),l[9](f),m(r,h),b&&b.m(r,null),g||(_=[Y(f,"input",l[8]),Y(f,"focus",l[10]),Y(r,"submit",ve(l[6]))],g=!0)},p(j,[D]){D&2&&!_e(u.src,n=Q+"/uploads/avatars/"+j[1])&&c(u,"src",n),D&1&&c(u,"alt",j[0]),D&4&&f.value!==j[2]&&pe(f,j[2]),j[3]?b?b.p(j,D):(b=Ge(j),b.c(),b.m(r,null)):b&&(b.d(1),b=null),D&1&&v!==(v=Q+"/api/image/"+j[0]+"/comment")&&c(r,"action",v)},i:ae,o:ae,d(j){j&&d(e),l[9](null),b&&b.d(),g=!1,Oe(_)}}}function Dt(l,e,t){let{imageId:s}=e,{avatar:i}=e,{comments:a}=e,r="",u=!1,n;const o=b=>{t(2,r=""),n.blur(),t(3,u=b)};async function f(){const b=await ze(this);b.comment&&t(7,a=[b.comment,...a]),o(!1)}function h(){r=this.value,t(2,r)}function v(b){$[b?"unshift":"push"](()=>{n=b,t(4,n)})}const g=()=>t(3,u=!0),_=()=>o(!1);return l.$$set=b=>{"imageId"in b&&t(0,s=b.imageId),"avatar"in b&&t(1,i=b.avatar),"comments"in b&&t(7,a=b.comments)},[s,i,r,u,n,o,f,a,h,v,g,_]}class Ct extends fe{constructor(e){super(),ce(this,e,Dt,jt,me,{imageId:0,avatar:1,comments:7})}}function Je(l){let e,t;const s=l[2].default,i=Ee(s,l,l[1],null);return{c(){e=p("div"),i&&i.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var r=E(e);i&&i.l(r),r.forEach(d),this.h()},h(){c(e,"class","comments-list svelte-1y2cz3c")},m(a,r){y(a,e,r),i&&i.m(e,null),t=!0},p(a,r){i&&i.p&&(!t||r&2)&&je(i,s,a,a[1],t?Ce(s,a[1],r,null):De(a[1]),null)},i(a){t||(B(i,a),t=!0)},o(a){q(i,a),t=!1},d(a){a&&d(e),i&&i.d(a)}}}function Tt(l){let e,t,s,i,a,r,u,n,o=l[0]>0&&Je(l);return{c(){e=p("div"),t=p("h2"),s=p("i"),i=O(),a=R(l[0]),r=R(" Comments"),u=O(),o&&o.c(),this.h()},l(f){e=k(f,"DIV",{class:!0});var h=E(e);t=k(h,"H2",{class:!0});var v=E(t);s=k(v,"I",{class:!0}),E(s).forEach(d),i=V(v),a=U(v,l[0]),r=U(v," Comments"),v.forEach(d),u=V(h),o&&o.l(h),h.forEach(d),this.h()},h(){c(s,"class","fa-solid fa-message title-icon"),c(t,"class","title"),c(e,"class","comments-container svelte-1y2cz3c")},m(f,h){y(f,e,h),m(e,t),m(t,s),m(t,i),m(t,a),m(t,r),m(e,u),o&&o.m(e,null),n=!0},p(f,[h]){(!n||h&1)&&ne(a,f[0]),f[0]>0?o?(o.p(f,h),h&1&&B(o,1)):(o=Je(f),o.c(),B(o,1),o.m(e,null)):o&&(Ie(),q(o,1,1,()=>{o=null}),we())},i(f){n||(B(o),n=!0)},o(f){q(o),n=!1},d(f){f&&d(e),o&&o.d()}}}function Nt(l,e,t){let{$$slots:s={},$$scope:i}=e,{totalComments:a}=e;return l.$$set=r=>{"totalComments"in r&&t(0,a=r.totalComments),"$$scope"in r&&t(1,i=r.$$scope)},[a,i,s]}class Ot extends fe{constructor(e){super(),ce(this,e,Nt,Tt,me,{totalComments:0})}}function Ke(l){let e,t;return{c(){e=p("p"),t=R("(edit)"),this.h()},l(s){e=k(s,"P",{class:!0});var i=E(e);t=U(i,"(edit)"),i.forEach(d),this.h()},h(){c(e,"class","grey svelte-3y2i6b")},m(s,i){y(s,e,i),m(e,t)},d(s){s&&d(e)}}}function Vt(l){let e,t=l[0].comment+"",s;return{c(){e=p("div"),s=R(t),this.h()},l(i){e=k(i,"DIV",{class:!0});var a=E(e);s=U(a,t),a.forEach(d),this.h()},h(){c(e,"class","comment-content svelte-3y2i6b")},m(i,a){y(i,e,a),m(e,s)},p(i,a){a&1&&t!==(t=i[0].comment+"")&&ne(s,t)},d(i){i&&d(e)}}}function At(l){let e,t,s,i,a,r,u,n,o,f,h,v,g,_,b;return{c(){e=p("form"),t=p("input"),s=O(),i=p("button"),a=p("i"),r=R(`\r
				Cancel`),u=O(),n=p("button"),o=p("i"),f=R(`\r
				Done`),this.h()},l(j){e=k(j,"FORM",{class:!0,action:!0,method:!0});var D=E(e);t=k(D,"INPUT",{type:!0,name:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),s=V(D),i=k(D,"BUTTON",{class:!0});var S=E(i);a=k(S,"I",{class:!0}),E(a).forEach(d),r=U(S,`\r
				Cancel`),S.forEach(d),u=V(D),n=k(D,"BUTTON",{class:!0});var I=E(n);o=k(I,"I",{class:!0}),E(o).forEach(d),f=U(I,`\r
				Done`),I.forEach(d),D.forEach(d),this.h()},h(){c(t,"type","text"),c(t,"name","comment"),c(t,"spellcheck","false"),c(t,"autocomplete","off"),c(t,"maxlength","4200"),c(t,"class","svelte-3y2i6b"),c(a,"class","fa-solid fa-cancel svelte-3y2i6b"),c(i,"class","red svelte-3y2i6b"),c(o,"class","fa-solid fa-check svelte-3y2i6b"),c(n,"class",h=qe(l[5].length>0?"":"disabled")+" svelte-3y2i6b"),n.disabled=v=!(l[5].length>0),c(e,"class","comment-form svelte-3y2i6b"),c(e,"action",g=Q+"/api/comment/"+l[0].id+"/edit"),c(e,"method","POST")},m(j,D){y(j,e,D),m(e,t),pe(t,l[5]),l[14](t),m(e,s),m(e,i),m(i,a),m(i,r),m(e,u),m(e,n),m(n,o),m(n,f),_||(b=[Y(t,"input",l[13]),Y(i,"click",ve(l[7])),Y(e,"submit",ve(l[8]))],_=!0)},p(j,D){D&32&&t.value!==j[5]&&pe(t,j[5]),D&32&&h!==(h=qe(j[5].length>0?"":"disabled")+" svelte-3y2i6b")&&c(n,"class",h),D&32&&v!==(v=!(j[5].length>0))&&(n.disabled=v),D&1&&g!==(g=Q+"/api/comment/"+j[0].id+"/edit")&&c(e,"action",g)},d(j){j&&d(e),l[14](null),_=!1,Oe(b)}}}function Qe(l){let e,t,s,i,a,r,u=l[3]&&Xe(l);return{c(){e=p("button"),t=p("i"),s=O(),u&&u.c(),i=ue(),this.h()},l(n){e=k(n,"BUTTON",{class:!0});var o=E(e);t=k(o,"I",{class:!0}),E(t).forEach(d),o.forEach(d),s=V(n),u&&u.l(n),i=ue(),this.h()},h(){c(t,"class","fa-solid fa-ellipsis-vertical fa-lg svelte-3y2i6b"),c(e,"class","comment-button svelte-3y2i6b")},m(n,o){y(n,e,o),m(e,t),y(n,s,o),u&&u.m(n,o),y(n,i,o),a||(r=Y(e,"click",l[15]),a=!0)},p(n,o){n[3]?u?u.p(n,o):(u=Xe(n),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},d(n){n&&d(e),n&&d(s),u&&u.d(n),n&&d(i),a=!1,r()}}}function Xe(l){let e,t,s,i,a,r,u,n=l[1].username===l[0].author&&Ye(l);return{c(){e=p("ul"),n&&n.c(),t=O(),s=p("li"),i=p("i"),a=R(`\r
					Delete`),this.h()},l(o){e=k(o,"UL",{class:!0});var f=E(e);n&&n.l(f),t=V(f),s=k(f,"LI",{class:!0});var h=E(s);i=k(h,"I",{class:!0}),E(i).forEach(d),a=U(h,`\r
					Delete`),h.forEach(d),f.forEach(d),this.h()},h(){c(i,"class","fa-solid fa-square-minus svelte-3y2i6b"),c(s,"class","svelte-3y2i6b"),c(e,"class","svelte-3y2i6b")},m(o,f){y(o,e,f),n&&n.m(e,null),m(e,t),m(e,s),m(s,i),m(s,a),r||(u=[Y(s,"mousedown",l[9]),tt(st.call(null,e)),Y(e,"outclick",l[16])],r=!0)},p(o,f){o[1].username===o[0].author?n?n.p(o,f):(n=Ye(o),n.c(),n.m(e,t)):n&&(n.d(1),n=null)},d(o){o&&d(e),n&&n.d(),r=!1,Oe(u)}}}function Ye(l){let e,t,s,i,a;return{c(){e=p("li"),t=p("i"),s=R(`\r
						Edit`),this.h()},l(r){e=k(r,"LI",{class:!0});var u=E(e);t=k(u,"I",{class:!0}),E(t).forEach(d),s=U(u,`\r
						Edit`),u.forEach(d),this.h()},h(){c(t,"class","fa-solid fa-pen svelte-3y2i6b"),c(e,"class","svelte-3y2i6b")},m(r,u){y(r,e,u),m(e,t),m(e,s),i||(a=Y(e,"mousedown",l[6]),i=!0)},p:ae,d(r){r&&d(e),i=!1,a()}}}function Pt(l){let e,t,s,i,a,r,u,n,o,f=l[0].author+"",h,v,g,_,b=ke(l[0].createdAt)+"",j,D,S,I,w,N,T,C,A=l[0].edit&&Ke();function Z(P,M){return P[4]?At:Vt}let X=Z(l),F=X(l);const W=l[12].default,G=Ee(W,l,l[11],null);let H=l[1]&&(l[1].username===l[0].author||l[1].username===l[0].receiver||l[1].role!==Ae.EDITOR)&&Qe(l);return{c(){e=p("div"),t=p("a"),s=p("img"),u=O(),n=p("div"),o=p("a"),h=R(f),g=R(`\r
		●\r
		`),_=p("p"),j=R(b),D=O(),A&&A.c(),S=O(),F.c(),I=O(),w=p("div"),G&&G.c(),N=O(),T=p("div"),H&&H.c(),this.h()},l(P){e=k(P,"DIV",{class:!0});var M=E(e);t=k(M,"A",{class:!0,href:!0});var be=E(t);s=k(be,"IMG",{src:!0,alt:!0,class:!0}),be.forEach(d),u=V(M),n=k(M,"DIV",{class:!0});var J=E(n);o=k(J,"A",{href:!0,class:!0});var K=E(o);h=U(K,f),K.forEach(d),g=U(J,`\r
		●\r
		`),_=k(J,"P",{});var Te=E(_);j=U(Te,b),Te.forEach(d),D=V(J),A&&A.l(J),J.forEach(d),S=V(M),F.l(M),I=V(M),w=k(M,"DIV",{class:!0});var de=E(w);G&&G.l(de),de.forEach(d),N=V(M),T=k(M,"DIV",{class:!0});var le=E(T);H&&H.l(le),le.forEach(d),M.forEach(d),this.h()},h(){_e(s.src,i=Q+"/uploads/avatars/"+l[0].avatar)||c(s,"src",i),c(s,"alt",a=l[0].author),c(s,"class","svelte-3y2i6b"),c(t,"class","comment-avatar svelte-3y2i6b"),c(t,"href",r="/user/"+l[0].author),c(o,"href",v="/user/"+l[0].author),c(o,"class","svelte-3y2i6b"),c(n,"class","comment-author svelte-3y2i6b"),c(w,"class","svelte-3y2i6b"),c(T,"class","comment-options svelte-3y2i6b"),c(e,"class","comment svelte-3y2i6b")},m(P,M){y(P,e,M),m(e,t),m(t,s),m(e,u),m(e,n),m(n,o),m(o,h),m(n,g),m(n,_),m(_,j),m(n,D),A&&A.m(n,null),m(e,S),F.m(e,null),m(e,I),m(e,w),G&&G.m(w,null),m(e,N),m(e,T),H&&H.m(T,null),C=!0},p(P,[M]){(!C||M&1&&!_e(s.src,i=Q+"/uploads/avatars/"+P[0].avatar))&&c(s,"src",i),(!C||M&1&&a!==(a=P[0].author))&&c(s,"alt",a),(!C||M&1&&r!==(r="/user/"+P[0].author))&&c(t,"href",r),(!C||M&1)&&f!==(f=P[0].author+"")&&ne(h,f),(!C||M&1&&v!==(v="/user/"+P[0].author))&&c(o,"href",v),(!C||M&1)&&b!==(b=ke(P[0].createdAt)+"")&&ne(j,b),P[0].edit?A||(A=Ke(),A.c(),A.m(n,null)):A&&(A.d(1),A=null),X===(X=Z(P))&&F?F.p(P,M):(F.d(1),F=X(P),F&&(F.c(),F.m(e,I))),G&&G.p&&(!C||M&2048)&&je(G,W,P,P[11],C?Ce(W,P[11],M,null):De(P[11]),null),P[1]&&(P[1].username===P[0].author||P[1].username===P[0].receiver||P[1].role!==Ae.EDITOR)?H?H.p(P,M):(H=Qe(P),H.c(),H.m(T,null)):H&&(H.d(1),H=null)},i(P){C||(B(G,P),C=!0)},o(P){q(G,P),C=!1},d(P){P&&d(e),A&&A.d(),F.d(),G&&G.d(P),H&&H.d()}}}function St(l,e,t){let{$$slots:s={},$$scope:i}=e,{comment:a}=e,{comments:r}=e,{user:u}=e,n,o=!1,f=!1,h=a.comment;async function v(){t(4,f=!0),t(3,o=!1),n.focus()}async function g(){t(4,f=!1),t(5,h=a.comment),n.blur()}async function _(){t(4,f=!1),t(0,a.edit=!0,a),t(0,a.comment=h,a),ze(this)}async function b(){t(3,o=!1),t(10,r=r.filter(({id:w})=>w!==a.id)),await Se({method:"DELETE",url:`${Q}/api/comment/${a.id}`,withCredentials:!0})}function j(){h=this.value,t(5,h)}function D(w){$[w?"unshift":"push"](()=>{n=w,t(2,n)})}const S=()=>t(3,o=!o),I=()=>t(3,o=!1);return l.$$set=w=>{"comment"in w&&t(0,a=w.comment),"comments"in w&&t(10,r=w.comments),"user"in w&&t(1,u=w.user),"$$scope"in w&&t(11,i=w.$$scope)},[a,u,n,o,f,h,v,g,_,b,r,i,s,j,D,S,I]}class zt extends fe{constructor(e){super(),ce(this,e,St,Pt,me,{comment:0,comments:10,user:1})}}function Bt(l){let e,t,s,i,a,r,u=l[0].title+"",n,o,f,h=l[0].author+"",v,g,_,b=l[0].views+"",j,D,S=ke(l[0].createdAt)+"",I,w,N;return{c(){e=p("a"),t=p("img"),a=O(),r=p("h2"),n=R(u),o=O(),f=p("p"),v=R(h),g=O(),_=p("div"),j=R(b),D=R(" views ● "),I=R(S),this.h()},l(T){e=k(T,"A",{href:!0,title:!0,class:!0});var C=E(e);t=k(C,"IMG",{src:!0,alt:!0,class:!0}),a=V(C),r=k(C,"H2",{class:!0});var A=E(r);n=U(A,u),A.forEach(d),o=V(C),f=k(C,"P",{class:!0});var Z=E(f);v=U(Z,h),Z.forEach(d),g=V(C),_=k(C,"DIV",{class:!0});var X=E(_);j=U(X,b),D=U(X," views ● "),I=U(X,S),X.forEach(d),C.forEach(d),this.h()},h(){_e(t.src,s=Q+"/uploads/"+l[0].filename)||c(t,"src",s),c(t,"alt",i=l[0].title),c(t,"class","svelte-18hblro"),c(r,"class","svelte-18hblro"),c(f,"class","svelte-18hblro"),c(_,"class","svelte-18hblro"),c(e,"href",w="/gallery/"+l[0].id),c(e,"title",N=l[0].title),c(e,"class","svelte-18hblro")},m(T,C){y(T,e,C),m(e,t),m(e,a),m(e,r),m(r,n),m(e,o),m(e,f),m(f,v),m(e,g),m(e,_),m(_,j),m(_,D),m(_,I)},p(T,[C]){C&1&&!_e(t.src,s=Q+"/uploads/"+T[0].filename)&&c(t,"src",s),C&1&&i!==(i=T[0].title)&&c(t,"alt",i),C&1&&u!==(u=T[0].title+"")&&ne(n,u),C&1&&h!==(h=T[0].author+"")&&ne(v,h),C&1&&b!==(b=T[0].views+"")&&ne(j,b),C&1&&S!==(S=ke(T[0].createdAt)+"")&&ne(I,S),C&1&&w!==(w="/gallery/"+T[0].id)&&c(e,"href",w),C&1&&N!==(N=T[0].title)&&c(e,"title",N)},i:ae,o:ae,d(T){T&&d(e)}}}function Rt(l,e,t){let{image:s}=e;return l.$$set=i=>{"image"in i&&t(0,s=i.image)},[s]}class Ut extends fe{constructor(e){super(),ce(this,e,Rt,Bt,me,{image:0})}}function yt(l){let e;return{c(){e=p("i"),this.h()},l(t){e=k(t,"I",{class:!0}),E(e).forEach(d),this.h()},h(){c(e,"class","fa-solid fa-eye-slash")},m(t,s){y(t,e,s)},d(t){t&&d(e)}}}function Mt(l){let e;return{c(){e=p("i"),this.h()},l(t){e=k(t,"I",{class:!0}),E(e).forEach(d),this.h()},h(){c(e,"class","fa-solid fa-eye")},m(t,s){y(t,e,s)},d(t){t&&d(e)}}}function qt(l){let e,t,s,i,a,r,u,n,o,f,h,v,g,_,b,j,D,S,I;function w(C,A){return C[0].isPublic?Mt:yt}let N=w(l),T=N(l);return{c(){e=p("ul"),t=p("a"),s=p("li"),i=R("Edit"),a=O(),r=p("i"),u=O(),n=p("a"),o=p("li"),f=R("Public"),h=O(),T.c(),v=O(),g=p("a"),_=p("li"),b=R("Delete"),j=O(),D=p("i"),this.h()},l(C){e=k(C,"UL",{class:!0});var A=E(e);t=k(A,"A",{href:!0,class:!0});var Z=E(t);s=k(Z,"LI",{});var X=E(s);i=U(X,"Edit"),X.forEach(d),a=V(Z),r=k(Z,"I",{class:!0}),E(r).forEach(d),Z.forEach(d),u=V(A),n=k(A,"A",{href:!0,class:!0});var F=E(n);o=k(F,"LI",{});var W=E(o);f=U(W,"Public"),W.forEach(d),h=V(F),T.l(F),F.forEach(d),v=V(A),g=k(A,"A",{href:!0,class:!0});var G=E(g);_=k(G,"LI",{});var H=E(_);b=U(H,"Delete"),H.forEach(d),j=V(G),D=k(G,"I",{class:!0}),E(D).forEach(d),G.forEach(d),A.forEach(d),this.h()},h(){c(r,"class","fa-solid fa-pen"),c(t,"href","#edit"),c(t,"class","svelte-1jhluf3"),c(n,"href","#placeholder"),c(n,"class","svelte-1jhluf3"),c(D,"class","fa-solid fa-delete-left"),c(g,"href","#placeholder"),c(g,"class","svelte-1jhluf3"),c(e,"class","svelte-1jhluf3")},m(C,A){y(C,e,A),m(e,t),m(t,s),m(s,i),m(t,a),m(t,r),m(e,u),m(e,n),m(n,o),m(o,f),m(n,h),T.m(n,null),m(e,v),m(e,g),m(g,_),m(_,b),m(g,j),m(g,D),S||(I=[Y(t,"click",l[2]),Y(n,"click",ve(l[3])),Y(g,"click",ve(l[4])),tt(st.call(null,e)),Y(e,"outclick",l[6])],S=!0)},p(C,[A]){N!==(N=w(C))&&(T.d(1),T=N(C),T&&(T.c(),T.m(n,null)))},i:ae,o:ae,d(C){C&&d(e),T.d(),S=!1,Oe(I)}}}function Lt(l,e,t){let{image:s}=e,{visible:i}=e,{description:a}=e;const r=()=>{t(1,i=!1),t(5,a=!0)},u=async()=>{t(1,i=!1),await Se({method:"POST",url:`${Q}/api/image/${s.id}/public`,withCredentials:!0}),t(0,s.isPublic=!s.isPublic,s)},n=async()=>{t(1,i=!1),await Se({method:"DELETE",url:`${Q}/api/image/${s.id}`,withCredentials:!0}),window.location.href="/"},o=()=>t(1,i=!1);return l.$$set=f=>{"image"in f&&t(0,s=f.image),"visible"in f&&t(1,i=f.visible),"description"in f&&t(5,a=f.description)},[s,i,r,u,n,a,o]}class Ht extends fe{constructor(e){super(),ce(this,e,Lt,qt,me,{image:0,visible:1,description:5})}}function Ft(l){return l.favorite!==void 0}function Gt(l){let e,t,s,i,a,r,u;return{c(){e=p("div"),t=p("i"),i=O(),a=R(l[5]),this.h()},l(n){e=k(n,"DIV",{class:!0});var o=E(e);t=k(o,"I",{id:!0,class:!0}),E(t).forEach(d),i=V(o),a=U(o,l[5]),o.forEach(d),this.h()},h(){c(t,"id",l[0]),c(t,"class",s="fa-solid "+l[1]+" "+(l[3]?l[2]:"")+" svelte-xdj7pf"),c(e,"class","svelte-xdj7pf")},m(n,o){y(n,e,o),m(e,t),m(e,i),m(e,a),r||(u=Y(t,"mousedown",function(){nt(l[4]?l[7]:l[6])&&(l[4]?l[7]:l[6]).apply(this,arguments)}),r=!0)},p(n,[o]){l=n,o&1&&c(t,"id",l[0]),o&14&&s!==(s="fa-solid "+l[1]+" "+(l[3]?l[2]:"")+" svelte-xdj7pf")&&c(t,"class",s),o&32&&ne(a,l[5])},i:ae,o:ae,d(n){n&&d(e),r=!1,u()}}}function Jt(l,e,t){let{user:s}=e,{object:i}=e,{id:a="like"}=e,{text:r="image"}=e,{icon:u="fa-thumbs-up"}=e,{className:n="selected"}=e,{include:o}=e,{fav:f=!1}=e,{assessment:h}=e;async function v(){if(s){const _=`${Q}/api/${r}/${i.id}/like`,{like:b,dislike:j}=await Le(_,this.id);t(8,i.like=b,i),t(8,i.dislike=j,i)}}async function g(){if(s&&Ft(i)){const _=`${Q}/api/image/${i.id}/favorite`,{favorite:b}=await Le(_,this.id);t(8,i.favorite=b,i)}}return l.$$set=_=>{"user"in _&&t(9,s=_.user),"object"in _&&t(8,i=_.object),"id"in _&&t(0,a=_.id),"text"in _&&t(10,r=_.text),"icon"in _&&t(1,u=_.icon),"className"in _&&t(2,n=_.className),"include"in _&&t(3,o=_.include),"fav"in _&&t(4,f=_.fav),"assessment"in _&&t(5,h=_.assessment)},[a,u,n,o,f,h,v,g,i,s,r]}class Ne extends fe{constructor(e){super(),ce(this,e,Jt,Gt,me,{user:9,object:8,id:0,text:10,icon:1,className:2,include:3,fav:4,assessment:5})}}function Ze(l,e,t){const s=l.slice();return s[16]=e[t],s[17]=e,s[18]=t,s}function We(l,e,t){const s=l.slice();return s[19]=e[t],s}function $e(l){let e,t,s,i,a;function r(f){l[6](f)}function u(f){l[7](f)}function n(f){l[8](f)}let o={};return l[0].image!==void 0&&(o.image=l[0].image),l[1]!==void 0&&(o.visible=l[1]),l[2]!==void 0&&(o.description=l[2]),e=new Ht({props:o}),$.push(()=>oe(e,"image",r)),$.push(()=>oe(e,"visible",u)),$.push(()=>oe(e,"description",n)),{c(){x(e.$$.fragment)},l(f){ee(e.$$.fragment,f)},m(f,h){te(e,f,h),a=!0},p(f,h){const v={};!t&&h&1&&(t=!0,v.image=f[0].image,re(()=>t=!1)),!s&&h&2&&(s=!0,v.visible=f[1],re(()=>s=!1)),!i&&h&4&&(i=!0,v.description=f[2],re(()=>i=!1)),e.$set(v)},i(f){a||(B(e.$$.fragment,f),a=!0)},o(f){q(e.$$.fragment,f),a=!1},d(f){se(e,f)}}}function Kt(l){let e,t,s=l[1]&&$e(l);return{c(){s&&s.c(),e=ue()},l(i){s&&s.l(i),e=ue()},m(i,a){s&&s.m(i,a),y(i,e,a),t=!0},p(i,a){i[1]?s?(s.p(i,a),a&2&&B(s,1)):(s=$e(i),s.c(),B(s,1),s.m(e.parentNode,e)):s&&(Ie(),q(s,1,1,()=>{s=null}),we())},i(i){t||(B(s),t=!0)},o(i){q(s),t=!1},d(i){s&&s.d(i),i&&d(e)}}}function Qt(l){var D,S,I;let e,t,s,i,a,r,u,n,o,f;function h(w){l[3](w)}let v={user:l[0].user,include:l[0].image.like.includes((D=l[0].user)==null?void 0:D.username),assessment:l[0].image.like.length};l[0].image!==void 0&&(v.object=l[0].image),t=new Ne({props:v}),$.push(()=>oe(t,"object",h));function g(w){l[4](w)}let _={user:l[0].user,id:"dislike",icon:"fa-thumbs-down",assessment:l[0].image.dislike.length,include:l[0].image.dislike.includes((S=l[0].user)==null?void 0:S.username)};l[0].image!==void 0&&(_.object=l[0].image),a=new Ne({props:_}),$.push(()=>oe(a,"object",g));function b(w){l[5](w)}let j={user:l[0].user,id:"fav",fav:!0,icon:"fa-star",assessment:l[0].image.favorite.length,include:l[0].image.favorite.includes((I=l[0].user)==null?void 0:I.username)};return l[0].image!==void 0&&(j.object=l[0].image),n=new Ne({props:j}),$.push(()=>oe(n,"object",b)),{c(){e=p("div"),x(t.$$.fragment),i=O(),x(a.$$.fragment),u=O(),x(n.$$.fragment),this.h()},l(w){e=k(w,"DIV",{class:!0,slot:!0});var N=E(e);ee(t.$$.fragment,N),i=V(N),ee(a.$$.fragment,N),u=V(N),ee(n.$$.fragment,N),N.forEach(d),this.h()},h(){c(e,"class","image-stats svelte-2mhczw"),c(e,"slot","assessment")},m(w,N){y(w,e,N),te(t,e,null),m(e,i),te(a,e,null),m(e,u),te(n,e,null),f=!0},p(w,N){var Z,X,F;const T={};N&1&&(T.user=w[0].user),N&1&&(T.include=w[0].image.like.includes((Z=w[0].user)==null?void 0:Z.username)),N&1&&(T.assessment=w[0].image.like.length),!s&&N&1&&(s=!0,T.object=w[0].image,re(()=>s=!1)),t.$set(T);const C={};N&1&&(C.user=w[0].user),N&1&&(C.assessment=w[0].image.dislike.length),N&1&&(C.include=w[0].image.dislike.includes((X=w[0].user)==null?void 0:X.username)),!r&&N&1&&(r=!0,C.object=w[0].image,re(()=>r=!1)),a.$set(C);const A={};N&1&&(A.user=w[0].user),N&1&&(A.assessment=w[0].image.favorite.length),N&1&&(A.include=w[0].image.favorite.includes((F=w[0].user)==null?void 0:F.username)),!o&&N&1&&(o=!0,A.object=w[0].image,re(()=>o=!1)),n.$set(A)},i(w){f||(B(t.$$.fragment,w),B(a.$$.fragment,w),B(n.$$.fragment,w),f=!0)},o(w){q(t.$$.fragment,w),q(a.$$.fragment,w),q(n.$$.fragment,w),f=!1},d(w){w&&d(e),se(t),se(a),se(n)}}}function xe(l){let e,t;return e=new Ut({props:{image:l[19]}}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,i){te(e,s,i),t=!0},p(s,i){const a={};i&1&&(a.image=s[19]),e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Xt(l){let e,t,s=l[0].sidebar,i=[];for(let r=0;r<s.length;r+=1)i[r]=xe(We(l,s,r));const a=r=>q(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=ue()},l(r){for(let u=0;u<i.length;u+=1)i[u].l(r);e=ue()},m(r,u){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(r,u);y(r,e,u),t=!0},p(r,u){if(u&1){s=r[0].sidebar;let n;for(n=0;n<s.length;n+=1){const o=We(r,s,n);i[n]?(i[n].p(o,u),B(i[n],1)):(i[n]=xe(o),i[n].c(),B(i[n],1),i[n].m(e.parentNode,e))}for(Ie(),n=s.length;n<i.length;n+=1)a(n);we()}},i(r){if(!t){for(let u=0;u<s.length;u+=1)B(i[u]);t=!0}},o(r){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)q(i[u]);t=!1},d(r){at(i,r),r&&d(e)}}}function Yt(l){let e,t;return e=new ut({props:{className:"image-sidebar",$$slots:{default:[Xt]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,i){te(e,s,i),t=!0},p(s,i){const a={};i&4194305&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Zt(l){let e,t;return e=new wt({}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,i){te(e,s,i),t=!0},p:ae,i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Wt(l){let e,t,s;function i(r){l[11](r)}let a={imageId:l[0].image.id,avatar:l[0].user.avatar};return l[0].comments!==void 0&&(a.comments=l[0].comments),e=new Ct({props:a}),$.push(()=>oe(e,"comments",i)),{c(){x(e.$$.fragment)},l(r){ee(e.$$.fragment,r)},m(r,u){te(e,r,u),s=!0},p(r,u){const n={};u&1&&(n.imageId=r[0].image.id),u&1&&(n.avatar=r[0].user.avatar),!t&&u&1&&(t=!0,n.comments=r[0].comments,re(()=>t=!1)),e.$set(n)},i(r){s||(B(e.$$.fragment,r),s=!0)},o(r){q(e.$$.fragment,r),s=!1},d(r){se(e,r)}}}function $t(l){var v,g;let e,t,s,i,a,r,u;function n(_){l[12](_,l[16],l[17],l[18])}let o={user:l[0].user,text:"comment",assessment:l[16].like.length,className:"grey",include:l[16].like.includes((v=l[0].user)==null?void 0:v.username)};l[16]!==void 0&&(o.object=l[16]),e=new Ne({props:o}),$.push(()=>oe(e,"object",n));function f(_){l[13](_,l[16],l[17],l[18])}let h={user:l[0].user,id:"dislike",text:"comment",icon:"fa-solid fa-thumbs-down",className:"grey",assessment:l[16].dislike.length,include:l[16].dislike.includes((g=l[0].user)==null?void 0:g.username)};return l[16]!==void 0&&(h.object=l[16]),i=new Ne({props:h}),$.push(()=>oe(i,"object",f)),{c(){x(e.$$.fragment),s=O(),x(i.$$.fragment),r=O()},l(_){ee(e.$$.fragment,_),s=V(_),ee(i.$$.fragment,_),r=V(_)},m(_,b){te(e,_,b),y(_,s,b),te(i,_,b),y(_,r,b),u=!0},p(_,b){var S,I;l=_;const j={};b&1&&(j.user=l[0].user),b&1&&(j.assessment=l[16].like.length),b&1&&(j.include=l[16].like.includes((S=l[0].user)==null?void 0:S.username)),!t&&b&1&&(t=!0,j.object=l[16],re(()=>t=!1)),e.$set(j);const D={};b&1&&(D.user=l[0].user),b&1&&(D.assessment=l[16].dislike.length),b&1&&(D.include=l[16].dislike.includes((I=l[0].user)==null?void 0:I.username)),!a&&b&1&&(a=!0,D.object=l[16],re(()=>a=!1)),i.$set(D)},i(_){u||(B(e.$$.fragment,_),B(i.$$.fragment,_),u=!0)},o(_){q(e.$$.fragment,_),q(i.$$.fragment,_),u=!1},d(_){se(e,_),_&&d(s),se(i,_),_&&d(r)}}}function et(l,e){let t,s,i,a,r;function u(f){e[14](f)}function n(f){e[15](f,e[16],e[17],e[18])}let o={user:e[0].user,$$slots:{default:[$t]},$$scope:{ctx:e}};return e[0].comments!==void 0&&(o.comments=e[0].comments),e[16]!==void 0&&(o.comment=e[16]),s=new zt({props:o}),$.push(()=>oe(s,"comments",u)),$.push(()=>oe(s,"comment",n)),{key:l,first:null,c(){t=ue(),x(s.$$.fragment),this.h()},l(f){t=ue(),ee(s.$$.fragment,f),this.h()},h(){this.first=t},m(f,h){y(f,t,h),te(s,f,h),r=!0},p(f,h){e=f;const v={};h&1&&(v.user=e[0].user),h&4194305&&(v.$$scope={dirty:h,ctx:e}),!i&&h&1&&(i=!0,v.comments=e[0].comments,re(()=>i=!1)),!a&&h&1&&(a=!0,v.comment=e[16],re(()=>a=!1)),s.$set(v)},i(f){r||(B(s.$$.fragment,f),r=!0)},o(f){q(s.$$.fragment,f),r=!1},d(f){f&&d(t),se(s,f)}}}function xt(l){let e=[],t=new Map,s,i,a=l[0].comments;const r=u=>u[16].id;for(let u=0;u<a.length;u+=1){let n=Ze(l,a,u),o=r(n);t.set(o,e[u]=et(o,n))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();s=ue()},l(u){for(let n=0;n<e.length;n+=1)e[n].l(u);s=ue()},m(u,n){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(u,n);y(u,s,n),i=!0},p(u,n){n&1&&(a=u[0].comments,Ie(),e=ot(e,n,r,1,u,a,t,s.parentNode,rt,et,s,Ze),we())},i(u){if(!i){for(let n=0;n<a.length;n+=1)B(e[n]);i=!0}},o(u){for(let n=0;n<e.length;n+=1)q(e[n]);i=!1},d(u){for(let n=0;n<e.length;n+=1)e[n].d(u);u&&d(s)}}}function es(l){let e,t,s,i,a;const r=[Wt,Zt],u=[];function n(o,f){return o[0].user?0:1}return e=n(l),t=u[e]=r[e](l),i=new Ot({props:{totalComments:l[0].comments.length,$$slots:{default:[xt]},$$scope:{ctx:l}}}),{c(){t.c(),s=O(),x(i.$$.fragment)},l(o){t.l(o),s=V(o),ee(i.$$.fragment,o)},m(o,f){u[e].m(o,f),y(o,s,f),te(i,o,f),a=!0},p(o,f){let h=e;e=n(o),e===h?u[e].p(o,f):(Ie(),q(u[h],1,1,()=>{u[h]=null}),we(),t=u[e],t?t.p(o,f):(t=u[e]=r[e](o),t.c()),B(t,1),t.m(s.parentNode,s));const v={};f&1&&(v.totalComments=o[0].comments.length),f&4194305&&(v.$$scope={dirty:f,ctx:o}),i.$set(v)},i(o){a||(B(t),B(i.$$.fragment,o),a=!0)},o(o){q(t),q(i.$$.fragment,o),a=!1},d(o){u[e].d(o),o&&d(s),se(i,o)}}}function ts(l){let e,t,s,i,a,r,u,n,o;function f(g){l[9](g)}function h(g){l[10](g)}let v={image:l[0].image,user:l[0].user,$$slots:{assessment:[Qt],default:[Kt]},$$scope:{ctx:l}};return l[1]!==void 0&&(v.visible=l[1]),l[2]!==void 0&&(v.description=l[2]),t=new dt({props:v}),$.push(()=>oe(t,"visible",f)),$.push(()=>oe(t,"description",h)),r=new bt({props:{$$slots:{default:[Yt]},$$scope:{ctx:l}}}),n=new Et({props:{$$slots:{default:[es]},$$scope:{ctx:l}}}),{c(){e=p("div"),x(t.$$.fragment),a=O(),x(r.$$.fragment),u=O(),x(n.$$.fragment),this.h()},l(g){e=k(g,"DIV",{class:!0});var _=E(e);ee(t.$$.fragment,_),a=V(_),ee(r.$$.fragment,_),u=V(_),ee(n.$$.fragment,_),_.forEach(d),this.h()},h(){c(e,"class","image-container svelte-2mhczw")},m(g,_){y(g,e,_),te(t,e,null),m(e,a),te(r,e,null),m(e,u),te(n,e,null),o=!0},p(g,[_]){const b={};_&1&&(b.image=g[0].image),_&1&&(b.user=g[0].user),_&4194311&&(b.$$scope={dirty:_,ctx:g}),!s&&_&2&&(s=!0,b.visible=g[1],re(()=>s=!1)),!i&&_&4&&(i=!0,b.description=g[2],re(()=>i=!1)),t.$set(b);const j={};_&4194305&&(j.$$scope={dirty:_,ctx:g}),r.$set(j);const D={};_&4194305&&(D.$$scope={dirty:_,ctx:g}),n.$set(D)},i(g){o||(B(t.$$.fragment,g),B(r.$$.fragment,g),B(n.$$.fragment,g),o=!0)},o(g){q(t.$$.fragment,g),q(r.$$.fragment,g),q(n.$$.fragment,g),o=!1},d(g){g&&d(e),se(t),se(r),se(n)}}}function ss(l,e,t){let{data:s}=e,i=!1,a=!1;function r(I){l.$$.not_equal(s.image,I)&&(s.image=I,t(0,s))}function u(I){l.$$.not_equal(s.image,I)&&(s.image=I,t(0,s))}function n(I){l.$$.not_equal(s.image,I)&&(s.image=I,t(0,s))}function o(I){l.$$.not_equal(s.image,I)&&(s.image=I,t(0,s))}function f(I){i=I,t(1,i)}function h(I){a=I,t(2,a)}function v(I){i=I,t(1,i)}function g(I){a=I,t(2,a)}function _(I){l.$$.not_equal(s.comments,I)&&(s.comments=I,t(0,s))}function b(I,w,N,T){N[T]=I,t(0,s)}function j(I,w,N,T){N[T]=I,t(0,s)}function D(I){l.$$.not_equal(s.comments,I)&&(s.comments=I,t(0,s))}function S(I,w,N,T){N[T]=I,t(0,s)}return l.$$set=I=>{"data"in I&&t(0,s=I.data)},[s,i,a,r,u,n,o,f,h,v,g,_,b,j,D,S]}class cs extends fe{constructor(e){super(),ce(this,e,ss,ts,me,{data:0})}}export{cs as default};
