import{S as te,i as se,s as le,k as b,a as S,l as k,m as j,c as w,h as p,n as u,C as H,b as T,D as n,v as ne,d as z,f as oe,g as F,E as ze,q as O,e as J,r as R,F as B,G as K,H as Ve,I as Te,J as Me,K as Oe,L as Re,M as Fe,N as Be,u as Ee,O as Ce,P as Ge,Q as ue,R as qe,T as ye,U as Ye,V as He,W as Je,y as fe,z as ce,A as _e,B as he,X as Ke,w as je,Y as Ie,Z as Ae}from"../chunks/index.4c08a5a5.js";import{D as X}from"../chunks/config.c392556e.js";import{c as Pe}from"../chunks/click-outside.61d417da.js";import{a as Qe}from"../chunks/axios.aba6f0e0.js";import{U as ee}from"../chunks/enums.4774c07c.js";function We(r){let e,t,s,i,f,c,m,l,a,_,v,d,E,h=r[1]&&Ne(r);return{c(){e=b("div"),t=b("a"),s=O("Signin"),i=S(),f=b("a"),c=O("Signup"),m=S(),l=b("button"),a=b("i"),_=S(),h&&h.c(),v=J(),this.h()},l(o){e=k(o,"DIV",{class:!0});var g=j(e);t=k(g,"A",{class:!0,href:!0});var I=j(t);s=R(I,"Signin"),I.forEach(p),i=w(g),f=k(g,"A",{class:!0,href:!0});var U=j(f);c=R(U,"Signup"),U.forEach(p),m=w(g),l=k(g,"BUTTON",{class:!0});var y=j(l);a=k(y,"I",{class:!0}),j(a).forEach(p),y.forEach(p),g.forEach(p),_=w(o),h&&h.l(o),v=J(),this.h()},h(){u(t,"class","nav-signin svelte-1d0j6v1"),u(t,"href","/signin"),u(f,"class","nav-signup svelte-1d0j6v1"),u(f,"href","/signup"),u(a,"class","fa-solid fa-caret-down svelte-1d0j6v1"),u(l,"class","svelte-1d0j6v1"),u(e,"class","nav-sign svelte-1d0j6v1")},m(o,g){T(o,e,g),n(e,t),n(t,s),n(e,i),n(e,f),n(f,c),n(e,m),n(e,l),n(l,a),T(o,_,g),h&&h.m(o,g),T(o,v,g),d||(E=B(l,"click",r[5]),d=!0)},p(o,g){o[1]?h?h.p(o,g):(h=Ne(o),h.c(),h.m(v.parentNode,v)):h&&(h.d(1),h=null)},i:K,o:K,d(o){o&&p(e),o&&p(_),h&&h.d(o),o&&p(v),d=!1,E()}}}function Xe(r){let e,t,s,i,f,c;const m=r[3].default,l=Ve(m,r,r[2],null);return{c(){e=b("img"),s=S(),l&&l.c(),this.h()},l(a){e=k(a,"IMG",{id:!0,class:!0,src:!0,alt:!0}),s=w(a),l&&l.l(a),this.h()},h(){u(e,"id","nav-avatar"),u(e,"class","nav-avatar svelte-1d0j6v1"),H(e.src,t=X+"/uploads/avatars/"+r[0].avatar)||u(e,"src",t),u(e,"alt","")},m(a,_){T(a,e,_),T(a,s,_),l&&l.m(a,_),i=!0,f||(c=B(e,"click",r[4]),f=!0)},p(a,_){(!i||_&1&&!H(e.src,t=X+"/uploads/avatars/"+a[0].avatar))&&u(e,"src",t),l&&l.p&&(!i||_&4)&&Te(l,m,a,a[2],i?Oe(m,a[2],_,null):Me(a[2]),null)},i(a){i||(F(l,a),i=!0)},o(a){z(l,a),i=!1},d(a){a&&p(e),a&&p(s),l&&l.d(a),f=!1,c()}}}function Ne(r){let e,t,s,i,f,c,m,l,a,_,v,d,E,h;return{c(){e=b("ul"),t=b("a"),s=b("i"),i=S(),f=b("li"),c=O("Signin"),m=S(),l=b("a"),a=b("i"),_=S(),v=b("li"),d=O("Signup"),this.h()},l(o){e=k(o,"UL",{class:!0});var g=j(e);t=k(g,"A",{href:!0,class:!0});var I=j(t);s=k(I,"I",{class:!0}),j(s).forEach(p),i=w(I),f=k(I,"LI",{});var U=j(f);c=R(U,"Signin"),U.forEach(p),I.forEach(p),m=w(g),l=k(g,"A",{href:!0,class:!0});var y=j(l);a=k(y,"I",{class:!0}),j(a).forEach(p),_=w(y),v=k(y,"LI",{});var P=j(v);d=R(P,"Signup"),P.forEach(p),y.forEach(p),g.forEach(p),this.h()},h(){u(s,"class","fa-solid fa-right-to-bracket"),u(t,"href","/signin"),u(t,"class","svelte-1d0j6v1"),u(a,"class","fa-solid fa-right-to-bracket"),u(l,"href","/signup"),u(l,"class","svelte-1d0j6v1"),u(e,"class","nav-sign-list svelte-1d0j6v1")},m(o,g){T(o,e,g),n(e,t),n(t,s),n(t,i),n(t,f),n(f,c),n(e,m),n(e,l),n(l,a),n(l,_),n(l,v),n(v,d),E||(h=[B(t,"click",r[6]),B(l,"click",r[7]),Re(Pe.call(null,e)),B(e,"outclick",r[8])],E=!0)},p:K,d(o){o&&p(e),E=!1,Fe(h)}}}function Ze(r){let e,t,s,i,f,c,m,l,a,_,v,d,E,h,o,g,I;const U=[Xe,We],y=[];function P($,N){return $[0]?0:1}return o=P(r),g=y[o]=U[o](r),{c(){e=b("nav"),t=b("a"),s=b("img"),f=S(),c=b("img"),l=S(),a=b("form"),_=b("input"),v=S(),d=b("button"),E=b("i"),h=S(),g.c(),this.h()},l($){e=k($,"NAV",{class:!0});var N=j(e);t=k(N,"A",{class:!0,href:!0});var L=j(t);s=k(L,"IMG",{class:!0,src:!0,alt:!0}),f=w(L),c=k(L,"IMG",{class:!0,src:!0,alt:!0}),L.forEach(p),l=w(N),a=k(N,"FORM",{action:!0,class:!0});var G=j(a);_=k(G,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),v=w(G),d=k(G,"BUTTON",{class:!0});var q=j(d);E=k(q,"I",{class:!0}),j(E).forEach(p),q.forEach(p),G.forEach(p),h=w(N),g.l(N),N.forEach(p),this.h()},h(){u(s,"class","nav-tiny-logo svelte-1d0j6v1"),H(s.src,i="/tiny-logo.png")||u(s,"src",i),u(s,"alt",""),u(c,"class","nav-main-logo svelte-1d0j6v1"),H(c.src,m="/imgshare-logo.png")||u(c,"src",m),u(c,"alt",""),u(t,"class","nav-logo svelte-1d0j6v1"),u(t,"href","/"),u(_,"type","search"),u(_,"name","q"),u(_,"placeholder","Search"),u(_,"class","svelte-1d0j6v1"),u(E,"class","fa-solid fa-magnifying-glass"),u(d,"class","nav-button svelte-1d0j6v1"),u(a,"action","/search"),u(a,"class","svelte-1d0j6v1"),u(e,"class","svelte-1d0j6v1")},m($,N){T($,e,N),n(e,t),n(t,s),n(t,f),n(t,c),n(e,l),n(e,a),n(a,_),n(a,v),n(a,d),n(d,E),n(e,h),y[o].m(e,null),I=!0},p($,[N]){let L=o;o=P($),o===L?y[o].p($,N):(ne(),z(y[L],1,1,()=>{y[L]=null}),oe(),g=y[o],g?g.p($,N):(g=y[o]=U[o]($),g.c()),F(g,1),g.m(e,null))},i($){I||(F(g),I=!0)},o($){z(g),I=!1},d($){$&&p(e),y[o].d()}}}function xe(r,e,t){let{$$slots:s={},$$scope:i}=e,{user:f}=e,c=!1;function m(d){ze.call(this,r,d)}const l=()=>t(1,c=!c),a=()=>t(1,c=!1),_=()=>t(1,c=!1),v=()=>t(1,c=!1);return r.$$set=d=>{"user"in d&&t(0,f=d.user),"$$scope"in d&&t(2,i=d.$$scope)},[f,c,i,s,m,l,a,_,v]}class et extends te{constructor(e){super(),se(this,e,xe,Ze,le,{user:0})}}function Se(r,e,t){const s=r.slice();return s[6]=e[t],s}function we(r){let e,t,s,i,f,c,m;return{c(){e=b("a"),t=b("i"),s=S(),i=b("li"),f=O("Admin"),this.h()},l(l){e=k(l,"A",{href:!0,class:!0});var a=j(e);t=k(a,"I",{class:!0}),j(t).forEach(p),s=w(a),i=k(a,"LI",{});var _=j(i);f=R(_,"Admin"),_.forEach(p),a.forEach(p),this.h()},h(){u(t,"class","fa-solid fa-user"),u(e,"href","/admin"),u(e,"class","svelte-1jp0sts")},m(l,a){T(l,e,a),n(e,t),n(e,s),n(e,i),n(i,f),c||(m=B(e,"click",function(){ue(r[2])&&r[2].apply(this,arguments)}),c=!0)},p(l,a){r=l},d(l){l&&p(e),c=!1,m()}}}function Ue(r,e){let t,s,i,f,c=e[6].name+"",m,l,a;return{key:r,first:null,c(){t=b("a"),s=b("i"),i=S(),f=b("li"),m=O(c),this.h()},l(_){t=k(_,"A",{href:!0,class:!0});var v=j(t);s=k(v,"I",{class:!0}),j(s).forEach(p),i=w(v),f=k(v,"LI",{});var d=j(f);m=R(d,c),d.forEach(p),v.forEach(p),this.h()},h(){u(s,"class",qe(e[6].className)+" svelte-1jp0sts"),u(t,"href",e[6].href),u(t,"class","svelte-1jp0sts"),this.first=t},m(_,v){T(_,t,v),n(t,s),n(t,i),n(t,f),n(f,m),l||(a=B(t,"click",function(){ue(e[2])&&e[2].apply(this,arguments)}),l=!0)},p(_,v){e=_},d(_){_&&p(t),l=!1,a()}}}function tt(r){var ve,pe,ge,be;let e,t,s,i,f,c,m,l=((ve=r[1])==null?void 0:ve.username)+"",a,_,v,d=((pe=r[1])==null?void 0:pe.email)+"",E,h,o,g,I,U,y=[],P=new Map,$,N,L,G,q,ae,re,de,V=(((ge=r[1])==null?void 0:ge.role)===ee.ADMIN||((be=r[1])==null?void 0:be.role)===ee.SUPER)&&we(r),Z=r[3];const me=A=>A[6].name;for(let A=0;A<Z.length;A+=1){let D=Se(r,Z,A),M=me(D);P.set(M,y[A]=Ue(M,D))}return{c(){e=b("div"),t=b("div"),s=b("img"),f=S(),c=b("div"),m=b("h3"),a=O(l),_=S(),v=b("p"),E=O(d),h=S(),o=b("span"),g=S(),I=b("ul"),V&&V.c(),U=S();for(let A=0;A<y.length;A+=1)y[A].c();$=S(),N=b("a"),L=b("i"),G=S(),q=b("li"),ae=O("Logout"),this.h()},l(A){e=k(A,"DIV",{class:!0});var D=j(e);t=k(D,"DIV",{class:!0});var M=j(t);s=k(M,"IMG",{src:!0,alt:!0,class:!0}),f=w(M),c=k(M,"DIV",{});var Y=j(c);m=k(Y,"H3",{class:!0});var Q=j(m);a=R(Q,l),Q.forEach(p),_=w(Y),v=k(Y,"P",{class:!0});var W=j(v);E=R(W,d),W.forEach(p),Y.forEach(p),M.forEach(p),h=w(D),o=k(D,"SPAN",{class:!0}),j(o).forEach(p),g=w(D),I=k(D,"UL",{class:!0});var C=j(I);V&&V.l(C),U=w(C);for(let ie=0;ie<y.length;ie+=1)y[ie].l(C);$=w(C),N=k(C,"A",{href:!0,class:!0});var x=j(N);L=k(x,"I",{class:!0}),j(L).forEach(p),G=w(x),q=k(x,"LI",{});var ke=j(q);ae=R(ke,"Logout"),ke.forEach(p),x.forEach(p),C.forEach(p),D.forEach(p),this.h()},h(){var A;H(s.src,i=X+"/uploads/avatars/"+((A=r[1])==null?void 0:A.avatar))||u(s,"src",i),u(s,"alt",""),u(s,"class","svelte-1jp0sts"),u(m,"class","svelte-1jp0sts"),u(v,"class","svelte-1jp0sts"),u(t,"class","user-header svelte-1jp0sts"),u(o,"class","svelte-1jp0sts"),u(L,"class","fa-solid fa-right-from-bracket"),u(N,"href",X+"/api/auth/logout"),u(N,"class","svelte-1jp0sts"),u(I,"class","svelte-1jp0sts"),u(e,"class","user-list svelte-1jp0sts")},m(A,D){T(A,e,D),n(e,t),n(t,s),n(t,f),n(t,c),n(c,m),n(m,a),n(c,_),n(c,v),n(v,E),n(e,h),n(e,o),n(e,g),n(e,I),V&&V.m(I,null),n(I,U);for(let M=0;M<y.length;M+=1)y[M]&&y[M].m(I,null);n(I,$),n(I,N),n(N,L),n(N,G),n(N,q),n(q,ae),re||(de=[B(N,"click",Be(r[4])),Re(Pe.call(null,e)),B(e,"outclick",r[5])],re=!0)},p(A,[D]){var M,Y,Q,W,C;D&2&&!H(s.src,i=X+"/uploads/avatars/"+((M=A[1])==null?void 0:M.avatar))&&u(s,"src",i),D&2&&l!==(l=((Y=A[1])==null?void 0:Y.username)+"")&&Ee(a,l),D&2&&d!==(d=((Q=A[1])==null?void 0:Q.email)+"")&&Ee(E,d),((W=A[1])==null?void 0:W.role)===ee.ADMIN||((C=A[1])==null?void 0:C.role)===ee.SUPER?V?V.p(A,D):(V=we(A),V.c(),V.m(I,U)):V&&(V.d(1),V=null),D&12&&(Z=A[3],y=Ce(y,D,me,1,A,Z,P,I,Ge,Ue,$,Se))},i:K,o:K,d(A){A&&p(e),V&&V.d();for(let D=0;D<y.length;D+=1)y[D].d();re=!1,Fe(de)}}}function st(r,e,t){let{user:s}=e,{change:i}=e,{visible:f}=e;const c=[{href:`/user/${s.username}/post`,className:"fa-regular fa-image",name:"Post"},{href:`/user/${s.username}/favorite`,className:"fa-regular fa-star",name:"Favorite"},{href:`/user/${s.username}/comment`,className:"fa-regular fa-message",name:"Comments"},{href:`/user/${s.username}/about`,className:"fa-regular fa-file",name:"About"},{href:`/user/${s.username}/upload`,className:"fa-solid fa-arrow-up-from-bracket",name:"Upload"},{href:`/user/${s.username}/settings`,className:"fa-solid fa-gear",name:"Settings"}];async function m(a){const v=a.currentTarget.getAttribute("href"),d=await Qe({method:"POST",url:v,withCredentials:!0}).then(E=>E.data);i(),d.url&&(window.location.href="/")}const l=()=>t(0,f=!1);return r.$$set=a=>{"user"in a&&t(1,s=a.user),"change"in a&&t(2,i=a.change),"visible"in a&&t(0,f=a.visible)},[f,s,i,c,m,l]}class lt extends te{constructor(e){super(),se(this,e,st,tt,le,{user:1,change:2,visible:0})}}function at(r){const e=r-1;return e*e*e+1}function $e(r,{delay:e=0,duration:t=400,easing:s=at,x:i=0,y:f=0,opacity:c=0}={}){const m=getComputedStyle(r),l=+m.opacity,a=m.transform==="none"?"":m.transform,_=l*(1-c),[v,d]=ye(i),[E,h]=ye(f);return{delay:e,duration:t,easing:s,css:(o,g)=>`
			transform: ${a} translate(${(1-o)*v}${d}, ${(1-o)*E}${h});
			opacity: ${l-_*g}`}}function rt(r){let e,t,s,i=new Date().getFullYear()+"",f,c,m,l,a,_,v,d,E,h,o,g,I;return{c(){e=b("footer"),t=b("div"),s=O("imgShare © "),f=O(i),c=S(),m=b("a"),l=O("About"),a=S(),_=b("a"),v=O("Terms"),d=S(),E=b("a"),h=O("Rules"),this.h()},l(U){e=k(U,"FOOTER",{class:!0});var y=j(e);t=k(y,"DIV",{class:!0});var P=j(t);s=R(P,"imgShare © "),f=R(P,i),P.forEach(p),c=w(y),m=k(y,"A",{href:!0,class:!0});var $=j(m);l=R($,"About"),$.forEach(p),a=w(y),_=k(y,"A",{href:!0,class:!0});var N=j(_);v=R(N,"Terms"),N.forEach(p),d=w(y),E=k(y,"A",{href:!0,class:!0});var L=j(E);h=R(L,"Rules"),L.forEach(p),y.forEach(p),this.h()},h(){u(t,"class","svelte-zgee83"),u(m,"href","/about"),u(m,"class","svelte-zgee83"),u(_,"href","/terms"),u(_,"class","svelte-zgee83"),u(E,"href","/rules"),u(E,"class","svelte-zgee83"),u(e,"class","svelte-zgee83")},m(U,y){T(U,e,y),n(e,t),n(t,s),n(t,f),n(e,c),n(e,m),n(m,l),n(e,a),n(e,_),n(_,v),n(e,d),n(e,E),n(E,h),I=!0},p:K,i(U){I||(Ye(()=>{I&&(g&&g.end(1),o=He(e,$e,{y:50,duration:500}),o.start())}),I=!0)},o(U){o&&o.invalidate(),g=Je(e,$e,{y:50,duration:500}),I=!1},d(U){U&&p(e),U&&g&&g.end()}}}class it extends te{constructor(e){super(),se(this,e,null,rt,le,{})}}function De(r){let e,t,s,i;function f(l){r[7](l)}function c(l){r[8](l)}let m={user:r[0].user};return r[4]!==void 0&&(m.change=r[4]),r[1]!==void 0&&(m.visible=r[1]),e=new lt({props:m}),je.push(()=>Ie(e,"change",f)),je.push(()=>Ie(e,"visible",c)),{c(){fe(e.$$.fragment)},l(l){ce(e.$$.fragment,l)},m(l,a){_e(e,l,a),i=!0},p(l,a){const _={};a&1&&(_.user=l[0].user),!t&&a&16&&(t=!0,_.change=l[4],Ae(()=>t=!1)),!s&&a&2&&(s=!0,_.visible=l[1],Ae(()=>s=!1)),e.$set(_)},i(l){i||(F(e.$$.fragment,l),i=!0)},o(l){z(e.$$.fragment,l),i=!1},d(l){he(e,l)}}}function nt(r){let e,t,s=r[1]&&De(r);return{c(){s&&s.c(),e=J()},l(i){s&&s.l(i),e=J()},m(i,f){s&&s.m(i,f),T(i,e,f),t=!0},p(i,f){i[1]?s?(s.p(i,f),f&2&&F(s,1)):(s=De(i),s.c(),F(s,1),s.m(e.parentNode,e)):s&&(ne(),z(s,1,1,()=>{s=null}),oe())},i(i){t||(F(s),t=!0)},o(i){z(s),t=!1},d(i){s&&s.d(i),i&&p(e)}}}function Le(r){let e,t;return e=new it({}),{c(){fe(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,i){_e(e,s,i),t=!0},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){z(e.$$.fragment,s),t=!1},d(s){he(e,s)}}}function ot(r){var E;let e,t,s,i,f=r[2]&&(r[3]==="/"||((E=r[3])==null?void 0:E.includes("/gallery"))),c,m,l,a;e=new et({props:{user:r[0].user,$$slots:{default:[nt]},$$scope:{ctx:r}}}),e.$on("click",function(){ue(r[4])&&r[4].apply(this,arguments)});const _=r[6].default,v=Ve(_,r,r[9],null);let d=f&&Le();return{c(){fe(e.$$.fragment),t=S(),s=b("div"),v&&v.c(),i=S(),d&&d.c(),c=J(),this.h()},l(h){ce(e.$$.fragment,h),t=w(h),s=k(h,"DIV",{class:!0});var o=j(s);v&&v.l(o),o.forEach(p),i=w(h),d&&d.l(h),c=J(),this.h()},h(){u(s,"class","main-container")},m(h,o){_e(e,h,o),T(h,t,o),T(h,s,o),v&&v.m(s,null),T(h,i,o),d&&d.m(h,o),T(h,c,o),m=!0,l||(a=B(s,"wheel",r[5]),l=!0)},p(h,[o]){var I;r=h;const g={};o&1&&(g.user=r[0].user),o&531&&(g.$$scope={dirty:o,ctx:r}),e.$set(g),v&&v.p&&(!m||o&512)&&Te(v,_,r,r[9],m?Oe(_,r[9],o,null):Me(r[9]),null),o&12&&(f=r[2]&&(r[3]==="/"||((I=r[3])==null?void 0:I.includes("/gallery")))),f?d?o&12&&F(d,1):(d=Le(),d.c(),F(d,1),d.m(c.parentNode,c)):d&&(ne(),z(d,1,1,()=>{d=null}),oe())},i(h){m||(F(e.$$.fragment,h),F(v,h),F(d),m=!0)},o(h){z(e.$$.fragment,h),z(v,h),z(d),m=!1},d(h){he(e,h),h&&p(t),h&&p(s),v&&v.d(h),h&&p(i),d&&d.d(h),h&&p(c),l=!1,a()}}}function ut(r,e,t){let{$$slots:s={},$$scope:i}=e,{data:f}=e,c=!1,m=!0,l,a=()=>t(1,c=!c);async function _(E){E.deltaY<=0?t(2,m=!0):t(2,m=!1)}Ke(()=>t(3,l=window.location.pathname));function v(E){a=E,t(4,a)}function d(E){c=E,t(1,c)}return r.$$set=E=>{"data"in E&&t(0,f=E.data),"$$scope"in E&&t(9,i=E.$$scope)},[f,c,m,l,a,_,s,v,d,i]}class mt extends te{constructor(e){super(),se(this,e,ut,ot,le,{data:0})}}export{mt as default};
