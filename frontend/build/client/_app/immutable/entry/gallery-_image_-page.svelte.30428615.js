import{S as fe,i as ce,s as me,H as ke,k as p,a as N,q as z,l as k,m as E,c as q,h as d,r as B,n as c,C as _e,b as R,D as m,g as S,v as Ee,d as M,f as Ie,u as ne,I as we,J as je,K as De,F as Y,a2 as tt,e as ue,a3 as st,a0 as be,N as de,M as ye,G as ae,w as $,L as xe,R as Re,Q as lt,Y as oe,y as x,z as ee,A as te,Z as re,B as se,$ as it,O as nt,a1 as at}from"../chunks/index.d4184e2c.js";import{f as pe}from"../chunks/index.c08ef366.js";import{D as Q}from"../chunks/config.ec8b886b.js";import{U as Oe}from"../chunks/enums.4774c07c.js";import{h as Pe,a as Ue}from"../chunks/services.1ba75943.js";import{B as ot}from"../chunks/BoxGallery.d2547153.js";import{a as Ae}from"../chunks/axios.707ed124.js";import{c as et}from"../chunks/click-outside.61d417da.js";const rt=l=>({}),Me=l=>({});function Le(l){let e,t,s,i,a,r;const u=l[7].default,n=ke(u,l,l[6],null);return{c(){e=p("div"),t=p("i"),s=N(),n&&n.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var f=E(e);t=k(f,"I",{class:!0}),E(t).forEach(d),s=q(f),n&&n.l(f),f.forEach(d),this.h()},h(){c(t,"class","fa-solid fa-ellipsis svelte-ezq2y0"),c(e,"class","image-edit svelte-ezq2y0")},m(o,f){R(o,e,f),m(e,t),m(e,s),n&&n.m(e,null),i=!0,a||(r=Y(t,"mousedown",l[8]),a=!0)},p(o,f){n&&n.p&&(!i||f&64)&&we(n,u,o,o[6],i?De(u,o[6],f,null):je(o[6]),null)},i(o){i||(S(n,o),i=!0)},o(o){M(n,o),i=!1},d(o){o&&d(e),n&&n.d(o),a=!1,r()}}}function ut(l){let e,t=l[0].description+"",s;return{c(){e=new tt(!1),s=ue(),this.h()},l(i){e=st(i,!1),s=ue(),this.h()},h(){e.a=s},m(i,a){e.m(t,i,a),R(i,s,a)},p(i,a){a&1&&t!==(t=i[0].description+"")&&e.p(t)},d(i){i&&d(s),i&&e.d()}}}function ft(l){let e,t,s,i,a,r,u,n,o,f,h;return{c(){e=p("form"),t=p("textarea"),s=N(),i=p("button"),a=z("Cancel"),r=N(),u=p("button"),n=z("Send"),this.h()},l(v){e=k(v,"FORM",{action:!0,method:!0,class:!0});var g=E(e);t=k(g,"TEXTAREA",{id:!0,name:!0,rows:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),E(t).forEach(d),s=q(g),i=k(g,"BUTTON",{class:!0});var _=E(i);a=B(_,"Cancel"),_.forEach(d),r=q(g),u=k(g,"BUTTON",{class:!0});var b=E(u);n=B(b,"Send"),b.forEach(d),g.forEach(d),this.h()},h(){c(t,"id","edit"),c(t,"name","description"),c(t,"rows","1"),c(t,"spellcheck","false"),c(t,"autocomplete","off"),c(t,"maxlength","4200"),c(t,"class","svelte-ezq2y0"),c(i,"class","svelte-ezq2y0"),c(u,"class","blue svelte-ezq2y0"),c(e,"action",o=Q+"/api/image/"+l[0].id+"/description"),c(e,"method","POST"),c(e,"class","svelte-ezq2y0")},m(v,g){R(v,e,g),m(e,t),be(t,l[0].description),m(e,s),m(e,i),m(i,a),m(e,r),m(e,u),m(u,n),f||(h=[Y(t,"input",l[9]),Y(i,"click",de(l[5])),Y(e,"submit",de(l[4]))],f=!0)},p(v,g){g&1&&be(t,v[0].description),g&1&&o!==(o=Q+"/api/image/"+v[0].id+"/description")&&c(e,"action",o)},d(v){v&&d(e),f=!1,ye(h)}}}function ct(l){let e,t,s,i,a,r=l[0].title+"",u,n,o,f,h,v,g,_,b,j,D=l[0].author+"",A,I,w,y,T=l[0].views+"",C,O,Z=pe(l[0].createdAt)+"",X,F,W,G,H,V,U,ge,J,K=l[3]&&(l[3].username===l[0].author||l[3].role!==Oe.EDITOR)&&Le(l);function Ce(P,L){return P[2]?ft:ut}let he=Ce(l),le=he(l);const Ve=l[7].assessment,ie=ke(Ve,l,l[6],Me);return{c(){e=p("div"),K&&K.c(),t=N(),s=p("h2"),i=p("i"),a=N(),u=z(r),n=N(),o=p("div"),f=p("a"),h=p("img"),b=N(),j=p("a"),A=z(D),w=N(),y=p("p"),C=z(T),O=z(" views ● "),X=z(Z),F=N(),W=p("img"),V=N(),U=p("div"),le.c(),ge=N(),ie&&ie.c(),this.h()},l(P){e=k(P,"DIV",{class:!0});var L=E(e);K&&K.l(L),t=q(L),s=k(L,"H2",{class:!0});var Ne=E(s);i=k(Ne,"I",{class:!0}),E(i).forEach(d),a=q(Ne),u=B(Ne,r),Ne.forEach(d),n=q(L),o=k(L,"DIV",{class:!0});var ve=E(o);f=k(ve,"A",{class:!0,href:!0});var Se=E(f);h=k(Se,"IMG",{src:!0,alt:!0,class:!0}),Se.forEach(d),b=q(ve),j=k(ve,"A",{class:!0,href:!0});var ze=E(j);A=B(ze,D),ze.forEach(d),w=q(ve),y=k(ve,"P",{});var qe=E(y);C=B(qe,T),O=B(qe," views ● "),X=B(qe,Z),qe.forEach(d),ve.forEach(d),F=q(L),W=k(L,"IMG",{class:!0,src:!0,alt:!0}),V=q(L),U=k(L,"DIV",{class:!0});var Be=E(U);le.l(Be),Be.forEach(d),ge=q(L),ie&&ie.l(L),L.forEach(d),this.h()},h(){c(i,"class","fa-solid fa-image title-icon"),c(s,"class","title"),_e(h.src,v=Q+"/uploads/avatars/"+l[0].avatar)||c(h,"src",v),c(h,"alt",g=l[0].author),c(h,"class","svelte-ezq2y0"),c(f,"class","image-author-link svelte-ezq2y0"),c(f,"href",_="/user/"+l[0].author),c(j,"class","image-author-username svelte-ezq2y0"),c(j,"href",I="/user/"+l[0].author),c(o,"class","image-author svelte-ezq2y0"),c(W,"class","image-content svelte-ezq2y0"),_e(W.src,G=Q+"/uploads/"+l[0].filename)||c(W,"src",G),c(W,"alt",H=l[0].title),c(U,"class","image-description svelte-ezq2y0"),c(e,"class","image-box svelte-ezq2y0")},m(P,L){R(P,e,L),K&&K.m(e,null),m(e,t),m(e,s),m(s,i),m(s,a),m(s,u),m(e,n),m(e,o),m(o,f),m(f,h),m(o,b),m(o,j),m(j,A),m(o,w),m(o,y),m(y,C),m(y,O),m(y,X),m(e,F),m(e,W),m(e,V),m(e,U),le.m(U,null),m(e,ge),ie&&ie.m(e,null),J=!0},p(P,[L]){P[3]&&(P[3].username===P[0].author||P[3].role!==Oe.EDITOR)?K?(K.p(P,L),L&9&&S(K,1)):(K=Le(P),K.c(),S(K,1),K.m(e,t)):K&&(Ee(),M(K,1,1,()=>{K=null}),Ie()),(!J||L&1)&&r!==(r=P[0].title+"")&&ne(u,r),(!J||L&1&&!_e(h.src,v=Q+"/uploads/avatars/"+P[0].avatar))&&c(h,"src",v),(!J||L&1&&g!==(g=P[0].author))&&c(h,"alt",g),(!J||L&1&&_!==(_="/user/"+P[0].author))&&c(f,"href",_),(!J||L&1)&&D!==(D=P[0].author+"")&&ne(A,D),(!J||L&1&&I!==(I="/user/"+P[0].author))&&c(j,"href",I),(!J||L&1)&&T!==(T=P[0].views+"")&&ne(C,T),(!J||L&1)&&Z!==(Z=pe(P[0].createdAt)+"")&&ne(X,Z),(!J||L&1&&!_e(W.src,G=Q+"/uploads/"+P[0].filename))&&c(W,"src",G),(!J||L&1&&H!==(H=P[0].title))&&c(W,"alt",H),he===(he=Ce(P))&&le?le.p(P,L):(le.d(1),le=he(P),le&&(le.c(),le.m(U,null))),ie&&ie.p&&(!J||L&64)&&we(ie,Ve,P,P[6],J?De(Ve,P[6],L,rt):je(P[6]),Me)},i(P){J||(S(K),S(ie,P),J=!0)},o(P){M(K),M(ie,P),J=!1},d(P){P&&d(e),K&&K.d(),le.d(),ie&&ie.d(P)}}}function mt(l,e,t){let{$$slots:s={},$$scope:i}=e,{image:a}=e,{user:r}=e,{visible:u}=e,{description:n}=e;async function o(){t(2,n=!1),Pe(this)}async function f(){t(2,n=!1)}const h=()=>t(1,u=!u);function v(){a.description=this.value,t(0,a)}return l.$$set=g=>{"image"in g&&t(0,a=g.image),"user"in g&&t(3,r=g.user),"visible"in g&&t(1,u=g.visible),"description"in g&&t(2,n=g.description),"$$scope"in g&&t(6,i=g.$$scope)},[a,u,n,r,o,f,i,s,h,v]}class _t extends fe{constructor(e){super(),ce(this,e,mt,ct,me,{image:0,user:3,visible:1,description:2})}}function ht(l){let e,t,s,i,a,r,u;const n=l[1].default,o=ke(n,l,l[0],null);return{c(){e=p("div"),t=p("div"),s=p("h2"),i=p("i"),a=z(`\r
			Recent Uploads`),r=N(),o&&o.c(),this.h()},l(f){e=k(f,"DIV",{class:!0});var h=E(e);t=k(h,"DIV",{class:!0});var v=E(t);s=k(v,"H2",{class:!0});var g=E(s);i=k(g,"I",{class:!0}),E(i).forEach(d),a=B(g,`\r
			Recent Uploads`),g.forEach(d),r=q(v),o&&o.l(v),v.forEach(d),h.forEach(d),this.h()},h(){c(i,"class","fa-solid fa-images title-icon"),c(s,"class","title"),c(t,"class","sidebar-container svelte-pei3k5"),c(e,"class","sidebar svelte-pei3k5")},m(f,h){R(f,e,h),m(e,t),m(t,s),m(s,i),m(s,a),m(t,r),o&&o.m(t,null),u=!0},p(f,[h]){o&&o.p&&(!u||h&1)&&we(o,n,f,f[0],u?De(n,f[0],h,null):je(f[0]),null)},i(f){u||(S(o,f),u=!0)},o(f){M(o,f),u=!1},d(f){f&&d(e),o&&o.d(f)}}}function dt(l,e,t){let{$$slots:s={},$$scope:i}=e;return l.$$set=a=>{"$$scope"in a&&t(0,i=a.$$scope)},[i,s]}class gt extends fe{constructor(e){super(),ce(this,e,dt,ht,me,{})}}function vt(l){let e,t;const s=l[1].default,i=ke(s,l,l[0],null);return{c(){e=p("div"),i&&i.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var r=E(e);i&&i.l(r),r.forEach(d),this.h()},h(){c(e,"class","comments svelte-1n6d5p9")},m(a,r){R(a,e,r),i&&i.m(e,null),t=!0},p(a,[r]){i&&i.p&&(!t||r&1)&&we(i,s,a,a[0],t?De(s,a[0],r,null):je(a[0]),null)},i(a){t||(S(i,a),t=!0)},o(a){M(i,a),t=!1},d(a){a&&d(e),i&&i.d(a)}}}function bt(l,e,t){let{$$slots:s={},$$scope:i}=e;return l.$$set=a=>{"$$scope"in a&&t(0,i=a.$$scope)},[i,s]}class pt extends fe{constructor(e){super(),ce(this,e,bt,vt,me,{})}}function kt(l){let e,t,s,i,a,r,u,n,o,f;return{c(){e=p("div"),t=z(`Must be register to comment\r
  `),s=p("div"),i=p("a"),a=p("button"),r=z("Signin"),u=N(),n=p("a"),o=p("button"),f=z("Signup"),this.h()},l(h){e=k(h,"DIV",{class:!0});var v=E(e);t=B(v,`Must be register to comment\r
  `),s=k(v,"DIV",{class:!0});var g=E(s);i=k(g,"A",{href:!0});var _=E(i);a=k(_,"BUTTON",{class:!0});var b=E(a);r=B(b,"Signin"),b.forEach(d),_.forEach(d),u=q(g),n=k(g,"A",{href:!0});var j=E(n);o=k(j,"BUTTON",{class:!0});var D=E(o);f=B(D,"Signup"),D.forEach(d),j.forEach(d),g.forEach(d),v.forEach(d),this.h()},h(){c(a,"class","black svelte-5jkpge"),c(i,"href","/signin"),c(o,"class","green svelte-5jkpge"),c(n,"href","/signup"),c(s,"class","svelte-5jkpge"),c(e,"class","register svelte-5jkpge")},m(h,v){R(h,e,v),m(e,t),m(e,s),m(s,i),m(i,a),m(a,r),m(s,u),m(s,n),m(n,o),m(o,f)},p:ae,i:ae,o:ae,d(h){h&&d(e)}}}class Et extends fe{constructor(e){super(),ce(this,e,null,kt,me,{})}}function He(l){let e,t,s,i,a,r,u,n,o,f;return{c(){e=p("span"),t=p("button"),s=z("Cancel"),i=N(),a=p("button"),r=z("Comment"),this.h()},l(h){e=k(h,"SPAN",{class:!0});var v=E(e);t=k(v,"BUTTON",{class:!0});var g=E(t);s=B(g,"Cancel"),g.forEach(d),i=q(v),a=k(v,"BUTTON",{class:!0});var _=E(a);r=B(_,"Comment"),_.forEach(d),v.forEach(d),this.h()},h(){c(t,"class","svelte-1slore9"),c(a,"class",u="blue "+(l[2].length>0?"":"disabled")+" svelte-1slore9"),a.disabled=n=!(l[2].length>0),c(e,"class","svelte-1slore9")},m(h,v){R(h,e,v),m(e,t),m(t,s),m(e,i),m(e,a),m(a,r),o||(f=Y(t,"click",l[11]),o=!0)},p(h,v){v&4&&u!==(u="blue "+(h[2].length>0?"":"disabled")+" svelte-1slore9")&&c(a,"class",u),v&4&&n!==(n=!(h[2].length>0))&&(a.disabled=n)},d(h){h&&d(e),o=!1,f()}}}function It(l){let e,t,s,i,a,r,u,n,o,f,h,v,g,_,b=l[3]&&He(l);return{c(){e=p("div"),t=p("h2"),s=p("i"),i=z(`\r
		Post`),a=N(),r=p("form"),u=p("img"),o=N(),f=p("input"),h=N(),b&&b.c(),this.h()},l(j){e=k(j,"DIV",{class:!0});var D=E(e);t=k(D,"H2",{class:!0});var A=E(t);s=k(A,"I",{class:!0}),E(s).forEach(d),i=B(A,`\r
		Post`),A.forEach(d),a=q(D),r=k(D,"FORM",{action:!0,method:!0,class:!0});var I=E(r);u=k(I,"IMG",{src:!0,alt:!0,class:!0}),o=q(I),f=k(I,"INPUT",{type:!0,name:!0,placeholder:!0,autocomplete:!0,spellcheck:!0,class:!0}),h=q(I),b&&b.l(I),I.forEach(d),D.forEach(d),this.h()},h(){c(s,"class","fa-regular fa-copy title-icon"),c(t,"class","title"),_e(u.src,n=Q+"/uploads/avatars/"+l[1])||c(u,"src",n),c(u,"alt",l[0]),c(u,"class","svelte-1slore9"),c(f,"type","text"),c(f,"name","comment"),c(f,"placeholder","Send a comment..."),c(f,"autocomplete","off"),c(f,"spellcheck","false"),c(f,"class","svelte-1slore9"),c(r,"action",v=Q+"/api/image/"+l[0]+"/comment"),c(r,"method","POST"),c(r,"class","svelte-1slore9"),c(e,"class","svelte-1slore9")},m(j,D){R(j,e,D),m(e,t),m(t,s),m(t,i),m(e,a),m(e,r),m(r,u),m(r,o),m(r,f),be(f,l[2]),l[9](f),m(r,h),b&&b.m(r,null),g||(_=[Y(f,"input",l[8]),Y(f,"focus",l[10]),Y(r,"submit",de(l[6]))],g=!0)},p(j,[D]){D&2&&!_e(u.src,n=Q+"/uploads/avatars/"+j[1])&&c(u,"src",n),D&1&&c(u,"alt",j[0]),D&4&&f.value!==j[2]&&be(f,j[2]),j[3]?b?b.p(j,D):(b=He(j),b.c(),b.m(r,null)):b&&(b.d(1),b=null),D&1&&v!==(v=Q+"/api/image/"+j[0]+"/comment")&&c(r,"action",v)},i:ae,o:ae,d(j){j&&d(e),l[9](null),b&&b.d(),g=!1,ye(_)}}}function wt(l,e,t){let{imageId:s}=e,{avatar:i}=e,{comments:a}=e,r="",u=!1,n;const o=b=>{t(2,r=""),n.blur(),t(3,u=b)};async function f(){const b=await Pe(this);b.comment&&t(7,a=[b.comment,...a]),o(!1)}function h(){r=this.value,t(2,r)}function v(b){$[b?"unshift":"push"](()=>{n=b,t(4,n)})}const g=()=>t(3,u=!0),_=()=>o(!1);return l.$$set=b=>{"imageId"in b&&t(0,s=b.imageId),"avatar"in b&&t(1,i=b.avatar),"comments"in b&&t(7,a=b.comments)},[s,i,r,u,n,o,f,a,h,v,g,_]}class jt extends fe{constructor(e){super(),ce(this,e,wt,It,me,{imageId:0,avatar:1,comments:7})}}function Fe(l){let e,t;const s=l[2].default,i=ke(s,l,l[1],null);return{c(){e=p("div"),i&&i.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var r=E(e);i&&i.l(r),r.forEach(d),this.h()},h(){c(e,"class","comments-list svelte-1y2cz3c")},m(a,r){R(a,e,r),i&&i.m(e,null),t=!0},p(a,r){i&&i.p&&(!t||r&2)&&we(i,s,a,a[1],t?De(s,a[1],r,null):je(a[1]),null)},i(a){t||(S(i,a),t=!0)},o(a){M(i,a),t=!1},d(a){a&&d(e),i&&i.d(a)}}}function Dt(l){let e,t,s,i,a,r,u,n,o=l[0]>0&&Fe(l);return{c(){e=p("div"),t=p("h2"),s=p("i"),i=N(),a=z(l[0]),r=z(" Comments"),u=N(),o&&o.c(),this.h()},l(f){e=k(f,"DIV",{class:!0});var h=E(e);t=k(h,"H2",{class:!0});var v=E(t);s=k(v,"I",{class:!0}),E(s).forEach(d),i=q(v),a=B(v,l[0]),r=B(v," Comments"),v.forEach(d),u=q(h),o&&o.l(h),h.forEach(d),this.h()},h(){c(s,"class","fa-solid fa-message title-icon"),c(t,"class","title"),c(e,"class","comments-container svelte-1y2cz3c")},m(f,h){R(f,e,h),m(e,t),m(t,s),m(t,i),m(t,a),m(t,r),m(e,u),o&&o.m(e,null),n=!0},p(f,[h]){(!n||h&1)&&ne(a,f[0]),f[0]>0?o?(o.p(f,h),h&1&&S(o,1)):(o=Fe(f),o.c(),S(o,1),o.m(e,null)):o&&(Ee(),M(o,1,1,()=>{o=null}),Ie())},i(f){n||(S(o),n=!0)},o(f){M(o),n=!1},d(f){f&&d(e),o&&o.d()}}}function Ct(l,e,t){let{$$slots:s={},$$scope:i}=e,{totalComments:a}=e;return l.$$set=r=>{"totalComments"in r&&t(0,a=r.totalComments),"$$scope"in r&&t(1,i=r.$$scope)},[a,i,s]}class Tt extends fe{constructor(e){super(),ce(this,e,Ct,Dt,me,{totalComments:0})}}function Ge(l){let e,t;return{c(){e=p("p"),t=z("(edit)"),this.h()},l(s){e=k(s,"P",{class:!0});var i=E(e);t=B(i,"(edit)"),i.forEach(d),this.h()},h(){c(e,"class","grey svelte-3y2i6b")},m(s,i){R(s,e,i),m(e,t)},d(s){s&&d(e)}}}function yt(l){let e,t=l[0].comment+"",s;return{c(){e=p("div"),s=z(t),this.h()},l(i){e=k(i,"DIV",{class:!0});var a=E(e);s=B(a,t),a.forEach(d),this.h()},h(){c(e,"class","comment-content svelte-3y2i6b")},m(i,a){R(i,e,a),m(e,s)},p(i,a){a&1&&t!==(t=i[0].comment+"")&&ne(s,t)},d(i){i&&d(e)}}}function Nt(l){let e,t,s,i,a,r,u,n,o,f,h,v,g,_,b;return{c(){e=p("form"),t=p("input"),s=N(),i=p("button"),a=p("i"),r=z(`\r
				Cancel`),u=N(),n=p("button"),o=p("i"),f=z(`\r
				Done`),this.h()},l(j){e=k(j,"FORM",{class:!0,action:!0,method:!0});var D=E(e);t=k(D,"INPUT",{type:!0,name:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),s=q(D),i=k(D,"BUTTON",{class:!0});var A=E(i);a=k(A,"I",{class:!0}),E(a).forEach(d),r=B(A,`\r
				Cancel`),A.forEach(d),u=q(D),n=k(D,"BUTTON",{class:!0});var I=E(n);o=k(I,"I",{class:!0}),E(o).forEach(d),f=B(I,`\r
				Done`),I.forEach(d),D.forEach(d),this.h()},h(){c(t,"type","text"),c(t,"name","comment"),c(t,"spellcheck","false"),c(t,"autocomplete","off"),c(t,"maxlength","4200"),c(t,"class","svelte-3y2i6b"),c(a,"class","fa-solid fa-cancel svelte-3y2i6b"),c(i,"class","red svelte-3y2i6b"),c(o,"class","fa-solid fa-check svelte-3y2i6b"),c(n,"class",h=Re(l[5].length>0?"":"disabled")+" svelte-3y2i6b"),n.disabled=v=!(l[5].length>0),c(e,"class","comment-form svelte-3y2i6b"),c(e,"action",g=Q+"/api/comment/"+l[0].id+"/edit"),c(e,"method","POST")},m(j,D){R(j,e,D),m(e,t),be(t,l[5]),l[14](t),m(e,s),m(e,i),m(i,a),m(i,r),m(e,u),m(e,n),m(n,o),m(n,f),_||(b=[Y(t,"input",l[13]),Y(i,"click",de(l[7])),Y(e,"submit",de(l[8]))],_=!0)},p(j,D){D&32&&t.value!==j[5]&&be(t,j[5]),D&32&&h!==(h=Re(j[5].length>0?"":"disabled")+" svelte-3y2i6b")&&c(n,"class",h),D&32&&v!==(v=!(j[5].length>0))&&(n.disabled=v),D&1&&g!==(g=Q+"/api/comment/"+j[0].id+"/edit")&&c(e,"action",g)},d(j){j&&d(e),l[14](null),_=!1,ye(b)}}}function Je(l){let e,t,s,i,a,r,u=l[3]&&Ke(l);return{c(){e=p("button"),t=p("i"),s=N(),u&&u.c(),i=ue(),this.h()},l(n){e=k(n,"BUTTON",{class:!0});var o=E(e);t=k(o,"I",{class:!0}),E(t).forEach(d),o.forEach(d),s=q(n),u&&u.l(n),i=ue(),this.h()},h(){c(t,"class","fa-solid fa-ellipsis-vertical fa-lg svelte-3y2i6b"),c(e,"class","comment-button svelte-3y2i6b")},m(n,o){R(n,e,o),m(e,t),R(n,s,o),u&&u.m(n,o),R(n,i,o),a||(r=Y(e,"click",l[15]),a=!0)},p(n,o){n[3]?u?u.p(n,o):(u=Ke(n),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},d(n){n&&d(e),n&&d(s),u&&u.d(n),n&&d(i),a=!1,r()}}}function Ke(l){let e,t,s,i,a,r,u,n=l[1].username===l[0].author&&Qe(l);return{c(){e=p("ul"),n&&n.c(),t=N(),s=p("li"),i=p("i"),a=z(`\r
					Delete`),this.h()},l(o){e=k(o,"UL",{class:!0});var f=E(e);n&&n.l(f),t=q(f),s=k(f,"LI",{class:!0});var h=E(s);i=k(h,"I",{class:!0}),E(i).forEach(d),a=B(h,`\r
					Delete`),h.forEach(d),f.forEach(d),this.h()},h(){c(i,"class","fa-solid fa-square-minus svelte-3y2i6b"),c(s,"class","svelte-3y2i6b"),c(e,"class","svelte-3y2i6b")},m(o,f){R(o,e,f),n&&n.m(e,null),m(e,t),m(e,s),m(s,i),m(s,a),r||(u=[Y(s,"mousedown",l[9]),xe(et.call(null,e)),Y(e,"outclick",l[16])],r=!0)},p(o,f){o[1].username===o[0].author?n?n.p(o,f):(n=Qe(o),n.c(),n.m(e,t)):n&&(n.d(1),n=null)},d(o){o&&d(e),n&&n.d(),r=!1,ye(u)}}}function Qe(l){let e,t,s,i,a;return{c(){e=p("li"),t=p("i"),s=z(`\r
						Edit`),this.h()},l(r){e=k(r,"LI",{class:!0});var u=E(e);t=k(u,"I",{class:!0}),E(t).forEach(d),s=B(u,`\r
						Edit`),u.forEach(d),this.h()},h(){c(t,"class","fa-solid fa-pen svelte-3y2i6b"),c(e,"class","svelte-3y2i6b")},m(r,u){R(r,e,u),m(e,t),m(e,s),i||(a=Y(e,"mousedown",l[6]),i=!0)},p:ae,d(r){r&&d(e),i=!1,a()}}}function qt(l){let e,t,s,i,a,r,u,n,o,f=l[0].author+"",h,v,g,_,b=pe(l[0].createdAt)+"",j,D,A,I,w,y,T,C,O=l[0].edit&&Ge();function Z(V,U){return V[4]?Nt:yt}let X=Z(l),F=X(l);const W=l[12].default,G=ke(W,l,l[11],null);let H=l[1]&&(l[1].username===l[0].author||l[1].username===l[0].receiver||l[1].role!==Oe.EDITOR)&&Je(l);return{c(){e=p("div"),t=p("a"),s=p("img"),u=N(),n=p("div"),o=p("a"),h=z(f),g=z(`\r
		●\r
		`),_=p("p"),j=z(b),D=N(),O&&O.c(),A=N(),F.c(),I=N(),w=p("div"),G&&G.c(),y=N(),T=p("div"),H&&H.c(),this.h()},l(V){e=k(V,"DIV",{class:!0});var U=E(e);t=k(U,"A",{class:!0,href:!0});var ge=E(t);s=k(ge,"IMG",{src:!0,alt:!0,class:!0}),ge.forEach(d),u=q(U),n=k(U,"DIV",{class:!0});var J=E(n);o=k(J,"A",{href:!0,class:!0});var K=E(o);h=B(K,f),K.forEach(d),g=B(J,`\r
		●\r
		`),_=k(J,"P",{});var Ce=E(_);j=B(Ce,b),Ce.forEach(d),D=q(J),O&&O.l(J),J.forEach(d),A=q(U),F.l(U),I=q(U),w=k(U,"DIV",{class:!0});var he=E(w);G&&G.l(he),he.forEach(d),y=q(U),T=k(U,"DIV",{class:!0});var le=E(T);H&&H.l(le),le.forEach(d),U.forEach(d),this.h()},h(){_e(s.src,i=Q+"/uploads/avatars/"+l[0].avatar)||c(s,"src",i),c(s,"alt",a=l[0].author),c(s,"class","svelte-3y2i6b"),c(t,"class","comment-avatar svelte-3y2i6b"),c(t,"href",r="/user/"+l[0].author),c(o,"href",v="/user/"+l[0].author),c(o,"class","svelte-3y2i6b"),c(n,"class","comment-author svelte-3y2i6b"),c(w,"class","svelte-3y2i6b"),c(T,"class","comment-options svelte-3y2i6b"),c(e,"class","comment svelte-3y2i6b")},m(V,U){R(V,e,U),m(e,t),m(t,s),m(e,u),m(e,n),m(n,o),m(o,h),m(n,g),m(n,_),m(_,j),m(n,D),O&&O.m(n,null),m(e,A),F.m(e,null),m(e,I),m(e,w),G&&G.m(w,null),m(e,y),m(e,T),H&&H.m(T,null),C=!0},p(V,[U]){(!C||U&1&&!_e(s.src,i=Q+"/uploads/avatars/"+V[0].avatar))&&c(s,"src",i),(!C||U&1&&a!==(a=V[0].author))&&c(s,"alt",a),(!C||U&1&&r!==(r="/user/"+V[0].author))&&c(t,"href",r),(!C||U&1)&&f!==(f=V[0].author+"")&&ne(h,f),(!C||U&1&&v!==(v="/user/"+V[0].author))&&c(o,"href",v),(!C||U&1)&&b!==(b=pe(V[0].createdAt)+"")&&ne(j,b),V[0].edit?O||(O=Ge(),O.c(),O.m(n,null)):O&&(O.d(1),O=null),X===(X=Z(V))&&F?F.p(V,U):(F.d(1),F=X(V),F&&(F.c(),F.m(e,I))),G&&G.p&&(!C||U&2048)&&we(G,W,V,V[11],C?De(W,V[11],U,null):je(V[11]),null),V[1]&&(V[1].username===V[0].author||V[1].username===V[0].receiver||V[1].role!==Oe.EDITOR)?H?H.p(V,U):(H=Je(V),H.c(),H.m(T,null)):H&&(H.d(1),H=null)},i(V){C||(S(G,V),C=!0)},o(V){M(G,V),C=!1},d(V){V&&d(e),O&&O.d(),F.d(),G&&G.d(V),H&&H.d()}}}function Ot(l,e,t){let{$$slots:s={},$$scope:i}=e,{comment:a}=e,{comments:r}=e,{user:u}=e,n,o=!1,f=!1,h=a.comment;async function v(){t(4,f=!0),t(3,o=!1),n.focus()}async function g(){t(4,f=!1),t(5,h=a.comment),n.blur()}async function _(){t(4,f=!1),t(0,a.edit=!0,a),t(0,a.comment=h,a),Pe(this)}async function b(){t(3,o=!1),t(10,r=r.filter(({id:w})=>w!==a.id)),await Ae({method:"DELETE",url:`${Q}/api/comment/${a.id}`,withCredentials:!0})}function j(){h=this.value,t(5,h)}function D(w){$[w?"unshift":"push"](()=>{n=w,t(2,n)})}const A=()=>t(3,o=!o),I=()=>t(3,o=!1);return l.$$set=w=>{"comment"in w&&t(0,a=w.comment),"comments"in w&&t(10,r=w.comments),"user"in w&&t(1,u=w.user),"$$scope"in w&&t(11,i=w.$$scope)},[a,u,n,o,f,h,v,g,_,b,r,i,s,j,D,A,I]}class Vt extends fe{constructor(e){super(),ce(this,e,Ot,qt,me,{comment:0,comments:10,user:1})}}function At(l){let e,t,s,i,a,r,u=l[0].title+"",n,o,f,h=l[0].author+"",v,g,_,b=l[0].views+"",j,D,A=pe(l[0].createdAt)+"",I,w,y;return{c(){e=p("a"),t=p("img"),a=N(),r=p("h2"),n=z(u),o=N(),f=p("p"),v=z(h),g=N(),_=p("div"),j=z(b),D=z(" views ● "),I=z(A),this.h()},l(T){e=k(T,"A",{href:!0,title:!0,class:!0});var C=E(e);t=k(C,"IMG",{src:!0,alt:!0,class:!0}),a=q(C),r=k(C,"H2",{class:!0});var O=E(r);n=B(O,u),O.forEach(d),o=q(C),f=k(C,"P",{class:!0});var Z=E(f);v=B(Z,h),Z.forEach(d),g=q(C),_=k(C,"DIV",{class:!0});var X=E(_);j=B(X,b),D=B(X," views ● "),I=B(X,A),X.forEach(d),C.forEach(d),this.h()},h(){_e(t.src,s=Q+"/uploads/"+l[0].filename)||c(t,"src",s),c(t,"alt",i=l[0].title),c(t,"class","svelte-18hblro"),c(r,"class","svelte-18hblro"),c(f,"class","svelte-18hblro"),c(_,"class","svelte-18hblro"),c(e,"href",w="/gallery/"+l[0].id),c(e,"title",y=l[0].title),c(e,"class","svelte-18hblro")},m(T,C){R(T,e,C),m(e,t),m(e,a),m(e,r),m(r,n),m(e,o),m(e,f),m(f,v),m(e,g),m(e,_),m(_,j),m(_,D),m(_,I)},p(T,[C]){C&1&&!_e(t.src,s=Q+"/uploads/"+T[0].filename)&&c(t,"src",s),C&1&&i!==(i=T[0].title)&&c(t,"alt",i),C&1&&u!==(u=T[0].title+"")&&ne(n,u),C&1&&h!==(h=T[0].author+"")&&ne(v,h),C&1&&b!==(b=T[0].views+"")&&ne(j,b),C&1&&A!==(A=pe(T[0].createdAt)+"")&&ne(I,A),C&1&&w!==(w="/gallery/"+T[0].id)&&c(e,"href",w),C&1&&y!==(y=T[0].title)&&c(e,"title",y)},i:ae,o:ae,d(T){T&&d(e)}}}function Pt(l,e,t){let{image:s}=e;return l.$$set=i=>{"image"in i&&t(0,s=i.image)},[s]}class St extends fe{constructor(e){super(),ce(this,e,Pt,At,me,{image:0})}}function zt(l){let e;return{c(){e=p("i"),this.h()},l(t){e=k(t,"I",{class:!0}),E(e).forEach(d),this.h()},h(){c(e,"class","fa-solid fa-eye-slash")},m(t,s){R(t,e,s)},d(t){t&&d(e)}}}function Bt(l){let e;return{c(){e=p("i"),this.h()},l(t){e=k(t,"I",{class:!0}),E(e).forEach(d),this.h()},h(){c(e,"class","fa-solid fa-eye")},m(t,s){R(t,e,s)},d(t){t&&d(e)}}}function Rt(l){let e,t,s,i,a,r,u,n,o,f,h,v,g,_,b,j,D,A,I;function w(C,O){return C[0].isPublic?Bt:zt}let y=w(l),T=y(l);return{c(){e=p("ul"),t=p("a"),s=p("li"),i=z("Edit"),a=N(),r=p("i"),u=N(),n=p("a"),o=p("li"),f=z("Public"),h=N(),T.c(),v=N(),g=p("a"),_=p("li"),b=z("Delete"),j=N(),D=p("i"),this.h()},l(C){e=k(C,"UL",{class:!0});var O=E(e);t=k(O,"A",{href:!0,class:!0});var Z=E(t);s=k(Z,"LI",{});var X=E(s);i=B(X,"Edit"),X.forEach(d),a=q(Z),r=k(Z,"I",{class:!0}),E(r).forEach(d),Z.forEach(d),u=q(O),n=k(O,"A",{href:!0,class:!0});var F=E(n);o=k(F,"LI",{});var W=E(o);f=B(W,"Public"),W.forEach(d),h=q(F),T.l(F),F.forEach(d),v=q(O),g=k(O,"A",{href:!0,class:!0});var G=E(g);_=k(G,"LI",{});var H=E(_);b=B(H,"Delete"),H.forEach(d),j=q(G),D=k(G,"I",{class:!0}),E(D).forEach(d),G.forEach(d),O.forEach(d),this.h()},h(){c(r,"class","fa-solid fa-pen"),c(t,"href","#edit"),c(t,"class","svelte-1jhluf3"),c(n,"href","#placeholder"),c(n,"class","svelte-1jhluf3"),c(D,"class","fa-solid fa-delete-left"),c(g,"href","#placeholder"),c(g,"class","svelte-1jhluf3"),c(e,"class","svelte-1jhluf3")},m(C,O){R(C,e,O),m(e,t),m(t,s),m(s,i),m(t,a),m(t,r),m(e,u),m(e,n),m(n,o),m(o,f),m(n,h),T.m(n,null),m(e,v),m(e,g),m(g,_),m(_,b),m(g,j),m(g,D),A||(I=[Y(t,"click",l[2]),Y(n,"click",de(l[3])),Y(g,"click",de(l[4])),xe(et.call(null,e)),Y(e,"outclick",l[6])],A=!0)},p(C,[O]){y!==(y=w(C))&&(T.d(1),T=y(C),T&&(T.c(),T.m(n,null)))},i:ae,o:ae,d(C){C&&d(e),T.d(),A=!1,ye(I)}}}function Ut(l,e,t){let{image:s}=e,{visible:i}=e,{description:a}=e;const r=()=>{t(1,i=!1),t(5,a=!0)},u=async()=>{t(1,i=!1),await Ae({method:"POST",url:`${Q}/api/image/${s.id}/public`,withCredentials:!0}),t(0,s.isPublic=!s.isPublic,s)},n=async()=>{t(1,i=!1),await Ae({method:"DELETE",url:`${Q}/api/image/${s.id}`,withCredentials:!0}),window.location.href="/"},o=()=>t(1,i=!1);return l.$$set=f=>{"image"in f&&t(0,s=f.image),"visible"in f&&t(1,i=f.visible),"description"in f&&t(5,a=f.description)},[s,i,r,u,n,a,o]}class Mt extends fe{constructor(e){super(),ce(this,e,Ut,Rt,me,{image:0,visible:1,description:5})}}function Lt(l){return l.favorite!==void 0}function Ht(l){let e,t,s,i,a,r,u;return{c(){e=p("div"),t=p("i"),i=N(),a=z(l[5]),this.h()},l(n){e=k(n,"DIV",{class:!0});var o=E(e);t=k(o,"I",{id:!0,class:!0}),E(t).forEach(d),i=q(o),a=B(o,l[5]),o.forEach(d),this.h()},h(){c(t,"id",l[0]),c(t,"class",s="fa-solid "+l[1]+" "+(l[3]?l[2]:"")+" svelte-xdj7pf"),c(e,"class","svelte-xdj7pf")},m(n,o){R(n,e,o),m(e,t),m(e,i),m(e,a),r||(u=Y(t,"mousedown",function(){lt(l[4]?l[7]:l[6])&&(l[4]?l[7]:l[6]).apply(this,arguments)}),r=!0)},p(n,[o]){l=n,o&1&&c(t,"id",l[0]),o&14&&s!==(s="fa-solid "+l[1]+" "+(l[3]?l[2]:"")+" svelte-xdj7pf")&&c(t,"class",s),o&32&&ne(a,l[5])},i:ae,o:ae,d(n){n&&d(e),r=!1,u()}}}function Ft(l,e,t){let{user:s}=e,{object:i}=e,{id:a="like"}=e,{text:r="image"}=e,{icon:u="fa-thumbs-up"}=e,{className:n="selected"}=e,{include:o}=e,{fav:f=!1}=e,{assessment:h}=e;async function v(){if(s){const _=`${Q}/api/${r}/${i.id}/like`,{like:b,dislike:j}=await Ue(_,this.id);t(8,i.like=b,i),t(8,i.dislike=j,i)}}async function g(){if(s&&Lt(i)){const _=`${Q}/api/image/${i.id}/favorite`,{favorite:b}=await Ue(_,this.id);t(8,i.favorite=b,i)}}return l.$$set=_=>{"user"in _&&t(9,s=_.user),"object"in _&&t(8,i=_.object),"id"in _&&t(0,a=_.id),"text"in _&&t(10,r=_.text),"icon"in _&&t(1,u=_.icon),"className"in _&&t(2,n=_.className),"include"in _&&t(3,o=_.include),"fav"in _&&t(4,f=_.fav),"assessment"in _&&t(5,h=_.assessment)},[a,u,n,o,f,h,v,g,i,s,r]}class Te extends fe{constructor(e){super(),ce(this,e,Ft,Ht,me,{user:9,object:8,id:0,text:10,icon:1,className:2,include:3,fav:4,assessment:5})}}function Xe(l,e,t){const s=l.slice();return s[16]=e[t],s[17]=e,s[18]=t,s}function Ye(l,e,t){const s=l.slice();return s[19]=e[t],s}function Ze(l){let e,t,s,i,a;function r(f){l[6](f)}function u(f){l[7](f)}function n(f){l[8](f)}let o={};return l[0].image!==void 0&&(o.image=l[0].image),l[1]!==void 0&&(o.visible=l[1]),l[2]!==void 0&&(o.description=l[2]),e=new Mt({props:o}),$.push(()=>oe(e,"image",r)),$.push(()=>oe(e,"visible",u)),$.push(()=>oe(e,"description",n)),{c(){x(e.$$.fragment)},l(f){ee(e.$$.fragment,f)},m(f,h){te(e,f,h),a=!0},p(f,h){const v={};!t&&h&1&&(t=!0,v.image=f[0].image,re(()=>t=!1)),!s&&h&2&&(s=!0,v.visible=f[1],re(()=>s=!1)),!i&&h&4&&(i=!0,v.description=f[2],re(()=>i=!1)),e.$set(v)},i(f){a||(S(e.$$.fragment,f),a=!0)},o(f){M(e.$$.fragment,f),a=!1},d(f){se(e,f)}}}function Gt(l){let e,t,s=l[1]&&Ze(l);return{c(){s&&s.c(),e=ue()},l(i){s&&s.l(i),e=ue()},m(i,a){s&&s.m(i,a),R(i,e,a),t=!0},p(i,a){i[1]?s?(s.p(i,a),a&2&&S(s,1)):(s=Ze(i),s.c(),S(s,1),s.m(e.parentNode,e)):s&&(Ee(),M(s,1,1,()=>{s=null}),Ie())},i(i){t||(S(s),t=!0)},o(i){M(s),t=!1},d(i){s&&s.d(i),i&&d(e)}}}function Jt(l){var D,A,I;let e,t,s,i,a,r,u,n,o,f;function h(w){l[3](w)}let v={user:l[0].user,include:l[0].image.like.includes((D=l[0].user)==null?void 0:D.username),assessment:l[0].image.like.length};l[0].image!==void 0&&(v.object=l[0].image),t=new Te({props:v}),$.push(()=>oe(t,"object",h));function g(w){l[4](w)}let _={user:l[0].user,id:"dislike",icon:"fa-thumbs-down",assessment:l[0].image.dislike.length,include:l[0].image.dislike.includes((A=l[0].user)==null?void 0:A.username)};l[0].image!==void 0&&(_.object=l[0].image),a=new Te({props:_}),$.push(()=>oe(a,"object",g));function b(w){l[5](w)}let j={user:l[0].user,id:"fav",fav:!0,icon:"fa-star",assessment:l[0].image.favorite.length,include:l[0].image.favorite.includes((I=l[0].user)==null?void 0:I.username)};return l[0].image!==void 0&&(j.object=l[0].image),n=new Te({props:j}),$.push(()=>oe(n,"object",b)),{c(){e=p("div"),x(t.$$.fragment),i=N(),x(a.$$.fragment),u=N(),x(n.$$.fragment),this.h()},l(w){e=k(w,"DIV",{class:!0,slot:!0});var y=E(e);ee(t.$$.fragment,y),i=q(y),ee(a.$$.fragment,y),u=q(y),ee(n.$$.fragment,y),y.forEach(d),this.h()},h(){c(e,"class","image-stats svelte-2mhczw"),c(e,"slot","assessment")},m(w,y){R(w,e,y),te(t,e,null),m(e,i),te(a,e,null),m(e,u),te(n,e,null),f=!0},p(w,y){var Z,X,F;const T={};y&1&&(T.user=w[0].user),y&1&&(T.include=w[0].image.like.includes((Z=w[0].user)==null?void 0:Z.username)),y&1&&(T.assessment=w[0].image.like.length),!s&&y&1&&(s=!0,T.object=w[0].image,re(()=>s=!1)),t.$set(T);const C={};y&1&&(C.user=w[0].user),y&1&&(C.assessment=w[0].image.dislike.length),y&1&&(C.include=w[0].image.dislike.includes((X=w[0].user)==null?void 0:X.username)),!r&&y&1&&(r=!0,C.object=w[0].image,re(()=>r=!1)),a.$set(C);const O={};y&1&&(O.user=w[0].user),y&1&&(O.assessment=w[0].image.favorite.length),y&1&&(O.include=w[0].image.favorite.includes((F=w[0].user)==null?void 0:F.username)),!o&&y&1&&(o=!0,O.object=w[0].image,re(()=>o=!1)),n.$set(O)},i(w){f||(S(t.$$.fragment,w),S(a.$$.fragment,w),S(n.$$.fragment,w),f=!0)},o(w){M(t.$$.fragment,w),M(a.$$.fragment,w),M(n.$$.fragment,w),f=!1},d(w){w&&d(e),se(t),se(a),se(n)}}}function We(l){let e,t;return e=new St({props:{image:l[19]}}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,i){te(e,s,i),t=!0},p(s,i){const a={};i&1&&(a.image=s[19]),e.$set(a)},i(s){t||(S(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Kt(l){let e,t,s=l[0].sidebar,i=[];for(let r=0;r<s.length;r+=1)i[r]=We(Ye(l,s,r));const a=r=>M(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=ue()},l(r){for(let u=0;u<i.length;u+=1)i[u].l(r);e=ue()},m(r,u){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(r,u);R(r,e,u),t=!0},p(r,u){if(u&1){s=r[0].sidebar;let n;for(n=0;n<s.length;n+=1){const o=Ye(r,s,n);i[n]?(i[n].p(o,u),S(i[n],1)):(i[n]=We(o),i[n].c(),S(i[n],1),i[n].m(e.parentNode,e))}for(Ee(),n=s.length;n<i.length;n+=1)a(n);Ie()}},i(r){if(!t){for(let u=0;u<s.length;u+=1)S(i[u]);t=!0}},o(r){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)M(i[u]);t=!1},d(r){it(i,r),r&&d(e)}}}function Qt(l){let e,t;return e=new ot({props:{className:"image-sidebar",$$slots:{default:[Kt]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,i){te(e,s,i),t=!0},p(s,i){const a={};i&4194305&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){t||(S(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Xt(l){let e,t;return e=new Et({}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,i){te(e,s,i),t=!0},p:ae,i(s){t||(S(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Yt(l){let e,t,s;function i(r){l[11](r)}let a={imageId:l[0].image.id,avatar:l[0].user.avatar};return l[0].comments!==void 0&&(a.comments=l[0].comments),e=new jt({props:a}),$.push(()=>oe(e,"comments",i)),{c(){x(e.$$.fragment)},l(r){ee(e.$$.fragment,r)},m(r,u){te(e,r,u),s=!0},p(r,u){const n={};u&1&&(n.imageId=r[0].image.id),u&1&&(n.avatar=r[0].user.avatar),!t&&u&1&&(t=!0,n.comments=r[0].comments,re(()=>t=!1)),e.$set(n)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){se(e,r)}}}function Zt(l){var v,g;let e,t,s,i,a,r,u;function n(_){l[12](_,l[16],l[17],l[18])}let o={user:l[0].user,text:"comment",assessment:l[16].like.length,className:"grey",include:l[16].like.includes((v=l[0].user)==null?void 0:v.username)};l[16]!==void 0&&(o.object=l[16]),e=new Te({props:o}),$.push(()=>oe(e,"object",n));function f(_){l[13](_,l[16],l[17],l[18])}let h={user:l[0].user,id:"dislike",text:"comment",icon:"fa-solid fa-thumbs-down",className:"grey",assessment:l[16].dislike.length,include:l[16].dislike.includes((g=l[0].user)==null?void 0:g.username)};return l[16]!==void 0&&(h.object=l[16]),i=new Te({props:h}),$.push(()=>oe(i,"object",f)),{c(){x(e.$$.fragment),s=N(),x(i.$$.fragment),r=N()},l(_){ee(e.$$.fragment,_),s=q(_),ee(i.$$.fragment,_),r=q(_)},m(_,b){te(e,_,b),R(_,s,b),te(i,_,b),R(_,r,b),u=!0},p(_,b){var A,I;l=_;const j={};b&1&&(j.user=l[0].user),b&1&&(j.assessment=l[16].like.length),b&1&&(j.include=l[16].like.includes((A=l[0].user)==null?void 0:A.username)),!t&&b&1&&(t=!0,j.object=l[16],re(()=>t=!1)),e.$set(j);const D={};b&1&&(D.user=l[0].user),b&1&&(D.assessment=l[16].dislike.length),b&1&&(D.include=l[16].dislike.includes((I=l[0].user)==null?void 0:I.username)),!a&&b&1&&(a=!0,D.object=l[16],re(()=>a=!1)),i.$set(D)},i(_){u||(S(e.$$.fragment,_),S(i.$$.fragment,_),u=!0)},o(_){M(e.$$.fragment,_),M(i.$$.fragment,_),u=!1},d(_){se(e,_),_&&d(s),se(i,_),_&&d(r)}}}function $e(l,e){let t,s,i,a,r;function u(f){e[14](f)}function n(f){e[15](f,e[16],e[17],e[18])}let o={user:e[0].user,$$slots:{default:[Zt]},$$scope:{ctx:e}};return e[0].comments!==void 0&&(o.comments=e[0].comments),e[16]!==void 0&&(o.comment=e[16]),s=new Vt({props:o}),$.push(()=>oe(s,"comments",u)),$.push(()=>oe(s,"comment",n)),{key:l,first:null,c(){t=ue(),x(s.$$.fragment),this.h()},l(f){t=ue(),ee(s.$$.fragment,f),this.h()},h(){this.first=t},m(f,h){R(f,t,h),te(s,f,h),r=!0},p(f,h){e=f;const v={};h&1&&(v.user=e[0].user),h&4194305&&(v.$$scope={dirty:h,ctx:e}),!i&&h&1&&(i=!0,v.comments=e[0].comments,re(()=>i=!1)),!a&&h&1&&(a=!0,v.comment=e[16],re(()=>a=!1)),s.$set(v)},i(f){r||(S(s.$$.fragment,f),r=!0)},o(f){M(s.$$.fragment,f),r=!1},d(f){f&&d(t),se(s,f)}}}function Wt(l){let e=[],t=new Map,s,i,a=l[0].comments;const r=u=>u[16].id;for(let u=0;u<a.length;u+=1){let n=Xe(l,a,u),o=r(n);t.set(o,e[u]=$e(o,n))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();s=ue()},l(u){for(let n=0;n<e.length;n+=1)e[n].l(u);s=ue()},m(u,n){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(u,n);R(u,s,n),i=!0},p(u,n){n&1&&(a=u[0].comments,Ee(),e=nt(e,n,r,1,u,a,t,s.parentNode,at,$e,s,Xe),Ie())},i(u){if(!i){for(let n=0;n<a.length;n+=1)S(e[n]);i=!0}},o(u){for(let n=0;n<e.length;n+=1)M(e[n]);i=!1},d(u){for(let n=0;n<e.length;n+=1)e[n].d(u);u&&d(s)}}}function $t(l){let e,t,s,i,a;const r=[Yt,Xt],u=[];function n(o,f){return o[0].user?0:1}return e=n(l),t=u[e]=r[e](l),i=new Tt({props:{totalComments:l[0].comments.length,$$slots:{default:[Wt]},$$scope:{ctx:l}}}),{c(){t.c(),s=N(),x(i.$$.fragment)},l(o){t.l(o),s=q(o),ee(i.$$.fragment,o)},m(o,f){u[e].m(o,f),R(o,s,f),te(i,o,f),a=!0},p(o,f){let h=e;e=n(o),e===h?u[e].p(o,f):(Ee(),M(u[h],1,1,()=>{u[h]=null}),Ie(),t=u[e],t?t.p(o,f):(t=u[e]=r[e](o),t.c()),S(t,1),t.m(s.parentNode,s));const v={};f&1&&(v.totalComments=o[0].comments.length),f&4194305&&(v.$$scope={dirty:f,ctx:o}),i.$set(v)},i(o){a||(S(t),S(i.$$.fragment,o),a=!0)},o(o){M(t),M(i.$$.fragment,o),a=!1},d(o){u[e].d(o),o&&d(s),se(i,o)}}}function xt(l){let e,t,s,i,a,r,u,n,o;function f(g){l[9](g)}function h(g){l[10](g)}let v={image:l[0].image,user:l[0].user,$$slots:{assessment:[Jt],default:[Gt]},$$scope:{ctx:l}};return l[1]!==void 0&&(v.visible=l[1]),l[2]!==void 0&&(v.description=l[2]),t=new _t({props:v}),$.push(()=>oe(t,"visible",f)),$.push(()=>oe(t,"description",h)),r=new gt({props:{$$slots:{default:[Qt]},$$scope:{ctx:l}}}),n=new pt({props:{$$slots:{default:[$t]},$$scope:{ctx:l}}}),{c(){e=p("div"),x(t.$$.fragment),a=N(),x(r.$$.fragment),u=N(),x(n.$$.fragment),this.h()},l(g){e=k(g,"DIV",{class:!0});var _=E(e);ee(t.$$.fragment,_),a=q(_),ee(r.$$.fragment,_),u=q(_),ee(n.$$.fragment,_),_.forEach(d),this.h()},h(){c(e,"class","image-container svelte-2mhczw")},m(g,_){R(g,e,_),te(t,e,null),m(e,a),te(r,e,null),m(e,u),te(n,e,null),o=!0},p(g,[_]){const b={};_&1&&(b.image=g[0].image),_&1&&(b.user=g[0].user),_&4194311&&(b.$$scope={dirty:_,ctx:g}),!s&&_&2&&(s=!0,b.visible=g[1],re(()=>s=!1)),!i&&_&4&&(i=!0,b.description=g[2],re(()=>i=!1)),t.$set(b);const j={};_&4194305&&(j.$$scope={dirty:_,ctx:g}),r.$set(j);const D={};_&4194305&&(D.$$scope={dirty:_,ctx:g}),n.$set(D)},i(g){o||(S(t.$$.fragment,g),S(r.$$.fragment,g),S(n.$$.fragment,g),o=!0)},o(g){M(t.$$.fragment,g),M(r.$$.fragment,g),M(n.$$.fragment,g),o=!1},d(g){g&&d(e),se(t),se(r),se(n)}}}function es(l,e,t){let{data:s}=e,i=!1,a=!1;function r(I){l.$$.not_equal(s.image,I)&&(s.image=I,t(0,s))}function u(I){l.$$.not_equal(s.image,I)&&(s.image=I,t(0,s))}function n(I){l.$$.not_equal(s.image,I)&&(s.image=I,t(0,s))}function o(I){l.$$.not_equal(s.image,I)&&(s.image=I,t(0,s))}function f(I){i=I,t(1,i)}function h(I){a=I,t(2,a)}function v(I){i=I,t(1,i)}function g(I){a=I,t(2,a)}function _(I){l.$$.not_equal(s.comments,I)&&(s.comments=I,t(0,s))}function b(I,w,y,T){y[T]=I,t(0,s)}function j(I,w,y,T){y[T]=I,t(0,s)}function D(I){l.$$.not_equal(s.comments,I)&&(s.comments=I,t(0,s))}function A(I,w,y,T){y[T]=I,t(0,s)}return l.$$set=I=>{"data"in I&&t(0,s=I.data)},[s,i,a,r,u,n,o,f,h,v,g,_,b,j,D,A]}class us extends fe{constructor(e){super(),ce(this,e,es,xt,me,{data:0})}}export{us as default};
