import{S as fe,i as ce,s as me,H as ke,k,a as O,q as U,l as E,m as I,c as V,h as v,r as y,n as c,C as _e,b as q,D as m,g as R,v as Ee,d as L,f as Ie,u as oe,I as we,J as je,K as De,F as Z,a2 as tt,e as ue,a3 as st,a0 as be,N as de,M as Ne,G as re,w as W,L as xe,R as qe,Q as lt,Y as x,y as te,z as se,A as le,Z as ee,B as ie,$ as it,O as nt,a1 as at}from"../chunks/index.4c08a5a5.js";import{f as pe}from"../chunks/index.c08ef366.js";import{D as X}from"../chunks/config.c392556e.js";import{U as Ae}from"../chunks/enums.4774c07c.js";import{h as Be,a as Me}from"../chunks/services.2280ee1d.js";import{B as ot}from"../chunks/BoxGallery.30b4255f.js";import{a as Se}from"../chunks/axios.aba6f0e0.js";import{c as et}from"../chunks/click-outside.61d417da.js";const rt=l=>({}),Le=l=>({});function ze(l){let e,t,s,i,a,f;const u=l[7].default,n=ke(u,l,l[6],null);return{c(){e=k("div"),t=k("i"),s=O(),n&&n.c(),this.h()},l(o){e=E(o,"DIV",{class:!0});var r=I(e);t=E(r,"I",{class:!0}),I(t).forEach(v),s=V(r),n&&n.l(r),r.forEach(v),this.h()},h(){c(t,"class","fa-solid fa-ellipsis svelte-1lm9av0"),c(e,"class","image-edit svelte-1lm9av0")},m(o,r){q(o,e,r),m(e,t),m(e,s),n&&n.m(e,null),i=!0,a||(f=Z(t,"mousedown",l[8]),a=!0)},p(o,r){n&&n.p&&(!i||r&64)&&we(n,u,o,o[6],i?De(u,o[6],r,null):je(o[6]),null)},i(o){i||(R(n,o),i=!0)},o(o){L(n,o),i=!1},d(o){o&&v(e),n&&n.d(o),a=!1,f()}}}function ut(l){let e,t=l[0].description+"",s;return{c(){e=new tt(!1),s=ue(),this.h()},l(i){e=st(i,!1),s=ue(),this.h()},h(){e.a=s},m(i,a){e.m(t,i,a),q(i,s,a)},p(i,a){a&1&&t!==(t=i[0].description+"")&&e.p(t)},d(i){i&&v(s),i&&e.d()}}}function ft(l){let e,t,s,i,a,f,u,n,o,r,h;return{c(){e=k("form"),t=k("textarea"),s=O(),i=k("button"),a=U("Cancel"),f=O(),u=k("button"),n=U("Send"),this.h()},l(d){e=E(d,"FORM",{class:!0,action:!0,method:!0});var g=I(e);t=E(g,"TEXTAREA",{id:!0,name:!0,rows:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),I(t).forEach(v),s=V(g),i=E(g,"BUTTON",{class:!0});var _=I(i);a=y(_,"Cancel"),_.forEach(v),f=V(g),u=E(g,"BUTTON",{class:!0});var b=I(u);n=y(b,"Send"),b.forEach(v),g.forEach(v),this.h()},h(){c(t,"id","edit"),c(t,"name","description"),c(t,"rows","1"),c(t,"spellcheck","false"),c(t,"autocomplete","off"),c(t,"maxlength","4200"),c(t,"class","svelte-1lm9av0"),c(i,"class","svelte-1lm9av0"),c(u,"class","blue svelte-1lm9av0"),c(e,"class","image-form svelte-1lm9av0"),c(e,"action",o=X+"/api/image/"+l[0].id+"/description"),c(e,"method","POST")},m(d,g){q(d,e,g),m(e,t),be(t,l[0].description),m(e,s),m(e,i),m(i,a),m(e,f),m(e,u),m(u,n),r||(h=[Z(t,"input",l[9]),Z(i,"click",de(l[5])),Z(e,"submit",de(l[4]))],r=!0)},p(d,g){g&1&&be(t,d[0].description),g&1&&o!==(o=X+"/api/image/"+d[0].id+"/description")&&c(e,"action",o)},d(d){d&&v(e),r=!1,Ne(h)}}}function ct(l){let e,t,s,i,a,f=l[0].title+"",u,n,o,r,h,d,g,_,b,j,D=l[0].author+"",S,P,w,T,p=l[0].views+"",C,N,H=pe(l[0].createdAt)+"",Y,G,$,J,F,A,M,ge,K,Q=l[3]&&(l[3].username===l[0].author||l[3].role!==Ae.EDITOR)&&ze(l);function Ce(B,z){return B[2]?ft:ut}let he=Ce(l),ne=he(l);const Pe=l[7].assessment,ae=ke(Pe,l,l[6],Le);return{c(){e=k("div"),Q&&Q.c(),t=O(),s=k("h2"),i=k("i"),a=O(),u=U(f),n=O(),o=k("div"),r=k("a"),h=k("img"),b=O(),j=k("a"),S=U(D),w=O(),T=k("p"),C=U(p),N=U(" views ● "),Y=U(H),G=O(),$=k("img"),A=O(),M=k("div"),ne.c(),ge=O(),ae&&ae.c(),this.h()},l(B){e=E(B,"DIV",{class:!0});var z=I(e);Q&&Q.l(z),t=V(z),s=E(z,"H2",{class:!0});var Oe=I(s);i=E(Oe,"I",{class:!0}),I(i).forEach(v),a=V(Oe),u=y(Oe,f),Oe.forEach(v),n=V(z),o=E(z,"DIV",{class:!0});var ve=I(o);r=E(ve,"A",{class:!0,href:!0});var Re=I(r);h=E(Re,"IMG",{class:!0,src:!0,alt:!0}),Re.forEach(v),b=V(ve),j=E(ve,"A",{class:!0,href:!0});var Ue=I(j);S=y(Ue,D),Ue.forEach(v),w=V(ve),T=E(ve,"P",{});var Ve=I(T);C=y(Ve,p),N=y(Ve," views ● "),Y=y(Ve,H),Ve.forEach(v),ve.forEach(v),G=V(z),$=E(z,"IMG",{class:!0,src:!0,alt:!0}),A=V(z),M=E(z,"DIV",{class:!0});var ye=I(M);ne.l(ye),ye.forEach(v),ge=V(z),ae&&ae.l(z),z.forEach(v),this.h()},h(){c(i,"class","fa-solid fa-image title-icon"),c(s,"class","title"),c(h,"class","image-author-avatar svelte-1lm9av0"),_e(h.src,d=X+"/uploads/avatars/"+l[0].avatar)||c(h,"src",d),c(h,"alt",g=l[0].author),c(r,"class","image-author-link svelte-1lm9av0"),c(r,"href",_="/user/"+l[0].author),c(j,"class","image-author-username svelte-1lm9av0"),c(j,"href",P="/user/"+l[0].author),c(o,"class","image-author svelte-1lm9av0"),c($,"class","image-content svelte-1lm9av0"),_e($.src,J=X+"/uploads/"+l[0].filename)||c($,"src",J),c($,"alt",F=l[0].title),c(M,"class","image-description svelte-1lm9av0"),c(e,"class","image-box svelte-1lm9av0")},m(B,z){q(B,e,z),Q&&Q.m(e,null),m(e,t),m(e,s),m(s,i),m(s,a),m(s,u),m(e,n),m(e,o),m(o,r),m(r,h),m(o,b),m(o,j),m(j,S),m(o,w),m(o,T),m(T,C),m(T,N),m(T,Y),m(e,G),m(e,$),m(e,A),m(e,M),ne.m(M,null),m(e,ge),ae&&ae.m(e,null),K=!0},p(B,[z]){B[3]&&(B[3].username===B[0].author||B[3].role!==Ae.EDITOR)?Q?(Q.p(B,z),z&9&&R(Q,1)):(Q=ze(B),Q.c(),R(Q,1),Q.m(e,t)):Q&&(Ee(),L(Q,1,1,()=>{Q=null}),Ie()),(!K||z&1)&&f!==(f=B[0].title+"")&&oe(u,f),(!K||z&1&&!_e(h.src,d=X+"/uploads/avatars/"+B[0].avatar))&&c(h,"src",d),(!K||z&1&&g!==(g=B[0].author))&&c(h,"alt",g),(!K||z&1&&_!==(_="/user/"+B[0].author))&&c(r,"href",_),(!K||z&1)&&D!==(D=B[0].author+"")&&oe(S,D),(!K||z&1&&P!==(P="/user/"+B[0].author))&&c(j,"href",P),(!K||z&1)&&p!==(p=B[0].views+"")&&oe(C,p),(!K||z&1)&&H!==(H=pe(B[0].createdAt)+"")&&oe(Y,H),(!K||z&1&&!_e($.src,J=X+"/uploads/"+B[0].filename))&&c($,"src",J),(!K||z&1&&F!==(F=B[0].title))&&c($,"alt",F),he===(he=Ce(B))&&ne?ne.p(B,z):(ne.d(1),ne=he(B),ne&&(ne.c(),ne.m(M,null))),ae&&ae.p&&(!K||z&64)&&we(ae,Pe,B,B[6],K?De(Pe,B[6],z,rt):je(B[6]),Le)},i(B){K||(R(Q),R(ae,B),K=!0)},o(B){L(Q),L(ae,B),K=!1},d(B){B&&v(e),Q&&Q.d(),ne.d(),ae&&ae.d(B)}}}function mt(l,e,t){let{$$slots:s={},$$scope:i}=e,{image:a}=e,{user:f}=e,{visible:u}=e,{description:n}=e;async function o(){t(2,n=!1),Be(this)}async function r(){t(2,n=!1)}const h=()=>t(1,u=!u);function d(){a.description=this.value,t(0,a)}return l.$$set=g=>{"image"in g&&t(0,a=g.image),"user"in g&&t(3,f=g.user),"visible"in g&&t(1,u=g.visible),"description"in g&&t(2,n=g.description),"$$scope"in g&&t(6,i=g.$$scope)},[a,u,n,f,o,r,i,s,h,d]}class _t extends fe{constructor(e){super(),ce(this,e,mt,ct,me,{image:0,user:3,visible:1,description:2})}}function ht(l){let e,t,s,i,a,f,u;const n=l[1].default,o=ke(n,l,l[0],null);return{c(){e=k("div"),t=k("div"),s=k("h2"),i=k("i"),a=U(`\r
			Recent Uploads`),f=O(),o&&o.c(),this.h()},l(r){e=E(r,"DIV",{class:!0});var h=I(e);t=E(h,"DIV",{class:!0});var d=I(t);s=E(d,"H2",{class:!0});var g=I(s);i=E(g,"I",{class:!0}),I(i).forEach(v),a=y(g,`\r
			Recent Uploads`),g.forEach(v),f=V(d),o&&o.l(d),d.forEach(v),h.forEach(v),this.h()},h(){c(i,"class","fa-solid fa-images title-icon"),c(s,"class","title"),c(t,"class","sidebar-container svelte-pei3k5"),c(e,"class","sidebar svelte-pei3k5")},m(r,h){q(r,e,h),m(e,t),m(t,s),m(s,i),m(s,a),m(t,f),o&&o.m(t,null),u=!0},p(r,[h]){o&&o.p&&(!u||h&1)&&we(o,n,r,r[0],u?De(n,r[0],h,null):je(r[0]),null)},i(r){u||(R(o,r),u=!0)},o(r){L(o,r),u=!1},d(r){r&&v(e),o&&o.d(r)}}}function dt(l,e,t){let{$$slots:s={},$$scope:i}=e;return l.$$set=a=>{"$$scope"in a&&t(0,i=a.$$scope)},[i,s]}class gt extends fe{constructor(e){super(),ce(this,e,dt,ht,me,{})}}function vt(l){let e,t;const s=l[1].default,i=ke(s,l,l[0],null);return{c(){e=k("div"),i&&i.c(),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=I(e);i&&i.l(f),f.forEach(v),this.h()},h(){c(e,"class","comments svelte-1n6d5p9")},m(a,f){q(a,e,f),i&&i.m(e,null),t=!0},p(a,[f]){i&&i.p&&(!t||f&1)&&we(i,s,a,a[0],t?De(s,a[0],f,null):je(a[0]),null)},i(a){t||(R(i,a),t=!0)},o(a){L(i,a),t=!1},d(a){a&&v(e),i&&i.d(a)}}}function bt(l,e,t){let{$$slots:s={},$$scope:i}=e;return l.$$set=a=>{"$$scope"in a&&t(0,i=a.$$scope)},[i,s]}class pt extends fe{constructor(e){super(),ce(this,e,bt,vt,me,{})}}function kt(l){let e,t,s,i,a,f,u,n,o,r;return{c(){e=k("div"),t=U(`Must be register to comment\r
  `),s=k("div"),i=k("a"),a=k("button"),f=U("Signin"),u=O(),n=k("a"),o=k("button"),r=U("Signup"),this.h()},l(h){e=E(h,"DIV",{class:!0});var d=I(e);t=y(d,`Must be register to comment\r
  `),s=E(d,"DIV",{class:!0});var g=I(s);i=E(g,"A",{href:!0});var _=I(i);a=E(_,"BUTTON",{class:!0});var b=I(a);f=y(b,"Signin"),b.forEach(v),_.forEach(v),u=V(g),n=E(g,"A",{href:!0});var j=I(n);o=E(j,"BUTTON",{class:!0});var D=I(o);r=y(D,"Signup"),D.forEach(v),j.forEach(v),g.forEach(v),d.forEach(v),this.h()},h(){c(a,"class","black svelte-5jkpge"),c(i,"href","/signin"),c(o,"class","green svelte-5jkpge"),c(n,"href","/signup"),c(s,"class","svelte-5jkpge"),c(e,"class","register svelte-5jkpge")},m(h,d){q(h,e,d),m(e,t),m(e,s),m(s,i),m(i,a),m(a,f),m(s,u),m(s,n),m(n,o),m(o,r)},p:re,i:re,o:re,d(h){h&&v(e)}}}class Et extends fe{constructor(e){super(),ce(this,e,null,kt,me,{})}}function He(l){let e,t,s,i,a,f,u,n,o,r;return{c(){e=k("div"),t=k("button"),s=U("Cancel"),i=O(),a=k("button"),f=U("Comment"),this.h()},l(h){e=E(h,"DIV",{class:!0});var d=I(e);t=E(d,"BUTTON",{class:!0});var g=I(t);s=y(g,"Cancel"),g.forEach(v),i=V(d),a=E(d,"BUTTON",{class:!0});var _=I(a);f=y(_,"Comment"),_.forEach(v),d.forEach(v),this.h()},h(){c(t,"class","svelte-lc8ktd"),c(a,"class",u="blue "+(l[2].length>0?"":"disabled")+" svelte-lc8ktd"),a.disabled=n=!(l[2].length>0),c(e,"class","comment-buttons svelte-lc8ktd")},m(h,d){q(h,e,d),m(e,t),m(t,s),m(e,i),m(e,a),m(a,f),o||(r=Z(t,"click",l[11]),o=!0)},p(h,d){d&4&&u!==(u="blue "+(h[2].length>0?"":"disabled")+" svelte-lc8ktd")&&c(a,"class",u),d&4&&n!==(n=!(h[2].length>0))&&(a.disabled=n)},d(h){h&&v(e),o=!1,r()}}}function It(l){let e,t,s,i,a,f,u,n,o,r,h,d,g,_,b=l[3]&&He(l);return{c(){e=k("div"),t=k("h2"),s=k("i"),i=U(`\r
		Post`),a=O(),f=k("form"),u=k("img"),o=O(),r=k("input"),h=O(),b&&b.c(),this.h()},l(j){e=E(j,"DIV",{class:!0});var D=I(e);t=E(D,"H2",{class:!0});var S=I(t);s=E(S,"I",{class:!0}),I(s).forEach(v),i=y(S,`\r
		Post`),S.forEach(v),a=V(D),f=E(D,"FORM",{action:!0,method:!0,class:!0});var P=I(f);u=E(P,"IMG",{src:!0,alt:!0,class:!0}),o=V(P),r=E(P,"INPUT",{type:!0,name:!0,placeholder:!0,autocomplete:!0,spellcheck:!0,class:!0}),h=V(P),b&&b.l(P),P.forEach(v),D.forEach(v),this.h()},h(){c(s,"class","fa-regular fa-copy title-icon"),c(t,"class","title"),_e(u.src,n=X+"/uploads/avatars/"+l[1])||c(u,"src",n),c(u,"alt",""),c(u,"class","svelte-lc8ktd"),c(r,"type","text"),c(r,"name","comment"),c(r,"placeholder","Send a comment..."),c(r,"autocomplete","off"),c(r,"spellcheck","false"),c(r,"class","svelte-lc8ktd"),c(f,"action",d=X+"/api/image/"+l[0]+"/comment"),c(f,"method","POST"),c(f,"class","svelte-lc8ktd"),c(e,"class","comment-form svelte-lc8ktd")},m(j,D){q(j,e,D),m(e,t),m(t,s),m(t,i),m(e,a),m(e,f),m(f,u),m(f,o),m(f,r),be(r,l[2]),l[9](r),m(f,h),b&&b.m(f,null),g||(_=[Z(r,"input",l[8]),Z(r,"focus",l[10]),Z(f,"submit",de(l[6]))],g=!0)},p(j,[D]){D&2&&!_e(u.src,n=X+"/uploads/avatars/"+j[1])&&c(u,"src",n),D&4&&r.value!==j[2]&&be(r,j[2]),j[3]?b?b.p(j,D):(b=He(j),b.c(),b.m(f,null)):b&&(b.d(1),b=null),D&1&&d!==(d=X+"/api/image/"+j[0]+"/comment")&&c(f,"action",d)},i:re,o:re,d(j){j&&v(e),l[9](null),b&&b.d(),g=!1,Ne(_)}}}function wt(l,e,t){let{imageId:s}=e,{avatar:i}=e,{comments:a}=e,f="",u=!1,n;const o=b=>{t(2,f=""),n.blur(),t(3,u=b)};async function r(){const b=await Be(this);b.comment&&t(7,a=[b.comment,...a]),o(!1)}function h(){f=this.value,t(2,f)}function d(b){W[b?"unshift":"push"](()=>{n=b,t(4,n)})}const g=()=>t(3,u=!0),_=()=>o(!1);return l.$$set=b=>{"imageId"in b&&t(0,s=b.imageId),"avatar"in b&&t(1,i=b.avatar),"comments"in b&&t(7,a=b.comments)},[s,i,f,u,n,o,r,a,h,d,g,_]}class jt extends fe{constructor(e){super(),ce(this,e,wt,It,me,{imageId:0,avatar:1,comments:7})}}function Fe(l){let e,t;const s=l[2].default,i=ke(s,l,l[1],null);return{c(){e=k("div"),i&&i.c(),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=I(e);i&&i.l(f),f.forEach(v),this.h()},h(){c(e,"class","comments-list svelte-1y2cz3c")},m(a,f){q(a,e,f),i&&i.m(e,null),t=!0},p(a,f){i&&i.p&&(!t||f&2)&&we(i,s,a,a[1],t?De(s,a[1],f,null):je(a[1]),null)},i(a){t||(R(i,a),t=!0)},o(a){L(i,a),t=!1},d(a){a&&v(e),i&&i.d(a)}}}function Dt(l){let e,t,s,i,a,f,u,n,o=l[0]>0&&Fe(l);return{c(){e=k("div"),t=k("h2"),s=k("i"),i=O(),a=U(l[0]),f=U(" Comments"),u=O(),o&&o.c(),this.h()},l(r){e=E(r,"DIV",{class:!0});var h=I(e);t=E(h,"H2",{class:!0});var d=I(t);s=E(d,"I",{class:!0}),I(s).forEach(v),i=V(d),a=y(d,l[0]),f=y(d," Comments"),d.forEach(v),u=V(h),o&&o.l(h),h.forEach(v),this.h()},h(){c(s,"class","fa-solid fa-message title-icon"),c(t,"class","title"),c(e,"class","comments-container svelte-1y2cz3c")},m(r,h){q(r,e,h),m(e,t),m(t,s),m(t,i),m(t,a),m(t,f),m(e,u),o&&o.m(e,null),n=!0},p(r,[h]){(!n||h&1)&&oe(a,r[0]),r[0]>0?o?(o.p(r,h),h&1&&R(o,1)):(o=Fe(r),o.c(),R(o,1),o.m(e,null)):o&&(Ee(),L(o,1,1,()=>{o=null}),Ie())},i(r){n||(R(o),n=!0)},o(r){L(o),n=!1},d(r){r&&v(e),o&&o.d()}}}function Ct(l,e,t){let{$$slots:s={},$$scope:i}=e,{totalComments:a}=e;return l.$$set=f=>{"totalComments"in f&&t(0,a=f.totalComments),"$$scope"in f&&t(1,i=f.$$scope)},[a,i,s]}class Tt extends fe{constructor(e){super(),ce(this,e,Ct,Dt,me,{totalComments:0})}}function Ge(l){let e,t;return{c(){e=k("p"),t=U("(edit)"),this.h()},l(s){e=E(s,"P",{class:!0});var i=I(e);t=y(i,"(edit)"),i.forEach(v),this.h()},h(){c(e,"class","grey svelte-3y2i6b")},m(s,i){q(s,e,i),m(e,t)},d(s){s&&v(e)}}}function Nt(l){let e,t=l[0].comment+"",s;return{c(){e=k("div"),s=U(t),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=I(e);s=y(a,t),a.forEach(v),this.h()},h(){c(e,"class","comment-content svelte-3y2i6b")},m(i,a){q(i,e,a),m(e,s)},p(i,a){a&1&&t!==(t=i[0].comment+"")&&oe(s,t)},d(i){i&&v(e)}}}function Ot(l){let e,t,s,i,a,f,u,n,o,r,h,d,g,_,b;return{c(){e=k("form"),t=k("input"),s=O(),i=k("button"),a=k("i"),f=U(`\r
				Cancel`),u=O(),n=k("button"),o=k("i"),r=U(`\r
				Done`),this.h()},l(j){e=E(j,"FORM",{class:!0,action:!0,method:!0});var D=I(e);t=E(D,"INPUT",{type:!0,name:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),s=V(D),i=E(D,"BUTTON",{class:!0});var S=I(i);a=E(S,"I",{class:!0}),I(a).forEach(v),f=y(S,`\r
				Cancel`),S.forEach(v),u=V(D),n=E(D,"BUTTON",{class:!0});var P=I(n);o=E(P,"I",{class:!0}),I(o).forEach(v),r=y(P,`\r
				Done`),P.forEach(v),D.forEach(v),this.h()},h(){c(t,"type","text"),c(t,"name","comment"),c(t,"spellcheck","false"),c(t,"autocomplete","off"),c(t,"maxlength","4200"),c(t,"class","svelte-3y2i6b"),c(a,"class","fa-solid fa-cancel svelte-3y2i6b"),c(i,"class","red svelte-3y2i6b"),c(o,"class","fa-solid fa-check svelte-3y2i6b"),c(n,"class",h=qe(l[5].length>0?"":"disabled")+" svelte-3y2i6b"),n.disabled=d=!(l[5].length>0),c(e,"class","comment-form svelte-3y2i6b"),c(e,"action",g=X+"/api/comment/"+l[0].id+"/edit"),c(e,"method","POST")},m(j,D){q(j,e,D),m(e,t),be(t,l[5]),l[14](t),m(e,s),m(e,i),m(i,a),m(i,f),m(e,u),m(e,n),m(n,o),m(n,r),_||(b=[Z(t,"input",l[13]),Z(i,"click",de(l[7])),Z(e,"submit",de(l[8]))],_=!0)},p(j,D){D&32&&t.value!==j[5]&&be(t,j[5]),D&32&&h!==(h=qe(j[5].length>0?"":"disabled")+" svelte-3y2i6b")&&c(n,"class",h),D&32&&d!==(d=!(j[5].length>0))&&(n.disabled=d),D&1&&g!==(g=X+"/api/comment/"+j[0].id+"/edit")&&c(e,"action",g)},d(j){j&&v(e),l[14](null),_=!1,Ne(b)}}}function Je(l){let e,t,s,i,a,f,u=l[3]&&Ke(l);return{c(){e=k("button"),t=k("i"),s=O(),u&&u.c(),i=ue(),this.h()},l(n){e=E(n,"BUTTON",{class:!0});var o=I(e);t=E(o,"I",{class:!0}),I(t).forEach(v),o.forEach(v),s=V(n),u&&u.l(n),i=ue(),this.h()},h(){c(t,"class","fa-solid fa-ellipsis-vertical fa-lg svelte-3y2i6b"),c(e,"class","comment-button svelte-3y2i6b")},m(n,o){q(n,e,o),m(e,t),q(n,s,o),u&&u.m(n,o),q(n,i,o),a||(f=Z(e,"click",l[15]),a=!0)},p(n,o){n[3]?u?u.p(n,o):(u=Ke(n),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},d(n){n&&v(e),n&&v(s),u&&u.d(n),n&&v(i),a=!1,f()}}}function Ke(l){let e,t,s,i,a,f,u,n=l[1].username===l[0].author&&Qe(l);return{c(){e=k("ul"),n&&n.c(),t=O(),s=k("li"),i=k("i"),a=U(`\r
					Delete`),this.h()},l(o){e=E(o,"UL",{class:!0});var r=I(e);n&&n.l(r),t=V(r),s=E(r,"LI",{class:!0});var h=I(s);i=E(h,"I",{class:!0}),I(i).forEach(v),a=y(h,`\r
					Delete`),h.forEach(v),r.forEach(v),this.h()},h(){c(i,"class","fa-solid fa-square-minus svelte-3y2i6b"),c(s,"class","svelte-3y2i6b"),c(e,"class","svelte-3y2i6b")},m(o,r){q(o,e,r),n&&n.m(e,null),m(e,t),m(e,s),m(s,i),m(s,a),f||(u=[Z(s,"mousedown",l[9]),xe(et.call(null,e)),Z(e,"outclick",l[16])],f=!0)},p(o,r){o[1].username===o[0].author?n?n.p(o,r):(n=Qe(o),n.c(),n.m(e,t)):n&&(n.d(1),n=null)},d(o){o&&v(e),n&&n.d(),f=!1,Ne(u)}}}function Qe(l){let e,t,s,i,a;return{c(){e=k("li"),t=k("i"),s=U(`\r
					Edit`),this.h()},l(f){e=E(f,"LI",{class:!0});var u=I(e);t=E(u,"I",{class:!0}),I(t).forEach(v),s=y(u,`\r
					Edit`),u.forEach(v),this.h()},h(){c(t,"class","fa-solid fa-pen svelte-3y2i6b"),c(e,"class","svelte-3y2i6b")},m(f,u){q(f,e,u),m(e,t),m(e,s),i||(a=Z(e,"mousedown",l[6]),i=!0)},p:re,d(f){f&&v(e),i=!1,a()}}}function Vt(l){let e,t,s,i,a,f,u,n,o,r=l[0].author+"",h,d,g,_,b=pe(l[0].createdAt)+"",j,D,S,P,w,T,p,C,N=l[0].edit&&Ge();function H(A,M){return A[4]?Ot:Nt}let Y=H(l),G=Y(l);const $=l[12].default,J=ke($,l,l[11],null);let F=l[1]&&(l[1].username===l[0].author||l[1].username===l[0].receiver||l[1].role!==Ae.EDITOR)&&Je(l);return{c(){e=k("div"),t=k("a"),s=k("img"),u=O(),n=k("div"),o=k("a"),h=U(r),g=U(`\r
		●\r
		`),_=k("p"),j=U(b),D=O(),N&&N.c(),S=O(),G.c(),P=O(),w=k("div"),J&&J.c(),T=O(),p=k("div"),F&&F.c(),this.h()},l(A){e=E(A,"DIV",{class:!0});var M=I(e);t=E(M,"A",{class:!0,href:!0});var ge=I(t);s=E(ge,"IMG",{src:!0,alt:!0,class:!0}),ge.forEach(v),u=V(M),n=E(M,"DIV",{class:!0});var K=I(n);o=E(K,"A",{href:!0,class:!0});var Q=I(o);h=y(Q,r),Q.forEach(v),g=y(K,`\r
		●\r
		`),_=E(K,"P",{});var Ce=I(_);j=y(Ce,b),Ce.forEach(v),D=V(K),N&&N.l(K),K.forEach(v),S=V(M),G.l(M),P=V(M),w=E(M,"DIV",{class:!0});var he=I(w);J&&J.l(he),he.forEach(v),T=V(M),p=E(M,"DIV",{class:!0});var ne=I(p);F&&F.l(ne),ne.forEach(v),M.forEach(v),this.h()},h(){_e(s.src,i=X+"/uploads/avatars/"+l[0].avatar)||c(s,"src",i),c(s,"alt",a=l[0].author),c(s,"class","svelte-3y2i6b"),c(t,"class","comment-avatar svelte-3y2i6b"),c(t,"href",f="/user/"+l[0].author),c(o,"href",d="/user/"+l[0].author),c(o,"class","svelte-3y2i6b"),c(n,"class","comment-author svelte-3y2i6b"),c(w,"class","svelte-3y2i6b"),c(p,"class","comment-options svelte-3y2i6b"),c(e,"class","comment svelte-3y2i6b")},m(A,M){q(A,e,M),m(e,t),m(t,s),m(e,u),m(e,n),m(n,o),m(o,h),m(n,g),m(n,_),m(_,j),m(n,D),N&&N.m(n,null),m(e,S),G.m(e,null),m(e,P),m(e,w),J&&J.m(w,null),m(e,T),m(e,p),F&&F.m(p,null),C=!0},p(A,[M]){(!C||M&1&&!_e(s.src,i=X+"/uploads/avatars/"+A[0].avatar))&&c(s,"src",i),(!C||M&1&&a!==(a=A[0].author))&&c(s,"alt",a),(!C||M&1&&f!==(f="/user/"+A[0].author))&&c(t,"href",f),(!C||M&1)&&r!==(r=A[0].author+"")&&oe(h,r),(!C||M&1&&d!==(d="/user/"+A[0].author))&&c(o,"href",d),(!C||M&1)&&b!==(b=pe(A[0].createdAt)+"")&&oe(j,b),A[0].edit?N||(N=Ge(),N.c(),N.m(n,null)):N&&(N.d(1),N=null),Y===(Y=H(A))&&G?G.p(A,M):(G.d(1),G=Y(A),G&&(G.c(),G.m(e,P))),J&&J.p&&(!C||M&2048)&&we(J,$,A,A[11],C?De($,A[11],M,null):je(A[11]),null),A[1]&&(A[1].username===A[0].author||A[1].username===A[0].receiver||A[1].role!==Ae.EDITOR)?F?F.p(A,M):(F=Je(A),F.c(),F.m(p,null)):F&&(F.d(1),F=null)},i(A){C||(R(J,A),C=!0)},o(A){L(J,A),C=!1},d(A){A&&v(e),N&&N.d(),G.d(),J&&J.d(A),F&&F.d()}}}function At(l,e,t){let{$$slots:s={},$$scope:i}=e,{comment:a}=e,{comments:f}=e,{user:u}=e,n,o=!1,r=!1,h=a.comment;async function d(){t(4,r=!0),t(3,o=!1),n.focus()}async function g(){t(4,r=!1),t(5,h=a.comment),n.blur()}async function _(){t(4,r=!1),t(0,a.edit=!0,a),t(0,a.comment=h,a),Be(this)}async function b(){t(3,o=!1),t(10,f=f.filter(({id:w})=>w!==a.id)),await Se({method:"DELETE",url:`${X}/api/comment/${a.id}`,withCredentials:!0})}function j(){h=this.value,t(5,h)}function D(w){W[w?"unshift":"push"](()=>{n=w,t(2,n)})}const S=()=>t(3,o=!o),P=()=>t(3,o=!1);return l.$$set=w=>{"comment"in w&&t(0,a=w.comment),"comments"in w&&t(10,f=w.comments),"user"in w&&t(1,u=w.user),"$$scope"in w&&t(11,i=w.$$scope)},[a,u,n,o,r,h,d,g,_,b,f,i,s,j,D,S,P]}class Pt extends fe{constructor(e){super(),ce(this,e,At,Vt,me,{comment:0,comments:10,user:1})}}function St(l){let e,t,s,i,a,f,u=l[0].title+"",n,o,r,h=l[0].author+"",d,g,_,b=l[0].views+"",j,D,S=pe(l[0].createdAt)+"",P,w,T;return{c(){e=k("a"),t=k("img"),a=O(),f=k("h2"),n=U(u),o=O(),r=k("p"),d=U(h),g=O(),_=k("div"),j=U(b),D=U(" views ● "),P=U(S),this.h()},l(p){e=E(p,"A",{href:!0,title:!0,class:!0});var C=I(e);t=E(C,"IMG",{src:!0,alt:!0,class:!0}),a=V(C),f=E(C,"H2",{class:!0});var N=I(f);n=y(N,u),N.forEach(v),o=V(C),r=E(C,"P",{class:!0});var H=I(r);d=y(H,h),H.forEach(v),g=V(C),_=E(C,"DIV",{class:!0});var Y=I(_);j=y(Y,b),D=y(Y," views ● "),P=y(Y,S),Y.forEach(v),C.forEach(v),this.h()},h(){_e(t.src,s=X+"/uploads/"+l[0].filename)||c(t,"src",s),c(t,"alt",i=l[0].title),c(t,"class","svelte-17h5z09"),c(f,"class","svelte-17h5z09"),c(r,"class","svelte-17h5z09"),c(_,"class","svelte-17h5z09"),c(e,"href",w="/gallery/"+l[0].id),c(e,"title",T=l[0].title),c(e,"class","svelte-17h5z09")},m(p,C){q(p,e,C),m(e,t),m(e,a),m(e,f),m(f,n),m(e,o),m(e,r),m(r,d),m(e,g),m(e,_),m(_,j),m(_,D),m(_,P)},p(p,[C]){C&1&&!_e(t.src,s=X+"/uploads/"+p[0].filename)&&c(t,"src",s),C&1&&i!==(i=p[0].title)&&c(t,"alt",i),C&1&&u!==(u=p[0].title+"")&&oe(n,u),C&1&&h!==(h=p[0].author+"")&&oe(d,h),C&1&&b!==(b=p[0].views+"")&&oe(j,b),C&1&&S!==(S=pe(p[0].createdAt)+"")&&oe(P,S),C&1&&w!==(w="/gallery/"+p[0].id)&&c(e,"href",w),C&1&&T!==(T=p[0].title)&&c(e,"title",T)},i:re,o:re,d(p){p&&v(e)}}}function Bt(l,e,t){let{image:s}=e;return l.$$set=i=>{"image"in i&&t(0,s=i.image)},[s]}class Rt extends fe{constructor(e){super(),ce(this,e,Bt,St,me,{image:0})}}function Ut(l){let e;return{c(){e=k("i"),this.h()},l(t){e=E(t,"I",{class:!0}),I(e).forEach(v),this.h()},h(){c(e,"class","fa-solid fa-eye-slash")},m(t,s){q(t,e,s)},d(t){t&&v(e)}}}function yt(l){let e;return{c(){e=k("i"),this.h()},l(t){e=E(t,"I",{class:!0}),I(e).forEach(v),this.h()},h(){c(e,"class","fa-solid fa-eye")},m(t,s){q(t,e,s)},d(t){t&&v(e)}}}function qt(l){let e,t,s,i,a,f,u,n,o,r,h,d,g,_,b,j,D,S,P;function w(C,N){return C[0].isPublic?yt:Ut}let T=w(l),p=T(l);return{c(){e=k("ul"),t=k("a"),s=k("li"),i=U("Edit"),a=O(),f=k("i"),u=O(),n=k("a"),o=k("li"),r=U("Public"),h=O(),p.c(),d=O(),g=k("a"),_=k("li"),b=U("Delete"),j=O(),D=k("i"),this.h()},l(C){e=E(C,"UL",{class:!0});var N=I(e);t=E(N,"A",{href:!0,class:!0});var H=I(t);s=E(H,"LI",{});var Y=I(s);i=y(Y,"Edit"),Y.forEach(v),a=V(H),f=E(H,"I",{class:!0}),I(f).forEach(v),H.forEach(v),u=V(N),n=E(N,"A",{href:!0,class:!0});var G=I(n);o=E(G,"LI",{});var $=I(o);r=y($,"Public"),$.forEach(v),h=V(G),p.l(G),G.forEach(v),d=V(N),g=E(N,"A",{href:!0,class:!0});var J=I(g);_=E(J,"LI",{});var F=I(_);b=y(F,"Delete"),F.forEach(v),j=V(J),D=E(J,"I",{class:!0}),I(D).forEach(v),J.forEach(v),N.forEach(v),this.h()},h(){c(f,"class","fa-solid fa-pen"),c(t,"href","#edit"),c(t,"class","svelte-1jhluf3"),c(n,"href","#placeholder"),c(n,"class","svelte-1jhluf3"),c(D,"class","fa-solid fa-delete-left"),c(g,"href","#placeholder"),c(g,"class","svelte-1jhluf3"),c(e,"class","svelte-1jhluf3")},m(C,N){q(C,e,N),m(e,t),m(t,s),m(s,i),m(t,a),m(t,f),m(e,u),m(e,n),m(n,o),m(o,r),m(n,h),p.m(n,null),m(e,d),m(e,g),m(g,_),m(_,b),m(g,j),m(g,D),S||(P=[Z(t,"click",l[2]),Z(n,"click",de(l[3])),Z(g,"click",de(l[4])),xe(et.call(null,e)),Z(e,"outclick",l[6])],S=!0)},p(C,[N]){T!==(T=w(C))&&(p.d(1),p=T(C),p&&(p.c(),p.m(n,null)))},i:re,o:re,d(C){C&&v(e),p.d(),S=!1,Ne(P)}}}function Mt(l,e,t){let{image:s}=e,{visible:i}=e,{description:a}=e;const f=()=>{t(1,i=!1),t(5,a=!0)},u=async()=>{t(1,i=!1),await Se({method:"POST",url:`${X}/api/image/${s.id}/public`,withCredentials:!0}),t(0,s.isPublic=!s.isPublic,s)},n=async()=>{t(1,i=!1),await Se({method:"DELETE",url:`${X}/api/image/${s.id}`,withCredentials:!0}),window.location.href="/"},o=()=>t(1,i=!1);return l.$$set=r=>{"image"in r&&t(0,s=r.image),"visible"in r&&t(1,i=r.visible),"description"in r&&t(5,a=r.description)},[s,i,f,u,n,a,o]}class Lt extends fe{constructor(e){super(),ce(this,e,Mt,qt,me,{image:0,visible:1,description:5})}}function zt(l){return l.favorite!==void 0}function Ht(l){let e,t,s,i,a,f,u;return{c(){e=k("div"),t=k("i"),i=O(),a=U(l[5]),this.h()},l(n){e=E(n,"DIV",{class:!0});var o=I(e);t=E(o,"I",{id:!0,class:!0}),I(t).forEach(v),i=V(o),a=y(o,l[5]),o.forEach(v),this.h()},h(){c(t,"id",l[0]),c(t,"class",s="fa-solid "+l[1]+" "+(l[3]?l[2]:"")+" svelte-xdj7pf"),c(e,"class","svelte-xdj7pf")},m(n,o){q(n,e,o),m(e,t),m(e,i),m(e,a),f||(u=Z(t,"mousedown",function(){lt(l[4]?l[7]:l[6])&&(l[4]?l[7]:l[6]).apply(this,arguments)}),f=!0)},p(n,[o]){l=n,o&1&&c(t,"id",l[0]),o&14&&s!==(s="fa-solid "+l[1]+" "+(l[3]?l[2]:"")+" svelte-xdj7pf")&&c(t,"class",s),o&32&&oe(a,l[5])},i:re,o:re,d(n){n&&v(e),f=!1,u()}}}function Ft(l,e,t){let{user:s}=e,{object:i}=e,{id:a="like"}=e,{text:f="image"}=e,{icon:u="fa-thumbs-up"}=e,{className:n="selected"}=e,{include:o}=e,{fav:r=!1}=e,{assessment:h}=e;async function d(){if(s){const _=`${X}/api/${f}/${i.id}/like`,{like:b,dislike:j}=await Me(_,this.id);t(8,i.like=b,i),t(8,i.dislike=j,i)}}async function g(){if(s&&zt(i)){const _=`${X}/api/image/${i.id}/favorite`,{favorite:b}=await Me(_,this.id);t(8,i.favorite=b,i)}}return l.$$set=_=>{"user"in _&&t(9,s=_.user),"object"in _&&t(8,i=_.object),"id"in _&&t(0,a=_.id),"text"in _&&t(10,f=_.text),"icon"in _&&t(1,u=_.icon),"className"in _&&t(2,n=_.className),"include"in _&&t(3,o=_.include),"fav"in _&&t(4,r=_.fav),"assessment"in _&&t(5,h=_.assessment)},[a,u,n,o,r,h,d,g,i,s,f]}class Te extends fe{constructor(e){super(),ce(this,e,Ft,Ht,me,{user:9,object:8,id:0,text:10,icon:1,className:2,include:3,fav:4,assessment:5})}}function Xe(l,e,t){const s=l.slice();return s[19]=e[t],s[20]=e,s[21]=t,s}function Ye(l,e,t){const s=l.slice();return s[22]=e[t],s}function Ze(l){let e,t,s,i,a;function f(r){l[6](r)}function u(r){l[7](r)}function n(r){l[8](r)}let o={};return l[0].image!==void 0&&(o.image=l[0].image),l[1]!==void 0&&(o.visible=l[1]),l[2]!==void 0&&(o.description=l[2]),e=new Lt({props:o}),W.push(()=>x(e,"image",f)),W.push(()=>x(e,"visible",u)),W.push(()=>x(e,"description",n)),{c(){te(e.$$.fragment)},l(r){se(e.$$.fragment,r)},m(r,h){le(e,r,h),a=!0},p(r,h){const d={};!t&&h&1&&(t=!0,d.image=r[0].image,ee(()=>t=!1)),!s&&h&2&&(s=!0,d.visible=r[1],ee(()=>s=!1)),!i&&h&4&&(i=!0,d.description=r[2],ee(()=>i=!1)),e.$set(d)},i(r){a||(R(e.$$.fragment,r),a=!0)},o(r){L(e.$$.fragment,r),a=!1},d(r){ie(e,r)}}}function Gt(l){let e,t,s=l[1]&&Ze(l);return{c(){s&&s.c(),e=ue()},l(i){s&&s.l(i),e=ue()},m(i,a){s&&s.m(i,a),q(i,e,a),t=!0},p(i,a){i[1]?s?(s.p(i,a),a&2&&R(s,1)):(s=Ze(i),s.c(),R(s,1),s.m(e.parentNode,e)):s&&(Ee(),L(s,1,1,()=>{s=null}),Ie())},i(i){t||(R(s),t=!0)},o(i){L(s),t=!1},d(i){s&&s.d(i),i&&v(e)}}}function Jt(l){var D,S,P;let e,t,s,i,a,f,u,n,o,r;function h(w){l[3](w)}let d={user:l[0].user,include:l[0].image.like.includes((D=l[0].user)==null?void 0:D.username),assessment:l[0].image.like.length};l[0].image!==void 0&&(d.object=l[0].image),t=new Te({props:d}),W.push(()=>x(t,"object",h));function g(w){l[4](w)}let _={user:l[0].user,id:"dislike",icon:"fa-thumbs-down",assessment:l[0].image.dislike.length,include:l[0].image.dislike.includes((S=l[0].user)==null?void 0:S.username)};l[0].image!==void 0&&(_.object=l[0].image),a=new Te({props:_}),W.push(()=>x(a,"object",g));function b(w){l[5](w)}let j={user:l[0].user,id:"fav",icon:"fa-star",assessment:l[0].image.favorite.length,fav:!0,include:l[0].image.favorite.includes((P=l[0].user)==null?void 0:P.username)};return l[0].image!==void 0&&(j.object=l[0].image),n=new Te({props:j}),W.push(()=>x(n,"object",b)),{c(){e=k("div"),te(t.$$.fragment),i=O(),te(a.$$.fragment),u=O(),te(n.$$.fragment),this.h()},l(w){e=E(w,"DIV",{class:!0,slot:!0});var T=I(e);se(t.$$.fragment,T),i=V(T),se(a.$$.fragment,T),u=V(T),se(n.$$.fragment,T),T.forEach(v),this.h()},h(){c(e,"class","image-stats svelte-2mhczw"),c(e,"slot","assessment")},m(w,T){q(w,e,T),le(t,e,null),m(e,i),le(a,e,null),m(e,u),le(n,e,null),r=!0},p(w,T){var H,Y,G;const p={};T&1&&(p.user=w[0].user),T&1&&(p.include=w[0].image.like.includes((H=w[0].user)==null?void 0:H.username)),T&1&&(p.assessment=w[0].image.like.length),!s&&T&1&&(s=!0,p.object=w[0].image,ee(()=>s=!1)),t.$set(p);const C={};T&1&&(C.user=w[0].user),T&1&&(C.assessment=w[0].image.dislike.length),T&1&&(C.include=w[0].image.dislike.includes((Y=w[0].user)==null?void 0:Y.username)),!f&&T&1&&(f=!0,C.object=w[0].image,ee(()=>f=!1)),a.$set(C);const N={};T&1&&(N.user=w[0].user),T&1&&(N.assessment=w[0].image.favorite.length),T&1&&(N.include=w[0].image.favorite.includes((G=w[0].user)==null?void 0:G.username)),!o&&T&1&&(o=!0,N.object=w[0].image,ee(()=>o=!1)),n.$set(N)},i(w){r||(R(t.$$.fragment,w),R(a.$$.fragment,w),R(n.$$.fragment,w),r=!0)},o(w){L(t.$$.fragment,w),L(a.$$.fragment,w),L(n.$$.fragment,w),r=!1},d(w){w&&v(e),ie(t),ie(a),ie(n)}}}function We(l){let e,t;return e=new Rt({props:{image:l[22]}}),{c(){te(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,i){le(e,s,i),t=!0},p(s,i){const a={};i&1&&(a.image=s[22]),e.$set(a)},i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){ie(e,s)}}}function Kt(l){let e,t,s=l[0].sidebar,i=[];for(let f=0;f<s.length;f+=1)i[f]=We(Ye(l,s,f));const a=f=>L(i[f],1,1,()=>{i[f]=null});return{c(){for(let f=0;f<i.length;f+=1)i[f].c();e=ue()},l(f){for(let u=0;u<i.length;u+=1)i[u].l(f);e=ue()},m(f,u){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(f,u);q(f,e,u),t=!0},p(f,u){if(u&1){s=f[0].sidebar;let n;for(n=0;n<s.length;n+=1){const o=Ye(f,s,n);i[n]?(i[n].p(o,u),R(i[n],1)):(i[n]=We(o),i[n].c(),R(i[n],1),i[n].m(e.parentNode,e))}for(Ee(),n=s.length;n<i.length;n+=1)a(n);Ie()}},i(f){if(!t){for(let u=0;u<s.length;u+=1)R(i[u]);t=!0}},o(f){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)L(i[u]);t=!1},d(f){it(i,f),f&&v(e)}}}function Qt(l){let e,t;return e=new ot({props:{className:"image-sidebar",$$slots:{default:[Kt]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,i){le(e,s,i),t=!0},p(s,i){const a={};i&33554433&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){ie(e,s)}}}function Xt(l){let e,t;return e=new Et({}),{c(){te(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,i){le(e,s,i),t=!0},p:re,i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){ie(e,s)}}}function Yt(l){let e,t,s,i,a;function f(r){l[11](r)}function u(r){l[12](r)}function n(r){l[13](r)}let o={};return l[0].image.id!==void 0&&(o.imageId=l[0].image.id),l[0].user.avatar!==void 0&&(o.avatar=l[0].user.avatar),l[0].comments!==void 0&&(o.comments=l[0].comments),e=new jt({props:o}),W.push(()=>x(e,"imageId",f)),W.push(()=>x(e,"avatar",u)),W.push(()=>x(e,"comments",n)),{c(){te(e.$$.fragment)},l(r){se(e.$$.fragment,r)},m(r,h){le(e,r,h),a=!0},p(r,h){const d={};!t&&h&1&&(t=!0,d.imageId=r[0].image.id,ee(()=>t=!1)),!s&&h&1&&(s=!0,d.avatar=r[0].user.avatar,ee(()=>s=!1)),!i&&h&1&&(i=!0,d.comments=r[0].comments,ee(()=>i=!1)),e.$set(d)},i(r){a||(R(e.$$.fragment,r),a=!0)},o(r){L(e.$$.fragment,r),a=!1},d(r){ie(e,r)}}}function Zt(l){var d,g;let e,t,s,i,a,f,u;function n(_){l[14](_,l[19],l[20],l[21])}let o={user:l[0].user,text:"comment",assessment:l[19].like.length,className:"grey",include:l[19].like.includes((d=l[0].user)==null?void 0:d.username)};l[19]!==void 0&&(o.object=l[19]),e=new Te({props:o}),W.push(()=>x(e,"object",n));function r(_){l[15](_,l[19],l[20],l[21])}let h={user:l[0].user,id:"dislike",text:"comment",icon:"fa-solid fa-thumbs-down",className:"grey",assessment:l[19].dislike.length,include:l[19].dislike.includes((g=l[0].user)==null?void 0:g.username)};return l[19]!==void 0&&(h.object=l[19]),i=new Te({props:h}),W.push(()=>x(i,"object",r)),{c(){te(e.$$.fragment),s=O(),te(i.$$.fragment),f=O()},l(_){se(e.$$.fragment,_),s=V(_),se(i.$$.fragment,_),f=V(_)},m(_,b){le(e,_,b),q(_,s,b),le(i,_,b),q(_,f,b),u=!0},p(_,b){var S,P;l=_;const j={};b&1&&(j.user=l[0].user),b&1&&(j.assessment=l[19].like.length),b&1&&(j.include=l[19].like.includes((S=l[0].user)==null?void 0:S.username)),!t&&b&1&&(t=!0,j.object=l[19],ee(()=>t=!1)),e.$set(j);const D={};b&1&&(D.user=l[0].user),b&1&&(D.assessment=l[19].dislike.length),b&1&&(D.include=l[19].dislike.includes((P=l[0].user)==null?void 0:P.username)),!a&&b&1&&(a=!0,D.object=l[19],ee(()=>a=!1)),i.$set(D)},i(_){u||(R(e.$$.fragment,_),R(i.$$.fragment,_),u=!0)},o(_){L(e.$$.fragment,_),L(i.$$.fragment,_),u=!1},d(_){ie(e,_),_&&v(s),ie(i,_),_&&v(f)}}}function $e(l,e){let t,s,i,a,f,u;function n(d){e[16](d)}function o(d){e[17](d,e[19],e[20],e[21])}function r(d){e[18](d)}let h={$$slots:{default:[Zt]},$$scope:{ctx:e}};return e[0].comments!==void 0&&(h.comments=e[0].comments),e[19]!==void 0&&(h.comment=e[19]),e[0].user!==void 0&&(h.user=e[0].user),s=new Pt({props:h}),W.push(()=>x(s,"comments",n)),W.push(()=>x(s,"comment",o)),W.push(()=>x(s,"user",r)),{key:l,first:null,c(){t=ue(),te(s.$$.fragment),this.h()},l(d){t=ue(),se(s.$$.fragment,d),this.h()},h(){this.first=t},m(d,g){q(d,t,g),le(s,d,g),u=!0},p(d,g){e=d;const _={};g&33554433&&(_.$$scope={dirty:g,ctx:e}),!i&&g&1&&(i=!0,_.comments=e[0].comments,ee(()=>i=!1)),!a&&g&1&&(a=!0,_.comment=e[19],ee(()=>a=!1)),!f&&g&1&&(f=!0,_.user=e[0].user,ee(()=>f=!1)),s.$set(_)},i(d){u||(R(s.$$.fragment,d),u=!0)},o(d){L(s.$$.fragment,d),u=!1},d(d){d&&v(t),ie(s,d)}}}function Wt(l){let e=[],t=new Map,s,i,a=l[0].comments;const f=u=>u[19].id;for(let u=0;u<a.length;u+=1){let n=Xe(l,a,u),o=f(n);t.set(o,e[u]=$e(o,n))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();s=ue()},l(u){for(let n=0;n<e.length;n+=1)e[n].l(u);s=ue()},m(u,n){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(u,n);q(u,s,n),i=!0},p(u,n){n&1&&(a=u[0].comments,Ee(),e=nt(e,n,f,1,u,a,t,s.parentNode,at,$e,s,Xe),Ie())},i(u){if(!i){for(let n=0;n<a.length;n+=1)R(e[n]);i=!0}},o(u){for(let n=0;n<e.length;n+=1)L(e[n]);i=!1},d(u){for(let n=0;n<e.length;n+=1)e[n].d(u);u&&v(s)}}}function $t(l){let e,t,s,i,a;const f=[Yt,Xt],u=[];function n(o,r){return o[0].user?0:1}return e=n(l),t=u[e]=f[e](l),i=new Tt({props:{totalComments:l[0].comments.length,$$slots:{default:[Wt]},$$scope:{ctx:l}}}),{c(){t.c(),s=O(),te(i.$$.fragment)},l(o){t.l(o),s=V(o),se(i.$$.fragment,o)},m(o,r){u[e].m(o,r),q(o,s,r),le(i,o,r),a=!0},p(o,r){let h=e;e=n(o),e===h?u[e].p(o,r):(Ee(),L(u[h],1,1,()=>{u[h]=null}),Ie(),t=u[e],t?t.p(o,r):(t=u[e]=f[e](o),t.c()),R(t,1),t.m(s.parentNode,s));const d={};r&1&&(d.totalComments=o[0].comments.length),r&33554433&&(d.$$scope={dirty:r,ctx:o}),i.$set(d)},i(o){a||(R(t),R(i.$$.fragment,o),a=!0)},o(o){L(t),L(i.$$.fragment,o),a=!1},d(o){u[e].d(o),o&&v(s),ie(i,o)}}}function xt(l){let e,t,s,i,a,f,u,n,o;function r(g){l[9](g)}function h(g){l[10](g)}let d={image:l[0].image,user:l[0].user,$$slots:{assessment:[Jt],default:[Gt]},$$scope:{ctx:l}};return l[1]!==void 0&&(d.visible=l[1]),l[2]!==void 0&&(d.description=l[2]),t=new _t({props:d}),W.push(()=>x(t,"visible",r)),W.push(()=>x(t,"description",h)),f=new gt({props:{$$slots:{default:[Qt]},$$scope:{ctx:l}}}),n=new pt({props:{$$slots:{default:[$t]},$$scope:{ctx:l}}}),{c(){e=k("div"),te(t.$$.fragment),a=O(),te(f.$$.fragment),u=O(),te(n.$$.fragment),this.h()},l(g){e=E(g,"DIV",{class:!0});var _=I(e);se(t.$$.fragment,_),a=V(_),se(f.$$.fragment,_),u=V(_),se(n.$$.fragment,_),_.forEach(v),this.h()},h(){c(e,"class","image-container svelte-2mhczw")},m(g,_){q(g,e,_),le(t,e,null),m(e,a),le(f,e,null),m(e,u),le(n,e,null),o=!0},p(g,[_]){const b={};_&1&&(b.image=g[0].image),_&1&&(b.user=g[0].user),_&33554439&&(b.$$scope={dirty:_,ctx:g}),!s&&_&2&&(s=!0,b.visible=g[1],ee(()=>s=!1)),!i&&_&4&&(i=!0,b.description=g[2],ee(()=>i=!1)),t.$set(b);const j={};_&33554433&&(j.$$scope={dirty:_,ctx:g}),f.$set(j);const D={};_&33554433&&(D.$$scope={dirty:_,ctx:g}),n.$set(D)},i(g){o||(R(t.$$.fragment,g),R(f.$$.fragment,g),R(n.$$.fragment,g),o=!0)},o(g){L(t.$$.fragment,g),L(f.$$.fragment,g),L(n.$$.fragment,g),o=!1},d(g){g&&v(e),ie(t),ie(f),ie(n)}}}function es(l,e,t){let{data:s}=e,i=!1,a=!1;function f(p){l.$$.not_equal(s.image,p)&&(s.image=p,t(0,s))}function u(p){l.$$.not_equal(s.image,p)&&(s.image=p,t(0,s))}function n(p){l.$$.not_equal(s.image,p)&&(s.image=p,t(0,s))}function o(p){l.$$.not_equal(s.image,p)&&(s.image=p,t(0,s))}function r(p){i=p,t(1,i)}function h(p){a=p,t(2,a)}function d(p){i=p,t(1,i)}function g(p){a=p,t(2,a)}function _(p){l.$$.not_equal(s.image.id,p)&&(s.image.id=p,t(0,s))}function b(p){l.$$.not_equal(s.user.avatar,p)&&(s.user.avatar=p,t(0,s))}function j(p){l.$$.not_equal(s.comments,p)&&(s.comments=p,t(0,s))}function D(p,C,N,H){N[H]=p,t(0,s)}function S(p,C,N,H){N[H]=p,t(0,s)}function P(p){l.$$.not_equal(s.comments,p)&&(s.comments=p,t(0,s))}function w(p,C,N,H){N[H]=p,t(0,s)}function T(p){l.$$.not_equal(s.user,p)&&(s.user=p,t(0,s))}return l.$$set=p=>{"data"in p&&t(0,s=p.data)},[s,i,a,f,u,n,o,r,h,d,g,_,b,j,D,S,P,w,T]}class us extends fe{constructor(e){super(),ce(this,e,es,xt,me,{data:0})}}export{us as default};
